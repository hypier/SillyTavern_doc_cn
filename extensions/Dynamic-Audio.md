# 动态音频

本指南将引导您设置和自定义动态音频资源，以提升您的 SillyTavern 体验。

## 前提条件

在开始之前，请确保您已满足以下前提条件：

- 确保您在 SillyTavern 的最新 `staging` 分支上。
- 从扩展面板的“下载扩展和资源”菜单（叠加块图标）中安装“动态音频”扩展。

## 动态音频设置（浏览器）

1. **连接到资产库**：
   - 启动 SillyTavern 并导航到 **扩展** > **资产**。
   - 点击“连接”按钮以建立与官方资产库的连接。
   - 下载所需的音频资产，例如背景音乐（BGM）或环境音效，这些应与您打算使用的背景相对应。

2. **启用动态音频扩展**：
   - 在 SillyTavern 中，前往 **扩展** > **动态音频**。
   - 启用该扩展，解除静音并根据您的喜好调整 BGM 和环境音效的音量。
   - 当 BGM 结束时，另一个将随机播放，点击循环按钮以保持当前 BGM 播放。
   - 点击滚动按钮以随机选择另一首 BGM。

3. **基于表情的 BGM**：
   - 如果希望 BGM 跟随角色表情，请启用表情 BGM 开关（需要角色文件夹中的 BGM，见下文）。
   - 调整 BGM 更新之间的冷却时间（以秒为单位）。如果您发现 BGM 在群聊中或使用带有情感检测的角色特定 BGM 时变化太频繁，请增加该时间。

## 为角色导入音乐

要为角色的情感设置自定义音乐，请按照以下步骤操作：

1. **导航到角色文件夹**：
   - 转到角色文件夹，例如 `\SillyTavern\data\<user-handle>\characters\Seraphina`。

2. **创建 BGM 文件夹**：
   - 在角色文件夹内，创建一个名为 `bgm` 的子文件夹。

3. **导入情感音乐**：
   - 在 `bgm` 文件夹内，导入每种情感的音乐文件。支持的音频扩展名包括 `.mp3`、`.ogg` 和 `.wav`。
   - 命名约定：`[emotion]_[number].mp3`，例如 `anger_0.mp3`、`joy_0.mp3`。

4. **为情感导入多个曲目**：
   - 您可以通过递增数字来导入同一情感的多个曲目，例如 `neutral_1.mp3`、`neutral_2.mp3`。

5. **默认音乐选择**：
   - 当未检测到情感时，将播放随机中性曲目作为默认音乐。情感的检测类似于更新精灵；有关详细信息，请参阅 [表情图像文档](https://docs.sillytavern.app/extras/extensions/expression-images/)。

## 更改默认背景音乐

如果角色的文件夹中没有自定义背景音乐，将播放默认曲目。以下是更改方法：

1. **导航到背景音乐文件夹**：
   - 转到以下文件夹：`\SillyTavern\data\<user-handle>\assets\bgm`。

2. **替换/添加音乐**：
   - 将音乐文件（`.mp3`，`.ogg`，`.wav`）替换或添加到此文件夹中。
   - 这些是使用资源扩展下载的官方音频资产。
   - 当找不到特定角色的背景音乐时（单人或群聊），将随机播放这些曲目中的一首。

## 更改环境音效

环境音效为您的场景增添了深度。以下是自定义它们的方法：

1. **导航到环境文件夹**：
   - 前往以下文件夹：`\SillyTavern\data\<user-handle>\assets\ambient`。

2. **文件命名约定**：
   - 环境音频文件名与背景图像文件名相对应，将空格替换为短横线。
   - 示例：`"bedroom-clean.mp3"` 对应于背景 "bedroom clean.jpg"。
   - 如果解锁按钮被解锁，背景对应的音频文件将播放。激活锁定将保持当前环境音效播放。

3. **自定义环境音效**：
   - 您可以通过遵循相同的命名模式为自定义或现有背景添加自己的环境音效。

感谢您遵循本指南！您的 SillyTavern 体验现在因动态音频而更加丰富。