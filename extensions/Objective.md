# 目标

### 什么是它？

Objective 扩展允许用户指定一个目标，让 AI 在聊天过程中努力实现。这个目标被分解为逐步任务。任务可以是分支的，子任务可以自动或手动创建。这使得能够创建复杂的任务树。列表中每个任务的完成状态将在特定时间间隔内进行检查。

这与通过提示添加静态指令不同，因为它为 AI 提供了顺序和节奏的指令，无需用户干预。它提供了一个更真实的体验，让 AI 自主努力实现目标。

### 先决条件

在开始之前，请确保您已满足以下先决条件：

- 确保您在 SillyTavern 的最新 `staging` 分支上。
- 从扩展面板中的“下载扩展和资产”菜单（堆叠块图标）安装“Objective”扩展。

### 常见用例

你的想象力是唯一的限制，你可以给AI任何目标，它会规划如何实现它。你可以让它计划如何杀死一个恶魔，抢劫一个寺庙，举办一场奢华的派对，甚至征服世界。

![目标设置面板](/static/extensions/objective-panel.png)

### 配置

- 扩展功能可以在目标菜单下找到。

- 在顶部文本框中输入一个目标，然后点击 `自动生成任务`。这会向连接的 API 发送请求，请求提供与您输入的目标匹配的任务列表。

*注意：点击自动生成任务将删除当前选定目标的所有现有任务，然后再添加新任务。*

- 在收到 AI 的响应后，任务列表将自动在目标输入框下方创建。任务创建后可以进行编辑。

- 面板底部有两个框：`聊天中的位置` 和 `任务检查频率`
  - `聊天中的位置` - 这是您希望当前任务在提示的聊天部分中插入的“深度”。数字越低，AI 对任务的关注度越高。设置为 0 将使任务成为 AI 思维中的主要内容。设置高值将使任务处于后台，允许 AI 专注于当前的对话，但设置得过高可能会导致 AI 完全“忽略”该任务。
  - `任务检查频率` - 这是您希望 AI 多长时间检查一次任务是否已完成。如果设置为 `3`，则 AI 将在每第三条消息中询问当前任务是否已完成。

- 目标、任务及其描述会实时保存到当前聊天会话中。自定义提示会全局保存。

### 自定义提示
您可以自定义发送给LLM的提示，以生成任务、检查任务完成情况以及进行提示注入。编辑提示将为当前会话保存它们。自定义提示可以保存并加载以保持持久性。

- 点击编辑提示以打开提示编辑窗口。您可以根据需要编辑您的提示。
- 要保存提示，请输入名称并点击保存提示。
- 要加载提示，请从下拉列表中选择提示。
- 要删除已保存的提示，请从下拉列表中选择它并点击删除提示。

**警告：任务检查在单独的API请求中进行。将任务检查频率设置为1将使您的API调用次数翻倍。如果您使用的是付费服务，请小心。**

### 使用方法

默认情况下，Objective 扩展会自动跟踪所有任务及其各自的完成状态。

用户也可以在任何时候手动创建、更新、删除和完成任务。


#### 当前任务选择

当前任务将始终是第一个未完成的任务。对任务的任何手动更新将触发对当前任务应为哪个的检查。因此，如果您在一堆已完成任务上方添加任务，它将被设置为当前任务。一旦它完成，之前已完成的任务将被跳过，下一个未完成的任务将被选为“当前”。

在任务树中使用父/子任务时，任务将按深度优先选择，这意味着所有子任务将首先按顺序选择，然后继续遍历当前 Objective/Task 的任务列表。

#### 分支任务

单击分支任务按钮将当前任务设置为一个 Objective，您可以在其中自动生成或手动创建子任务。您可以继续将任何子任务转换为 Objective，并不断生成，尽情享受。

将父任务标记为完成将导致扩展跳过所有子任务。当所有子任务完成时，父任务将被标记为完成。

#### 手动完成任务

您可以通过 `点击复选框` 手动切换任务的完成状态。这将使下一个未完成的任务被选中。

#### 手动任务检查

如果您想手动触发 AI 检查任务完成情况，请单击附加扩展按钮（聊天输入栏右侧的 `魔法棒`）并选择 `手动任务检查`。

![手动任务检查](/static/extensions/task-check.png)

#### 手动添加任务

当没有任务时，将显示一个 `添加任务` 按钮，允许您手动创建第一个任务。

如果其他任务已经存在，请单击任何任务右侧的 `+` 按钮，在其后插入新任务。

#### 删除任务

单击红色的 `x` 删除现有任务。下一个未完成的任务将自动被选为当前任务。

删除带有子任务的任务将删除所有子任务及其后代。

#### 隐藏任务

如果您希望对 AI 正在尝试完成的任务保持不知情，请勾选 `隐藏任务` 复选框，以隐藏任务列表并使 AI 的意图成为谜。如果想要 100% 的神秘感，请在点击 `自动生成任务` 之前执行此操作！