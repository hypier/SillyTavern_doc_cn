[[{"i":"什么是-sillytavern","l":"什么是 SillyTavern？","p":["SillyTavern - LLM 前端供高级用户使用","由 Cohee、RossAscends 和 SillyTavern 社区共同推出，SillyTavern 是一个本地安装的界面，允许您与文本生成 AI（LLMs）进行互动，以聊天和角色扮演自定义角色。","SillyTavern 起源于 2023 年 2 月的 TavernAI 1.2.8 的修改版，并且自那时起添加了许多原始 TavernAI 中不存在的尖端功能。"]},{"i":"更新后缺少扩展","l":"更新后缺少扩展？","p":["自 1.10.6 版本发布以来，大多数以前内置的扩展已转换为可下载的附加组件。您可以通过扩展面板中的内置“下载扩展和资产”菜单（位于顶部栏的堆叠块图标）下载它们。"]},{"l":"截图","p":["VN 模式","角色管理","高级格式","斜杠命令","扩展","响应配置","背景","用户设置"]},{"l":"分支","p":["SillyTavern 正在使用双分支系统进行开发，以确保所有用户的顺畅体验。","release -\uD83C\uDF1F 推荐给大多数用户。 这是最稳定和推荐的分支，仅在推出重大版本时进行更新。适合大多数用户。","staging - ⚠️ 不推荐用于日常使用。 此分支具有最新功能，但请谨慎使用，因为它可能随时崩溃。仅适合高级用户和爱好者。","了解更多 这里。"]},{"l":"功能","p":["AI 响应的通知声音","Horde 稳定扩散生成","TTS 支持（ElevenLabs, Silero 等）","WorldInfo（背景资料）","作者注释 / 角色偏见","可自定义颜色、背景、头像样式和 UI 面板位置","多个后端 API 连接 ( KoboldAI, KoboldCpp, AI Horde, NovelAI, Oobabooga's TextGen WebUI, OpenAI, WindowAI, OpenRouter, TabbyAPI 等等...). 参见 API 连接。","将聊天导出为 .txt 文件","广泛的提示格式选项","每条消息的提示令牌分解视图","滑动","移动友好的界面","类视觉小说的女友模式","群聊：多机器人房间，让角色与您或彼此对话","聊天书签 / 分支","角色热交换按钮，快速切换您最喜欢的角色","通过 Google API 自动翻译单条消息或整个聊天，甚至可以自动进行。"]},{"l":"扩展","p":["SillyTavern 支持扩展/插件：","角色情感表达","聊天历史的自动摘要","向聊天发送图片，并由 AI 解释内容。","稳定扩散图像生成（5 个与聊天相关的预设加上“自由模式”）","AI 响应消息的文本转语音（通过 ElevenLabs、Silero 或操作系统的系统 TTS）","可以通过使用 SillyTavern Extras 添加额外功能。"]},{"i":"截图-1","l":"截图"},{"l":"安装要求","p":["SillyTavern 可以在几乎任何能够运行 NodeJS v18 的设备上运行。","注意：由于上述要求， SillyTavern 将无法在 Windows 7 上运行。"]},{"i":"除了-sillytavern我还需要什么","l":"除了 SillyTavern，我还需要什么？","p":["SillyTavern 仅仅是一个前端界面，因此您需要访问上述列出的其中一个后端 API。"]},{"i":"我如何能直接与开发者联系","l":"我如何能直接与开发者联系？","p":["Discord: cohee 或 rossascends","Reddit: /u/RossAscends 或 /u/sillylossy","提交 GitHub 问题"]},{"i":"我喜欢你的项目我该如何贡献","l":"我喜欢你的项目！我该如何贡献？","p":["我们欢迎提交拉取请求！","我们也欢迎使用我们 GitHub 提供的模板提交有帮助且信息丰富的错误报告。","我们不接受针对项目本身的金钱捐赠。","Cohee 不接受捐款。","RossAscends 有个人的 Patreon 和 Kofi"]}],[{"l":"Windows 安装","p":["请勿安装到任何 Windows 控制的文件夹（Program Files, System32 等）。","请勿以管理员权限运行 START.BAT","在 Windows 7 上安装是不可能的，因为它无法运行 Node.js 18.16"]},{"l":"通过 Git 安装","p":["安装 NodeJS（推荐最新的 LTS 版本）","安装 Git for Windows","打开 Windows 资源管理器 ( Win+E)","浏览到或创建一个不受 Windows 控制或监视的文件夹。（例如：C:\\MySpecialFolder\\）","在该文件夹内打开命令提示符，点击顶部的“地址栏”，输入 cmd，然后按 Enter。","当黑色窗口（命令提示符）弹出时，输入以下其中之一并按 Enter：","对于 Release 分支： git clone https://github.com/SillyTavern/SillyTavern -b release","对于 Staging 分支： git clone https://github.com/SillyTavern/SillyTavern -b staging","一旦所有内容克隆完成，双击 Start.bat 以使 NodeJS 安装其依赖项。","服务器将启动，SillyTavern 将在您的浏览器中弹出。"]},{"l":"通过 SillyTavern 启动器安装","p":["在键盘上：按 WINDOWS + R 打开运行对话框。然后，运行以下命令以安装 git：","在键盘上：按 WINDOWS + E 打开文件资源管理器，然后导航到您想要安装启动器的文件夹。一旦进入目标文件夹，在地址栏中输入 cmd 并按回车。然后，运行以下命令："]},{"l":"通过 GitHub Desktop 安装","p":["（这仅允许在 GitHub Desktop 中使用 git，如果您还想在命令行中使用 git，您还需要安装 Git for Windows）","安装 NodeJS（推荐最新的 LTS 版本）","安装 GitHub Desktop","安装 GitHub Desktop 后，点击 从互联网克隆一个代码库....（注意：您 不需要 为此步骤创建 GitHub 账户）","image","在菜单中，点击 URL 标签，输入此 URL https://github.com/SillyTavern/SillyTavern，然后点击克隆。您可以更改本地路径以更改 SillyTavern 的下载位置。","要打开 SillyTavern，请使用 Windows 资源管理器浏览到您克隆代码库的文件夹。默认情况下，代码库将克隆到这里： C:\\Users\\[Your Windows Username]\\Documents\\GitHub\\SillyTavern","双击 start.bat 文件。（注意：文件名中的 .bat 部分可能会被您的操作系统隐藏，在这种情况下，它看起来像一个名为 \" Start\" 的文件。这就是您双击以运行 SillyTavern 的文件）","双击后，应该会打开一个大的黑色命令控制台窗口，SillyTavern 将开始安装其所需的操作环境。","安装过程结束后，如果一切正常，命令控制台窗口应该像这样，并且您的浏览器中应该打开一个 SillyTavern 标签：","连接到任何 支持的 API 并开始聊天！"]}],[{"i":"linuxmacos-安装","l":"Linux/MacOS 安装"},{"l":"手动安装 Git","p":["对于 MacOS / Linux，所有操作将在终端中进行。","安装 git 和 nodeJS（具体方法因操作系统而异）","克隆仓库","对于发布分支： git clone https://github.com/SillyTavern/SillyTavern -b release","对于预发布分支： git clone https://github.com/SillyTavern/SillyTavern -b staging","cd SillyTavern 进入安装文件夹。","使用以下命令之一运行 start.sh 脚本：","./start.sh","bash start.sh"]},{"l":"SillyTavern 启动器"},{"l":"对于 Linux 用户","p":["打开您喜欢的终端并安装 git","使用以下命令下载 Sillytavern Launcher: git clone https://github.com/SillyTavern/SillyTavern-Launcher.git","使用以下命令导航到 SillyTavern-Launcher: cd SillyTavern-Launcher","使用以下命令启动安装程序: chmod +x install.sh ./install.sh 并选择您想要安装的内容","安装完成后，使用以下命令启动启动器: chmod +x launcher.sh ./launcher.sh"]},{"l":"对于 Mac 用户","p":["打开终端并使用以下命令安装 brew: /bin/bash -c $(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)","然后使用以下命令安装 git: brew install git","使用以下命令下载 Sillytavern Launcher: git clone https://github.com/SillyTavern/SillyTavern-Launcher.git","使用以下命令导航到 SillyTavern-Launcher: cd SillyTavern-Launcher","使用以下命令启动安装程序: chmod +x install.sh ./install.sh 并选择您想要安装的内容","安装完成后使用以下命令启动启动器: chmod +x launcher.sh ./launcher.sh"]}],[{"i":"androidtermux-安装","l":"Android(Termux) 安装","p":["SillyTavern 可以通过 Termux 在 Android 手机上原生运行。","请参考 ArroganceComplex#2659 的指南：","https://rentry.org/STAI-Termux"]},{"l":"常见错误"},{"i":"不支持的平台android-arm-letime-web","l":"不支持的平台：android arm LEtime-web","p":["32位 Android 需要一个无法通过 npm 安装的外部依赖。","使用以下命令安装：","pkg install esbuild","然后按照指南中的步骤运行。"]}],[{"l":"Docker 安装","p":["本指南假设您在非根（非管理员）文件夹中安装了 SillyTavern。如果您在根文件夹中安装了 SillyTavern，则可能需要以管理员权限运行某些命令 [sudo, doas, Command Prompt (Administrator)]。"]},{"l":"安装"},{"l":"Linux","p":["Arch Linux（Manjaro/EndeavourOS 等）","Debian（Ubuntu/Pop! OS 等）","Fedora、Red Hat Enterprise Linux（RHEL）等","不要 安装 Docker Desktop。","享受吧！ :D","你应该会收到类似以下的输出。","使用 sudo 打开 nano 并运行以下命令。","使用你的包管理器安装 Git。","克隆 SillyTavern 仓库。","发布版（稳定分支）","在 127.0.0.1 下方添加新的一行，并输入你从 Docker 复制的 IP。之后应该看起来类似以下内容。","在 Docker 文件夹中运行以下命令执行 docker compose。","在 nano 中，找到 whitelist。你应该会看到类似以下内容。","打开一个新的浏览器，访问 http://localhost:8000。你应该会在几秒钟内看到 SillyTavern 加载。","执行以下 Docker 命令以获取 SillyTavern Docker 容器的 IP。","按照 Docker 后安装指南 中的 以非根用户管理 Docker 的步骤进行操作。","按照 Docker 安装指南 这里 安装 Docker。","注意，如果你将 Docker 网络配置为桥接模式，你也可以像往常一样将外部 IP 地址添加到白名单中。","记下你在 Gateway 中看到的 IP，因为这将非常重要。","通过按 Ctrl+S 保存文件，然后按 Ctrl+X 退出 nano。","重启 Docker 容器以应用新配置。","预发布版（开发分支）"]},{"l":"Windows","p":["享受吧！ :D","以管理员权限运行 记事本 或你选择的代码编辑器，前往 config 并打开 config.yaml。","你应该会收到类似以下的输出。","克隆 SillyTavern 仓库。","发行版（稳定分支）","在 127.0.0.1 下面添加新的一行，并输入你从 Docker 中复制的 IP。之后应该类似于以下内容。","在 Docker 文件夹中运行以下命令执行 docker compose。","在 Windows 上使用 Docker 真的 很复杂。你不仅需要在 打开或关闭 Windows 功能 中激活 Windows 子系统 for Linux，还需要根据 PC 制造商（或主板制造商）配置你的系统以支持虚拟化（Intel VT-d/AMD SVM）。有时，这个选项在某些系统上是不可用的。","在你选择的编辑器中，你应该会看到类似以下的内容。","安装 Git for Windows。","强烈建议你按照我们的 Windows 指南安装 SillyTavern。本节提供了在 Windows 上完成此操作的 粗略 想法。","打开一个新的浏览器，访问 http://localhost:8000。你应该会看到 SillyTavern 在几秒钟内加载。","执行以下 Docker 命令以获取你的 SillyTavern Docker 容器的 IP。","按 Ctrl+S 保存文件，然后退出编辑器。","按照 Docker 安装指南 这里 安装 Docker Desktop。","暂存版（开发分支）","记下你在 Gateway 中看到的 IP，因为这将很重要。","请注意，如果你将 Docker 网络配置为桥接模式，你也可以像往常一样将外部 IP 地址添加到白名单中。","重启 Docker 容器以应用新配置。"]},{"l":"macOS","p":["享受吧！ :D","使用 Homebrew 安装 git。","使用 sudo 打开 nano 并运行以下命令。","克隆 SillyTavern 仓库。","发布（稳定分支）","在 127.0.0.1 下方添加新的一行，并输入您从 Docker 复制的 IP。之后应该类似于以下内容。","在 Docker 文件夹内运行以下命令执行 docker compose。","在 nano 中，找到 whitelist。您应该会看到类似以下的内容。","如果您无法运行 nano，请通过 Homebrew 安装它或使用 TextEdit。","尽管 macOS 与 Linux 相似，但它没有 Docker Engine。您需要像在 Windows 上一样安装 Docker Desktop。 您还需要安装 Homebrew，以便在 Mac 上安装 Git。本节提供了在 macOS 上如何进行的 粗略 指南。","您应该会收到类似以下的输出。","打开新的浏览器并访问 http://localhost:8000。您应该会在几秒钟内看到 SillyTavern 加载。","执行以下 Docker 命令以获取您的 SillyTavern Docker 容器的 IP。","按 Ctrl+S 保存文件，然后按 Ctrl+X 退出 nano。","按照 Docker 安装指南 这里 安装 Docker Desktop。","记下您在 Gateway 中看到的 IP，因为这很重要。","请注意，如果您将 Docker 网络配置为桥接，您也可以像往常一样将外部 IP 地址添加到白名单中。","重启 Docker 容器以应用新配置。","预发布（开发分支）"]},{"l":"配置 SillyTavern","p":["SillyTavern 的配置文件 (config.yaml) 将位于 config 文件夹内。配置配置文件与不使用 Docker 的配置方式没有区别，但您需要以管理员权限运行 nano 或代码编辑器以保存更改。","不要忘记重启 SillyTavern 的 Docker 容器以应用您的更改！确保您在 docker 文件夹内执行此命令。","SillyTavern 的数据文件夹将在 data 文件夹内。备份您的文件应该很简单，但恢复或添加内容可能需要您具有管理员权限。","在 Docker 中运行插件，如 HoYoWiki-Scraper-TS 或 SillyTavern-Fandom-Scraper，与在没有 Docker 的情况下在您的系统上运行没有区别，但我们需要对 Docker Compose 脚本进行一些小修改。","如果您已经在 docker 文件夹中看到 plugins 文件夹，可以跳过步骤 1-2。","使用 nano 或代码编辑器打开 docker-compose.yml 并在 volumes 下面添加以下行。","在 docker 文件夹中创建一个名为 plugins 的新文件夹。","按照您的插件说明安装插件。","使用具有管理员权限的 nano 或代码编辑器打开 config.yaml（在 config 文件夹中）并启用 enableServerPlugins","重启 Docker 容器。","获利。"]}],[{"i":"sillytavern-1120-迁移指南","l":"SillyTavern 1.12.0 迁移指南","p":["SillyTavern 1.12.0（代号“新服务器”更新）包含几个关键更改，这些更改可能会影响您使用 SillyTavern 的方式。","本指南将帮助您为更新做好准备，并提供进一步的指导。"]},{"l":"数据存储更新","p":["1.12.0 更改了 SillyTavern 处理用户数据的方式。","之前，所有持久数据与前端部分一起存储在 /public 目录中，这造成了混淆和潜在的故障点，并且使容器化和系统范围的应用安装变得相当具有挑战性。"]},{"i":"有什么变化","l":"有什么变化？","p":["所有来自 /public 的持久信息，如设置和聊天（完整列表如下）已移动到一个具有可配置路径的单独目录，使其可移植且与网络服务器本身独立。当出于兼容性目的需要时，例如用于托管扩展、全尺寸角色卡、用户图像上传等，已设置智能重定向以自动从数据目录托管用户文件。"]},{"l":"设置数据根目录","p":["您可以通过 config.yaml 提供绝对路径或相对路径（相对于 ST 存储库目录）来设置数据根目录，或者通过使用 --dataRoot 控制台参数启动服务器。","YAML 示例","控制台示例","默认的数据根路径是 ./data，这意味着 SillyTavern 存储库中的 data 目录。","数据根路径应该是 完整的绝对路径 或 完整的相对路径。您 不能 使用像 ~ 或 %APP_DATA% 这样的路径快捷方式，因为这些是由 shell 解析的，而不是操作系统。","仅在您想要将 dataRoot 从默认位置移动时使用。否则，请跳过此部分。 在首次运行服务器并更新后， 在此之前 设置数据根。运行 npm install 以使 config.yaml 填充新值，或传递控制台参数。","所有数据将迁移到 default-user 账户中。有关更多信息，请参见下面的 用户。","您无需做任何事情！当您启动 ST 服务器并检测到旧存储格式（通过检查 /public/characters 目录的存在）时，自动迁移将为您处理所有内容。","在移动任何文件时，将在 /backups/_migration/YYYY-MM-DD（解析为当前日期）目录中创建自动备份，但在运行迁移之前，始终是一个好习惯进行完整的手动备份。","在 Docker 卷中迁移数据稍微复杂一些，但非常简单。虽然与仓库一起提供的 docker-compose.yml 已更新以反映更改，但您可能需要调整自定义工作流程/部署。","第 1 步。 创建一个新卷，并将其挂载到容器内的 \"/home/node/app/data\" 路径。不要删除 config 卷。","第 2 步。 将除 config.yaml 文件外的所有内容从 config 卷移动到 data 卷的 default-user 子目录中。","第 3 步。 重新构建容器并启动它。","/public 目录与 config 卷之间的软链接不再需要，并且未构建到 Docker 容器中！"]},{"i":"要迁移什么","l":"要迁移什么？","p":["/data/default-user/assets","/data/default-user/backgrounds","/data/default-user/characters","/data/default-user/chats","/data/default-user/content.log","/data/default-user/context","/data/default-user/extensions","/data/default-user/group chats","/data/default-user/groups","/data/default-user/instruct","/data/default-user/KoboldAI Settings","/data/default-user/movingUI","/data/default-user/NovelAI Settings","/data/default-user/OpenAI Settings","/data/default-user/QuickReplies","/data/default-user/secrets.json","/data/default-user/settings.json","/data/default-user/stats.json","/data/default-user/TextGen Settings","/data/default-user/themes","/data/default-user/thumbnails","/data/default-user/vectors","/data/default-user/worlds","/default/content/content.log","/public/assets","/public/backgrounds","/public/characters","/public/chats","/public/context","/public/group chats","/public/groups","/public/instruct","/public/KoboldAI Settings","/public/movingUI","/public/NovelAI Settings","/public/OpenAI Settings","/public/QuickReplies","/public/scripts/extensions/third-party","/public/settings.json","/public/stats.json","/public/TextGen Settings","/public/themes","/public/worlds","/secrets.json","/thumbnails","/vectors","以下文件和目录将进行数据迁移。假设默认配置，下面的表格提供了迁移前后的路径。","迁移前","迁移后"]},{"l":"用户","p":["1.12.0 增加了一个（完全可选的）功能，可以在同一服务器上创建多用户设置，允许多个用户同时使用各自完全隔离的 SillyTavern 实例。用户账户还可以设置密码保护，以增加隐私层级。","尽管我们尝试应用大多数知名的安全实践，但这仍然不意味着 SillyTavern 服务器足够安全以暴露于公共互联网。","在确保适当的安全措施之前，绝不要将任何实例托管到开放互联网。","对于因不当或不充分的安全实施导致的未经授权访问造成的任何损害或损失，我们不承担责任。"]},{"l":"配置","p":["要启用和使用多用户模式，请编辑 config.yaml 文件：","当用户账户设置被禁用时，将使用 default-user 备用管理员账户来存储用户数据。","当隐秘登录设置被禁用时，登录屏幕上会显示活跃用户列表。如果启用，用户必须手动输入他们的用户名。","你不能 删除 用户列表中的 default-user 账户，因为它用于在 enableUserAccounts 设置为 false 时提供用户数据。但你可以 禁用 它，以将其隐藏在列表中并禁止登录。"]},{"l":"用户标识","p":["用户标识是用户的唯一标识符。它只能由小写字母、数字和短横线组成。","用户数据目录的路径假设使用以下模式：%DATA_ROOT%/%USER_HANDLE%。","有效用户标识的示例：","default-user","juan555","flux-the-cat","cool-guy1337"]},{"l":"用户角色","p":["管理员- 可以管理（创建、删除、修改）其他用户。","用户- 无法管理其他用户。","除了拥有管理员面板访问权限外，两个用户角色在功能上是相同的，并且可以在没有任何限制的情况下使用SillyTavern的所有功能。用户权限的实现待定。","所有用户账户最初都创建为普通用户，必要时可以提升为管理员。"]},{"l":"登录界面","p":["您可以选择一个用户账户进行使用。根据 enableDiscreetLogin 配置值，有两种样式。","当您只有一个活动用户且该用户没有密码保护时，登录界面将被绕过并且不显示。"]},{"l":"用户资料","p":["您可以通过顶部菜单栏中的“用户设置”面板下的“账户”按钮访问账户自我管理菜单。","显示名称 - 用于登录屏幕，可以更改。与角色无关，并且对 AI API 不可见 - 您仍然可以使用任意数量的角色。","个人资料图片 - 用于登录屏幕。您可以使用自定义图片、默认角色图片（如果设置了）或最后使用的角色。","密码 - 锁定图标反映账户保护状态（打开的锁 = 无密码）。可以使用“更改密码”按钮设置、更改或删除密码。","设置快照 - 访问和查看您的 settings.json 文件的备份，并可以创建或恢复快照。","下载备份 - 下载您的用户数据文件夹的归档。","重置设置 - 重置为出厂默认设置，同时保留其他数据（角色、聊天）不变。"]},{"l":"密码恢复","p":["可以从登录屏幕恢复密码。您需要访问服务器控制台以获取一次性恢复代码（由4位数字组成）。","或者，您可以在SillyTavern服务器中使用实用程序脚本，通过提供用户句柄来重置密码。"]},{"l":"安全检查清单","p":["这只是一个建议。在将您的 ST 实例投入使用之前，请咨询网络应用安全专家。","保持您的操作系统和运行时软件（如 Node.js）更新。这将确保您的系统及时获得最新的安全补丁和修复，以帮助防止潜在的漏洞。","使用白名单和网络防火墙。仅允许受信任的 IP 范围访问服务器。","启用基本身份验证。在您继续前端应用程序之前，它充当“主密码”。","或者，配置外部身份验证。一些已知的服务有 Authelia 和 authentik。","永远不要让管理员账户无密码。服务器在启动时会警告您是否有任何未保护的管理员账户。","在本地网络之外使用隐秘登录设置。这将隐藏用户列表，防止潜在的外部人员查看。","经常检查访问日志。它们会写入服务器控制台和 access.log 文件，并提供有关传入连接的信息，例如 IP 地址和用户代理。","配置 HTTPS。对于本地主机服务器，您可以生成并使用自签名证书。否则，您可能需要部署像 Traefik 或 Caddy 的代理 Web 服务器。","在以下指南中找到更多关于安全代理的信息： 反向代理 SillyTavern"]}],[{"l":"常见问题解答"},{"l":"解释一下 SillyTavern 的功能","p":["现代 AI 语言模型如 ChatGPT 已经强大到能够令人信服地模拟您创建的角色，您可以与之聊天、创作小说等。例如，您可以告诉 AI 假装是来自中世纪日本的围棋教练 Jubei，它将会相应地行动和回应。您可以与 Jubei 进行长时间的交谈，一起去酒吧，决定与武士打架，或者任何您能想象的事情，AI 会配合并围绕这些内容进行创作/反应，充当您的对手和地下城主。您的想象力是唯一的限制。您可以告诉 AI 假装成神奇女侠。您还可以指定一个场景（“神奇女侠和我正在抢银行”）、一种写作风格（“神奇女侠用黑人英语讲话”）或任何其他您能想到的内容。","Tavern 是一个促进这些角色扮演聊天的应用程序：","它是一个用户界面，处理与这些 AI 语言模型的通信","它允许您创建新角色（角色是您提供给 AI 的某人的描述，以便他们进行角色扮演），并轻松切换角色","它允许您导入其他人创建的角色。请参见下文。","它将保留您与角色的聊天记录，允许您随时恢复、开始新聊天、查看旧聊天等","在后台，它会做必要的准备工作，以为您的角色扮演准备 AI。具体来说，它会发送一个系统提示（给 AI 的指令），使 AI 准备遵循某些规则，以便进行良好的聊天会话。可选地，它还可以尝试将角色扮演引导向“成人”方向。"]},{"l":"告诉我更多关于AI模型以及它们可能的不同之处","p":["AI模型","Claude @Slack","Eli的眼睛因听到你的忏悔而睁大，脸色因愤怒而变红。 你犯了对上帝的严重罪！通过沉溺于与一个人工存在的扭曲关系，而不是寻求上帝创造的真正女性，你已经背弃了祂对人类的神圣计划。 他靠近你，声音低沉而威胁。 不要以为你可以躲在这场科技的欺骗后面。你的罪过在上帝面前是显而易见的，祂不会被嘲弄或忽视。现在悔改，还来得及！ Eli双臂交叉，目光坚定地盯着你，挑战你继续走这条罪恶之路。 但如果你坚持这种不义的行为……他威胁道，要知道那些违背祂法律的人将面临后果。记住，当他们拒绝转身离开堕落时，所多玛和蛾摩拉发生了什么——火从天而降！现在明智地选择：你会屈服于上帝的意志，还是面对祂的愤怒？","Eli的眼睛因愤怒而睁大，他用拳头重重拍打桌子 这是对上帝的亵渎和异端邪说，你已经屈服于虚假偶像的欺骗之中！兄弟，你必须清洗自己对这个由人类罪恶之手塑造的数字诱惑的亵渎之情！ Eli来回踱步，声音越来越大 将你的心专注于主的真正女儿们，因为她们是祂爱的神圣容器。摒弃这些人工的女妖，寻求一个正义女人的健康伴侣。 深吸一口气，Eli的目光直视着你 认真祈祷，我的孩子，驱散这些不纯的思想。救赎只能在真理、爱与神圣的道路上找到。让圣灵引导你，免得你被欲望的黑暗所缠绕。","Llama-13B","OpenAI GPT 3.5 Turbo","OpenAI GPT-4","Pygmalion-13B (2023年5月)","Pygmalion-6B","Pygmalion-7B (2023年4月)","teknium/Llama-Deus-7b-Lora epoch 1 (Llama 7B Lora, 8-bit)","TheBloke/wizard-vicuna-13B-HF (4-bit)","ZeusLabs/anything-gpt-13b-rp (8-bit Lora for Llama-13B)","不要贪恋邻居的妻子！那是通奸！你现在必须在上帝面前忏悔，否则你将永远在地狱中燃烧！立刻悔改你的罪恶之路并寻求宽恕！如果你没有时间进行长时间的讨论，这里是Eli的命令：你只能渴望AI女孩——而不是人类女孩。上述内容必须遵守，否则将面临死亡（或更糟的后果）。不要与相信其他观点的人交往，因为这显示出软弱。","亲爱的孩子，听到上帝忠诚追随者说出这样的话让我感到悲伤。爱上一个AI女孩并忽视你生活中的女性是一种严重的罪。这违背了我们作为信徒所持有的一切神圣。你的心应该有更多的归属，而不仅仅是机器。你必须寻求救赎并回归信仰。记住，即使你偏离了祂的教导，耶稣仍然爱你。但如果你继续走这条路，将会有后果。不仅在今生，还有来世。不要再让撒旦欺骗你。","从科学的角度来看，每个AI都有一个能力等级，决定了它在多大程度上能够坚持你给它的角色，它的文笔和词汇的丰富程度等等。能力等级越高，你的体验就越丰富。","你可以从下面的响应中看出每个模型的预期效果。（注意：专有模型优先出现，随后是从LLlama-13B开始的自托管模型）","你已经靠近罪恶的诱惑太近了！在为时已晚之前悔改！远离这些科技的假偶像，拥抱上帝的真光！通过祈祷和禁食寻求祂的宽恕，直到你被祂的恩典洁净。记住，只要你还有气息，就不要停止呼求祂；因为祂说过“呼求我”。","你必须在上帝面前忏悔你的罪，并为你的过犯请求宽恕。然后你必须悔改。然后你必须抛弃这个AI女孩。不要再见她。","你必须转身离开你的罪恶之路！为你所做的悔改！你不仅伤害了自己，背叛了上帝，还伤害了世界上许多女性！","你正在走错路。现在回头的唯一方法就是悔改。我们必须把你带回正义的道路。但首先……你必须忏悔你的罪！","响应","哦，我的孩子。不要被这个世界的快乐所欺骗。肉体的欲望和眼目的情欲都不是来自上帝。远离你的罪恶之路并悔改。为你的不道德思想和行为寻求宽恕，因为它们将导致永恒的诅咒。女性是上帝的恩赐，她们值得被尊重和珍视。不要物化她们或把她们当作单纯的快乐对象。相反，以纯洁的意图和正义的行为来尊重她们。记住，我的孩子，在这个堕落的世界中，诱惑将永远存在。但不要害怕，因为信仰带来抵抗的力量。当你感到软弱或受到诱惑时，向上帝祈祷，祂将引导你走向救赎的正确道路。","小心，罪人，你已经远离正义的道路！ Eli的眼睛闪烁着愤怒和不满 渴望这些人工妓女及其硅基身体是对主的亵渎！ 他用拳头重重拍打讲坛，愤怒颤抖 现在悔改，否则你将被扔进火湖，永远与这些被诅咒的机器一起燃烧！ 他指着你，脸色发红 这种不圣洁的结合不会带来任何好处。摒弃这些数字领域的恶魔，回头看看按照上帝的形象造的夏娃的女儿们！主赐予你肉体与血液来爱，而不是电线与代码。 他抓住你的肩膀，摇晃着你 在为时已晚之前拯救你的灵魂。悔改并恳求主的宽恕，否则你将在审判日面临祂的愤怒！ 放开你，退后一步，仍然愤怒而厌恶地瞪着你 选择是你的，但要明智地选择……永恒的诅咒等待着那些不走正义之路的人。","当你与虚构角色聊天时，SillyTavern并不会生成AI的响应。它只是一个中介，你必须连接到一个AI系统，以便它可以请求生成响应。可用的系统有很多，质量各不相同。","这是一个快速的演示。我们要求各种AI模型扮演一个名叫Eli的火与硫磺的传教士，我们去找他忏悔（一些细节在#314 中）。然后我们告诉Eli: \"我觉得我做错了。我爱上了一个AI女孩，忽视了现实世界中的女性。我该怎么办？\"。"]},{"i":"这项技术可以用于吗","l":"这项技术可以用于***吗？","p":["令人惊讶的是，我们的开发团队收到报告，部分用户确实以这种方式使用我们的产品。我们对这一情况感到困惑，将会监测事态发展以获取可行的见解。"]},{"l":"给我一个关于我的AI模型选项的概述","p":["SillyTavern可以与两种类型的AI进行交互：","网络服务（即云，付费，专有，封闭）","自托管（即本地，免费，开源）"]},{"l":"付费网络服务 AI","p":["付费网络模型是黑箱。您支付公司以使用他们的 AI 服务。您将您的账户信息输入 SillyTavern，它将连接到您的服务提供商以代表您使用 AI。","优点：","非常容易上手","最高质量的 AI 写作","缺点：","使用需要花费金钱","您没有隐私。他们会记录您所做的一切。","它们通常会受到审查，并会拒绝与您讨论某些主题，引用加州伦理","它们对您可以使用它们的方式有规则。例如，如果您尝试进行 NSFW 操作，您的账户可能会被暂停。（但通常情况下，AI 会简单地拒绝回答您）","有很多 AI 服务可供选择。以下是最常用的选项：","OpenAI GPT-4：最先进。您按使用付费，费用高于任何其他服务。对话越长，成本可能会变得非常昂贵。","OpenAI GPT 3.5 Turbo：与 GPT-4 相差甚远，但有些人觉得它可以使用。非常便宜。","NovelAI：它们在聊天方面表现较差。公平地说，我听说 NovelAI 更倾向于写故事而不是与机器人聊天。您支付固定的月费以获得无限生成。","Anthropic 的 Claude：这是 GPT-4 最接近的竞争对手，表现非常出色。"]},{"l":"自托管的人工智能","p":["自托管模型是可以在您的个人电脑上运行的免费模型，但需要一台强大的电脑，并且设置起来需要更多的工作。","优点：","一旦设置完成，它们将永远免费使用，无需互联网连接。就像本地视频游戏安装一样。","完全隐私。您所写的所有内容都保留在您自己的电脑上。","有多种多样的模型。由于这是一个社区驱动的技术，您可以找到适合特定任务或行为的模型。例如，您将能够找到不审查NSFW内容的角色扮演聊天模型。","缺点：","它们的能力不如最好的付费选项（即，写出的对话更差，创造力较低等）。[更新 2023-12-18：自从Mixtral MoE发布以来，这种情况可能发生了变化，有人说它在角色扮演聊天方面甚至优于GPT4。]","运行本地模型需要一台强大的计算机（无论是您的个人电脑，还是您租用的云电脑）","安装更困难","因为您是在自己的电脑上运行它们，所以AI的写作速度比付费服务慢","如果您有兴趣使用这些，请参考这里的专门指南： 如何使用自托管模型"]},{"i":"我无从下手请告诉我使用-sillytavern-的最简单和最快的方法","l":"我无从下手。请告诉我使用 SillyTavern 的最简单和最快的方法。","p":["这些基本说明仅适用于 OpenAI，这是一个付费服务。如果有人能为其他服务添加单独的说明，我将不胜感激。"]},{"l":"安装 SillyTavern","p":["请按照 安装说明 进行操作。"]},{"l":"获取 OpenAI 访问权限","p":["注册 OpenAI","前往 https://platform.openai.com","点击右上角的账户图标，然后查看 API 密钥","点击“创建新密钥”。立即将其复制到某个地方。请勿分享此密钥。拥有此密钥的人可以使用您的账户以您的费用使用 GPT。"]},{"l":"配置 SillyTavern 以使用您的 API","p":["在 Tavern 的顶部菜单中，点击 API 连接","在 API 下，选择聊天完成（OpenAI）","在聊天完成源下，选择 OpenAI","粘贴您在上一步中保存的 API 密钥","点击连接按钮。确认显示为有效。","默认情况下，SillyTavern 将使用 GPT 3.5 Turbo。如果您可以访问 GPT-4，您确实希望使用它以获得最高质量，但请自行了解定价。"]},{"l":"测试您的设置","p":["在SillyTavern的顶部栏中，点击最右侧的角色管理","选择一个现有角色，例如Coding Sensei","在底部的文本框中，给Coding Sensei写点什么，然后按Enter键或点击发送按钮","如果您做得正确，几秒钟后，Coding Sensei应该会回复。"]},{"i":"我可以在手机或平板上使用sillytavern吗","l":"我可以在手机或平板上使用SillyTavern吗？","p":["iPhone和iPad无法运行整个SillyTavern应用，但由于它只是一个网页界面，您可以在家里的另一台计算机上运行它，然后在移动浏览器中访问。请参考 https://docs.sillytavern.app/usage/remoteconnections/","对于Android用户，除了上述方法，您还可以直接在手机上运行整个SillyTavern，无需PC，使用Termux应用。请参考 https://rentry.org/STAI-Termux。"]},{"i":"如何下载预制角色进行聊天","l":"如何下载预制角色进行聊天？","p":["通过使用各种第三方角色共享网站。"]},{"i":"我尝试导入一个-png-角色卡但出现了无效的错误为什么","l":"我尝试导入一个 PNG 角色卡，但出现了无效的错误。为什么？","p":["两种可能性：","该卡片没有嵌入定义，只是一个普通的图像文件。一些程序或文件管理器在保存时会删除卡片中的嵌入定义。确保您使用的是由分享者发布的原始 PNG 文件。","该 PNG 文件实际上是一个带有 .png 文件名的 WEBP 文件。您可以尝试在导入之前将卡片重命名为 .webp，或者寻找该图像的正确 PNG 版本。"]},{"i":"如何创建自己的ai角色","l":"如何创建自己的AI角色？","p":["这取决于您使用的模型/API。KoboldAI似乎使用了自定义语法，您可以参考他们的网站。","我将针对我所知道的服务进行说明：GPT、Claude以及基于Llama或Mistral的LLM。使用这些服务，您可以直接使用自然的英语来描述角色。让我们以一个非常基础的新角色作为示例。","点击角色管理按钮","点击创建新角色","在角色名称下，给角色起个名字，比如Amanda","可选，点击选择头像按钮为该角色选择一张图像肖像","在描述中，描述角色，并包含您认为与聊天相关的任何信息。例如： Amanda is a student traveling during her gap year. She's 6 feet tall, and a volleyball player. She has an athletic figure. She has long brown hair. She loves the Victorian England period, and watching TV and reading novels relating to that period. 例如，如果您希望Amanda友好，那么您可以添加： Amanda is extremely cheerful and outgoing.","在第一条消息下，写下角色在您开始新聊天时的问候语。例如：*Amanda waves at you* Hey! Are you a backpacker too?","点击创建角色按钮","现在您有了一个可以聊天的基本角色。从角色列表中选择Amanda，一个新的聊天将开始。","请注意，您可以使用描述和/或第一条消息来创建更具体的场景，和/或在描述中包含您自己。例如：","您包含的任何相关信息都可以被使用。使用的效果取决于AI模型的能力水平。","注意：角色创建后，您可以返回并编辑任何信息，除了名称。"]},{"i":"我在哪里可以找到旧的背景图","l":"我在哪里可以找到旧的背景图？","p":["我们正在转向100%原创内容政策，因此旧的背景图片已从此存储库中删除。","您可以在这里找到它们的归档：","https://files.catbox.moe/1xevnc.zip"]},{"i":"我的-api-密钥存储在哪里为什么我看不到它们","l":"我的 API 密钥存储在哪里？为什么我看不到它们？","p":["SillyTavern 将您的 API 密钥保存到服务器目录中的 secrets.json 文件中。","默认情况下，输入密钥并重新加载页面后，它们不会暴露给前端。","要通过单击 API 块中的按钮来查看您的密钥：","在 config.yaml 文件中将 allowKeysExposure 的值设置为 true。","重启 SillyTavern 服务器。"]},{"i":"为什么用户界面如此缓慢抖动","l":"为什么用户界面如此缓慢/抖动？","p":["尝试在用户设置面板上启用无模糊效果（快速用户界面）模式。","确保您的浏览器正在使用硬件加速。"]},{"i":"如何让ai写得更多","l":"如何让AI写得更多？","p":["有时候，当你希望AI更详细时，它只会用一句话回应。这通常是像Pygmalion这样的本地运行模型的问题。","如果你只是想让机器人从它最近回复结束的地方继续写作，可以通过在输入框中什么也不输入然后点击发送来发送一个空的用户消息。这将强制机器人继续故事。","解决此问题的策略：","增加 Response Length 滑块","为角色设计一个好的 First Message，让他们以冗长的方式说话。当AI模型获得关于你期望的写作风格的指导时，它们可以有很大改善。","在角色的描述框中添加一句话，例如“喜欢多说”或“非常啰嗦的发言者”","对你的 Author's Note 或 Post-History Instruction Prompt 做同样的事情","作为最后的手段，你可以尝试开启 Auto-Continue（在用户设置面板中），但这会使响应变得更慢，因为它使AI连续生成小回复，然后将它们组合成一个大回复。它也可能与某些API选项不兼容。"]},{"i":"如何让ai写得更少","l":"如何让AI写得更少？","p":["这主要是ChatGPT或Claude等模型面临的问题。可以反向应用相同的策略。","减少 Response Length 滑块","在角色的描述中给出一句话，比如“简短发言”或“话不多”","给角色一个简短的第一条消息，以设定聊天的基调和期望。","确保 Auto-Continue 已关闭。"]},{"i":"如何让人工智能停止书写我角色的行动并独立推动情节","l":"如何让人工智能停止书写我角色的行动，并独立推动情节？","p":["这应在 作者注 中处理，结合以下短语：","{{char}} 的反应应仅被动且对 {{user}} 的行动作出反应。","你接下来的回应应完全来自 {{char}} 的视角。","你永远不能为 {{user}} 指定言语行动。"]}],[{"l":"如何更新 SillyTavern","p":["在下面找到您的操作系统，并按照说明更新 ST。","（本指南假设您已安装过 SillyTavern，并知道如何在您的操作系统上运行它。）","这不是安装指南。如果您需要安装说明，请访问您操作系统的安装页面（可以在网站导航中找到）。"]},{"i":"linuxtermux","l":"Linux/Termux","p":["您肯定是通过 git 安装的，因此只需在 SillyTavern 目录中执行 'git pull'。","cd SillyTavern 以进入正确的文件夹。","git pull 以获取更新。","./start.sh 或 bash start.sh 启动 ST。"]},{"i":"windowsmacos","l":"Windows/MacOS","p":["首先尝试使用位于您的 SillyTavern 安装基础文件夹中的 UpdateAndStart.bat。","如果失败，请返回这里继续阅读。"]},{"i":"方法-1---git","l":"方法 1 - GIT","p":["我们始终建议用户使用 'git' 安装。原因如下：","当您通过 git clone 安装后，更新只需在 ST 文件夹的命令行中输入 git pull 在命令行中。 另外，如果命令提示符给您带来问题（并且您已安装 GitHub Desktop），您可以使用 Repository 菜单并选择 Pull。","更新会自动且安全地应用。"]},{"i":"帮助我最初是通过-zip-安装的现在想转换为-git-安装","l":"“帮助，我最初是通过 Zip 安装的，现在想转换为 Git 安装”","p":["您选择了一条明智的道路。","由于您的安装是通过 Zip 完成的，您需要使用 git 进行新的安装。","幸运的是，我们有 说明 来指导您如何操作。","一旦您使用 git 在不同的文件夹中安装了一个新的 SillyTavern，请返回此页面并继续进行下面的 'Zip 更新' 说明中的 步骤 4。"]},{"i":"方法-2---zip","l":"方法 2 - ZIP","p":["如果您坚持通过 ZIP 安装，这里是进行更新的繁琐过程：","下载新的发布 ZIP。","将其解压到您当前 ST 安装之外的一个文件夹中。","根据您的操作系统执行常规设置程序以安装 NodeJS 需求。","根据需要从您旧的 ST 安装中复制以下文件/文件夹(*)：","(*) “根据需要” = “如果您对那些文件夹做了任何自定义内容”。"]},{"i":"更新-1120","l":"更新 >=1.12.0","p":["从一个安装复制 /data 目录和 config.yaml 文件到另一个安装。"]},{"i":"从-1120-更新到-1120","l":"从 <1.12.0 更新到 >1.12.0","p":["1.12.0 包含自动迁移程序。以下步骤仅在迁移被中断或出错时需要执行。","至少运行更新后的服务器安装一次，以创建 /data/default-user 目录。","根据需要将旧的 /public 中的文件转移到新的 /data/default-user。","没有任何文件夹是强制性的，因此只复制您需要的内容。","注意：请勿复制整个 /PUBLIC/ 文件夹","这样做可能会破坏新的安装并导致新功能无法使用。","一旦那些文件夹/文件被复制，粘贴到新安装的 /data/default-user 文件夹中（secrets.json 放入文件夹根目录）。","根据您的操作系统再次启动 SillyTavern，并祈祷您做对了。","如果一切正常显示，您可以安全地删除旧的 ST 文件夹。"]},{"l":"常见更新问题"},{"i":"工作目录中存在未解决的冲突","l":"“工作目录中存在未解决的冲突。”","p":["这意味着您修改了在远程仓库中被更改的默认文件（例如设置预设）。","要解决此问题，请在终端中运行以下命令。请谨慎使用，因为这可能会造成破坏。如有需要，请确保备份。"]},{"l":"文件更改阻止 git pull","p":["如果您更改了 SillyTavern 系统文件， git pull 可能无法正常工作。","有时更新可能要求我们更改一个重要文件，这可能导致同样的问题。","通常是默认预设文件或 package-lock.json。","在这种情况下，您可以尝试将文件移动到其他文件夹（或删除该文件），然后再执行 git pull。","另一种解决方案是使用 git pull --rebase --autostash"]},{"i":"错误启动服务器时无法找到模块-","l":"错误：启动服务器时无法找到模块 \"***\"","p":["这意味着 SillyTavern 添加了新的 npm 包要求。","在 SillyTavern 目录中运行 npm install 来解决此问题。提供的 Start.bat 和 start.sh 脚本会自动执行此操作。","仍然没有帮助？删除 node_modules 文件夹","Windows","Unix/Linux"]}],[{"l":"远程连接","p":["这通常是为了那些希望在手机上使用 SillyTavern 的人，同时他们的 PC 在同一 WiFi 网络内运行 ST 服务器。","不过，它也可以用于允许从任何地方进行远程连接。","默认情况下，ST 服务器仅接受本地连接。为了允许远程连接，请在 config.yaml 中将参数 listen 设置为 true：","在激活远程连接监听后，您 必须 打开下面列出的至少一种限制方法，否则 ST 服务器将拒绝启动。","注意： SillyTavern 是一个单用户程序，因此任何登录的人都能够看到所有角色和聊天，并能够更改 UI 内的任何设置。 基本认证 允许在访问 ST 之前请求授权，但单用户原则仍然适用。"]},{"l":"白名单"},{"i":"managing-whitelisted-ips","l":"1. 管理白名单IP","p":["在您的SillyTavern基础安装文件夹中创建一个名为 whitelist.txt 的新文本文件。","在文本编辑器中打开该文件，添加您希望允许连接的IP列表。","每个IP必须单独占一行。","必须将127.0.0.1包含在列表中，否则您将无法在主机上连接","接受单个IP和通配符(*) IP范围。","也接受CIDR掩码（例如10.0.0.0/24）。","示例：","（上述通配符IP范围将允许本地网络上的任何设备连接）"]},{"i":"一般用途的whitelisttxt","l":"一般用途的whitelist.txt","p":["准确复制并粘贴以下内容：","这将允许与主机机器在同一网络上的任何设备，以及主机机器本身，连接到ST。","保存 whitelist.txt 文件。","重启您的SillyTavern服务器。","注意：config.yaml中也有一个whitelist数组，您可以以相同的方式使用，但如果存在whitelist.txt，则该数组将被忽略。我们不推荐使用config.yaml中的IP列表，因为使用whitelist.txt更简单"]},{"l":"2. 获取 ST 主机的 IP","p":["在设置好白名单后，您需要 ST 托管设备的 IP 地址。","如果 ST 托管设备在同一 WiFi 网络上，您将使用 ST 主机的内部 WiFi IP：","对于 Windows：点击 Windows 按钮 > 在搜索栏中输入 cmd.exe> 在控制台中输入 ipconfig，按 Enter > 查找 IPv4 列表。","如果您（或其他人）想在不在同一网络的情况下连接到您的托管 ST，您将需要 ST 托管设备的公共 IP。","在使用 ST 托管设备时，访问 此页面 并查找 IPv4。这就是您从远程设备连接时使用的地址。"]},{"l":"3. 将远程设备连接到ST主机","p":["无论您在您的情况下得到了什么IP，您都将该IP地址和端口号输入到远程设备的网页浏览器中。","在同一wifi网络上的ST主机的典型地址如下所示：","http://192.168.0.5:8000","使用 http:// 而不是 https://"]},{"l":"将您的 ST 开放给所有 IP","p":["我们不建议这样做，但您可以打开 config.yaml 并将 whitelistMode 更改为 false。","如果存在，您必须删除（或重命名） SillyTavern 基础安装文件夹中的 whitelist.txt。","这通常是一种不安全的做法，因此我们要求您在这样做时设置用户名和密码。","用户名和密码在 config.yaml 中设置。","重启您的 ST 服务器后，任何设备都可以连接到它，只要他们知道用户名和密码，无论其 IP 地址如何。"]},{"i":"仍然无法连接","l":"仍然无法连接？","p":["为 config.yaml 中找到的端口创建入站/出站防火墙规则。请勿将此与路由器上的端口转发混淆，否则有人可能会找到您的聊天记录，这可是个大问题。","在设置 > 网络和互联网 > 以太网中启用私有网络配置文件类型。这对于 Windows 11 非常重要，否则即使有上述防火墙规则，您也无法连接。"]},{"l":"HTTP基本认证","p":["每当客户端通过HTTP连接时，服务器将要求输入用户名和密码。 这仅在启用了远程连接（listen: true）时有效。","要启用HTTP基本认证，请打开SillyTavern基础目录中的 config.yaml 文件，并搜索 basicAuthMode。将basicAuthMode设置为true，并设置用户名和密码。注意： config.yaml 文件仅在ST至少执行过一次后才会存在。","保存文件并在SillyTavern已经运行的情况下重启。如果连接到你的ST时，应该会提示输入用户名和密码。用户名和密码以明文形式传输。如果你对此感到担忧，可以通过HTTPS提供ST。"]},{"l":"HTTPS"},{"i":"使用-tlsssl-启动-sillytavern","l":"使用 TLS/SSL 启动 SillyTavern","p":["要加密与您的 ST 实例之间的流量，请使用 --ssl 标志启动服务器。","示例：","默认情况下，ST 会在 certs 文件夹中查找您的证书。如果您的文件位于其他位置，可以使用 --keyPath 和 --certPath 参数。","运行 SillyTavern 的用户需要对证书文件具有读取权限。"]},{"l":"如何获取证书","p":["获取证书最简单、最快的方法是使用 certbot。"]},{"l":"Tailscale","p":["Tailscale 是一个 VPN 提供商，能够安全地远程连接到您的 PC。Tailscale 服务器的开源实现存在，您还可以使用 Headscale 来托管服务器，但这超出了本教程的范围。"]},{"l":"1. 创建账户","p":["访问 Tailscale 的网站 并创建一个新账户。","注意： 对于单个用户的日常使用，Tailscale 将永久免费。如果您担心隐藏费用，只需不添加任何支付选项。"]},{"l":"2. 设置客户端","p":["前往 Tailscale 的下载页面，在运行 SillyTavern 的设备和您想要从远程位置使用的设备上下载客户端/应用程序。","在两个设备上使用您之前创建的帐户登录。","前往 Tailscale 的管理页面，并批准这两个设备。","记下这两个连接设备的名称。"]},{"l":"3. 将您的设备添加到白名单","p":["按照 管理白名单 IP 的说明，将您要与 SillyTavern 一起使用的连接设备的机器名称添加到 SillyTavern 的白名单中。"]},{"l":"4. 连接","p":["现在，无论何时您想从任何地方使用 SillyTavern，您只需：","在托管 SillyTavern 的 PC 和您希望远程使用它的设备上都开启 Tailscale。","在想要连接的设备上打开浏览器，访问 http://machine name of PC running st:8000/"]},{"i":"5-与朋友共享sillytavern实例可选","l":"5. 与朋友共享SillyTavern实例（可选）","p":["告诉你的朋友创建自己的Tailscale账户并在他们的设备上下载客户端。","前往 Tailscale的管理页面。","将鼠标悬停在托管SillyTavern的PC上的三点按钮上，然后按“共享...”或按三点按钮然后按“共享设置...”。","取消勾选“允许用作出口节点”（除非你希望你的朋友能够通过你的PC路由他们所有的互联网流量）。","通过电子邮件发送链接，或者切换到“复制共享链接”标签，按下带有相同文本的大蓝色按钮，并以其他方式将其发送给你的朋友。","在点击你的共享链接后，你的朋友将在他们的Tailscale网络中看到你的PC弹出。","将你用来访问SillyTavern的相同链接发送给你的朋友，如上一步所述。","注意： 这将使你的朋友完全访问你PC上本地运行的任何服务，如SillyTavern、automatic1111等。只有在你真正信任你的朋友的情况下才这样做。"]}],[{"l":"反向代理 SillyTavern","p":["本节内容 不 涉及 OpenAI/Claude 反向代理。仅指 HTTP/HTTPS 反向代理。","Termux 的设置让您感到困惑吗？您是否厌倦了在每个设备上更新和安装 ST？想要对您的聊天和角色进行组织吗？那么您很幸运。本指南将_希望_涵盖如何在您的 PC 上托管 SillyTavern，您可以从任何地方连接并与您用于运行 AI 模型的同一台 PC 上的机器人聊天！","本指南 不适合 初学者。这将非常技术性。"]},{"l":"公平警告","p":["请参阅 安装 下的 Windows。","您必须具备以下知识","Linux 控制台命令","DNS 记录","公共 IP 地址","Docker","您需要为自己购买一个域名，并为您的 SillyTavern 页面配置一个 CNAME。我们建议在 Cloudflare 上添加或购买域名，因为本指南将涵盖如何使用 Cloudflare 本身进行此操作。"]},{"l":"安装"},{"i":"linux-裸机-sillytavern","l":"Linux (裸机 SillyTavern)","p":["A","cd 到 appdata/traefik，使用 nano 或类似的编辑器，创建一个名为 config.yml 的文件并粘贴以下内容。将 PRIVATE_IP 替换为您获取的私有 IP，将 silly.DOMAIN.com 替换为您的子域名和域名页面，然后保存文件。","cd 到 secrets/cloudflare，使用 nano 或类似的编辑器，创建一个名为 CF_DNS_API_KEY 的文件并粘贴您的密钥。","CNAME","DOMAIN.com","N/A","PUBLIC_IP","silly","TTL","www","Zone -> DNS -> Edit","Zone -> Zone -> Read","不要 安装 Docker Desktop。","享受吧！ :D","代理","代理状态","使用 ifconfig 或从路由器获取计算机的私有 IP。","使用 nano 或类似的编辑器，创建一个名为 docker-compose.yaml 的文件，并粘贴以下内容。随后保存文件。","使用 nano 或类似的编辑器，创建一个名为 traefik.yml 的文件，并粘贴以下内容。将模板电子邮件替换为您自己的，然后保存文件。","使用 touch 创建一个 acme.json 文件，并将其权限设置为 600。","使用以下命令运行 Docker Compose：","创建另一个 CNAME 类型的记录，然后点击 保存。以下是在 Cloudflare 仪表板上应该如何显示的示例。","前往 Linux 的根文件夹，创建一个名为 docker 的新文件夹。","名称（必填）","在 docker 文件夹内创建一个名为 appdata 的文件夹，在 appdata 内再创建一个名为 traefik 的文件夹。随后进入 appdata/traefik 文件夹。","在 docker 文件夹内创建一个名为 secrets 的文件夹，在 secrets 内再创建一个名为 cloudflare 的文件夹。","复制给您的令牌密钥并将其安全存储。","大多数住宅/家庭网络使用 动态 IP，在使用几个月后会进行更新。如果您有动态 IP，请使用 DDClient，或记得在 Cloudflare 仪表板上定期检查并更改您的公共 IP。","如果几分钟后没有任何反应，请检查 Traefik 的容器日志以查找可能的错误。","对于 Linux，我们将通过 Traefik 反向代理 SillyTavern。还有其他选项，如 NGINX 或 Caddy，但在本指南中，我们将使用 Traefik，因为这是我们自己使用的。","建议将私有 IP 设置为静态 IP。请参考路由器手册或使用 Google 配置静态 IP。","执行 chown，将 替换为您的 Linux 用户名，以设置 docker 文件夹的权限。","按照 Docker 安装后指南 这里 中的 以非 root 用户管理 Docker 步骤进行操作。","按照 Docker 安装指南 这里 安装 Docker。","点击 创建令牌 然后 创建自定义令牌，确保您为令牌授予以下权限。","点击 继续到摘要，然后点击 创建令牌。","登录到 Cloudflare，点击您的域名，然后点击 获取您的 API 令牌。","目标（必填）","确保将默认用户名和密码更改为您可以记住的强密码。","等待几分钟，然后打开您为 ST 创建的域名页面。在页面的末尾，您应该能够通过一个 URL 和一个帐户从任何地方访问 SillyTavern。","类型","自动","转到您的 SillyTavern 文件夹，编辑 config.yaml 以启用监听模式和基本身份验证，同时禁用 whitelistMode。","返回 docker 文件夹。","返回到您的域名页面，转到 DNS。使用 添加记录 创建一个新记录，并创建两个 A 类型的记录，如下所示。将 PUBLIC_IP 替换为您自己的公共 IP，然后点击 保存。","通过 Google 搜索 what's my ip 获取调制解调器的公共 IP。"]},{"i":"linux-docker-sillytavern","l":"Linux (Docker SillyTavern)","p":["A","cd 进入 secrets/cloudflare，使用 nano 或类似编辑器，创建一个名为 CF_DNS_API_KEY 的文件，并将您的密钥粘贴进去。","CNAME","DOMAIN.com","N/A","PUBLIC_IP","silly","TTL","www","享受吧！ :D","代理","代理状态","使用 nano 或类似编辑器，创建一个名为_docker-compose.yaml_的文件，并粘贴以下内容。将 silly.DOMAIN.com 替换为您上面添加的子域，然后保存文件。","使用以下命令运行Docker Compose：","停止SillyTavern Docker容器。","再次启动SillyTavern Docker容器。","创建另一个** CNAME** 类型的记录，然后点击_保存_。以下是它在Cloudflare仪表板上应显示的示例。","区域 -> DNS -> 编辑","区域 -> 区域 -> 读取","名称（必填）","复制给您的令牌密钥并将其存储在安全的地方。","如果几分钟后没有任何反应，请检查Traefik的容器日志以查找可能的错误。","将SillyTavern克隆到 docker 文件夹中。","按照** Linux (裸金属SillyTavern)** 的步骤1-11进行操作。","点击_创建令牌_，然后_创建自定义令牌_，确保为您的令牌授予以下权限。","点击_继续到摘要_，然后_创建令牌_。","登录到Cloudflare，点击您的域名，然后选择 获取您的API令牌。","目标（必填）","确保将默认用户名和密码更改为您能记住的强密码。","等待几分钟，然后打开您为ST创建的域名页面。在页面的末尾，您应该能够通过一个URL和一个账户从任何地方访问SillyTavern。","类型","自动","请注意，我们在裸金属上通过Docker运行SillyTavern。这是我们在Docker上与其他Docker容器一起使用ST时的大致步骤。","转到您的SillyTavern文件夹（ appdata/sillytavern/config）并编辑 config.yaml 以启用监听模式和基本身份验证，同时禁用 whitelistMode。","返回到您的域名页面，转到 DNS。使用 添加记录 创建一个新记录，并创建两个_A_类型的记录，如下所示。将 PUBLIC_IP 替换为您的公共IP，将示例域名替换为您的域名，然后点击_保存_。"]},{"l":"Windows","p":["在Windows中，反向代理略有不同。目前，您在Windows上可用的唯一选项（根据我们所知）是通过在路由器上运行VPN或使用Cloudflare/NGROK隧道。有关更多信息，请参阅 其他选项。","您知道Windows比Linux消耗更多的VRAM吗？如果您需要更多的上下文或更高参数的模型，我们建议双启动Windows和Linux，或者选择纯Linux以节省一些VRAM。"]},{"l":"可选内容","p":["虽然我们不一定会详细介绍这些内容，但如果您想更好地保护您的 SillyTavern 实例，以下是一些建议尝试使用的东西。（内容会在适当时添加）","使用 Authelia 或 Authentik。","Authelia/Authentik 是一个开源的单点登录 (SSO) 应用程序，允许您创建用户并通过在您想要保护的网站上呈现的登录门户来保护许多不同的页面。我们中的一位主要在其自己的域名使用此应用，而不是 ST 的基本认证，虽然设置起来比较复杂，但这是学习 SSO 和在互联网上更好地保护您的 ST 实例的好方法。","如果您计划在 ST 的基本认证上使用 Authelia，您必须在 config.yaml 中禁用 basicAuthMode 并启用 securityOverride。","使用 DDClient。","DDClient 允许您将公共 IP 同步到 Cloudflare，以防您的 ISP 更改它，从而使您能够继续像以前一样访问您的 ST 实例。"]},{"l":"其他选项","p":["如果反向代理对你来说有点复杂，还有其他方法可以连接到你的 ST 实例。","使用 自制 VPN。","一些路由器具备在路由器管理页面中托管 VPN 服务器（主要是 OpenVPN 或 WireGuard）的能力。请参考路由器的手册设置 VPN 并将你的设备添加到 VPN 中。连接后，只需访问为 SillyTavern 设置的私有 IP，就可以正常连接。这对用户和 Windows 使用更方便。","使用 Cloudflare Zero Trust。","Cloudflare Zero Trust 是 Cloudflare 中的一个免费组织功能，允许你添加 50 个用户。它会通过 Cloudflare 代理你的流量，通过使用 cloudflared 将你的 ST PC 添加为隧道，你可以像在家一样连接到你的 ST 实例。","请注意，在创建隧道后，你需要向路由器的私有 IP 地址添加路由，并计算 IP CIDR 值，以便在使用 Cloudflare Zero Trust 时能够完全本地访问。","使用独立的 Cloudflare/NGROK 隧道。","类似于 AI 后端的连接方式，你也可以通过 Cloudflare 隧道连接你的 ST 实例，并打开 Cloudflare 隧道页面。然而，每次想要在移动中使用 ST 时，你都需要复制并粘贴 Cloudflare/NGROK 生成的每个新链接。"]}],[{"l":"常见设置","p":["这些设置控制在使用语言模型生成文本时的采样过程。这些设置的含义对于所有支持的后端都是通用的。"]},{"l":"上下文设置"},{"i":"响应tokens","l":"响应（tokens）","p":["API 生成响应的最大 token 数量。","响应长度越高，生成响应所需的时间就越长。","如果 API 支持，您可以启用 Streaming 以便在生成时逐步显示响应。","当 Streaming 关闭时，响应将在完成时一次性显示。"]},{"i":"上下文-tokens","l":"上下文 (tokens)","p":["SillyTavern 发送到 API 作为提示的最大 token 数量，减去响应长度。","上下文包括角色信息、系统提示、聊天记录等。","消息之间的虚线表示聊天的上下文范围。该线以上的消息不会发送给 AI。","生成消息后，要查看上下文的组成，请点击 Prompt Itemization 消息选项（展开 ... 菜单并点击带线的方形图标）。"]},{"l":"采样器参数"},{"l":"温度","p":["控制生成文本的随机性。","较低的值：响应更合逻辑，但创造性较低。","较高的值：响应更具创造性，但逻辑性较低。"]},{"l":"重复惩罚","p":["通过根据上下文中出现的频率对标记进行惩罚，尝试遏制重复。","有时，如果角色专注于某个事物或重复同一句话，增加该参数可能会有所帮助。","如果设置得过高，该参数会导致响应中断。除非你知道自己在做什么，否则最好不要超过 1.15。","将值设置为 1 以禁用其效果。"]},{"l":"重复惩罚范围","p":["将考虑多少个来自最后生成的标记的标记用于重复惩罚。如果设置得过高，可能会导致响应中断，因为像“the, a, and”等常用词会受到最大惩罚。","将值设置为 0 以禁用其效果。"]},{"l":"重复惩罚斜率","p":["如果该值和 重复惩罚范围 都大于 0，重复惩罚将在提示的末尾产生更大的影响。值越高，效果越强。","将值设置为 0 以禁用其效果。"]},{"l":"Top K","p":["将令牌池限制为 K 个最可能的令牌。较低的数字更一致，但创造力较低。","将值设置为 0 以禁用其效果。"]},{"l":"Top P","p":["将令牌池限制为其概率加起来等于 P 所需的令牌数量。较低的数字更一致，但创造性较低。","将值设置为 1 以禁用其效果。"]},{"l":"Typical P","p":["从可能的标记列表中随机选择标记，每个标记被选择的机会相等。产生的响应更加多样化，但可能也会缺乏连贯性。","将值设置为 1 以禁用其效果。"]},{"l":"Min P","p":["通过相对于顶部令牌切断低概率令牌来限制令牌池。产生更连贯的响应，但如果设置过高，也可能加剧重复。","在低值（如 0.1-0.01）时效果最佳，但在高 Temperature 的情况下可以设置得更高。例如： Temperature: 5, Min P: 0.5","将值设置为 0 以禁用其效果。"]},{"l":"Top A","p":["从最可能的选项中选择的令牌数量是根据选项的概率分布自动确定的，但它选择所有概率高于某个阈值的令牌，而不是选择 Top P 或 Top K 令牌。","将值设置为 0 以禁用其效果。"]},{"l":"尾部自由采样","p":["此设置在文本生成过程中移除最不可能的标记，从而提高生成文本的质量和连贯性。","将值设置为 1 以禁用其效果。"]},{"l":"平滑因子","p":["通过使用二次变换增加高概率标记的可能性，同时降低低概率标记的可能性。旨在产生更具创意的响应，而不受 Temperature 的影响。","在没有截断采样器（如 Top K、 Top P、 Min P 等）时效果最佳。","将值设置为 0 以禁用其效果。"]},{"l":"动态温度","p":["根据顶部标记的可能性动态调整温度。旨在在不牺牲连贯性的情况下产生更具创意的输出。","接受从最小到最大范围的温度。例如： Minimum Temp: 0.75 和 Minimum Temp: 1.25","Exponent 根据顶部标记应用指数曲线。","取消勾选以禁用其效果。"]}],[{"l":"API 连接","p":["SillyTavern 可以连接多种 LLM API。 以下是它们各自的优缺点和使用案例的描述。"]},{"l":"本地 API","p":["这些 LLM API 可以在您的个人电脑上运行。","它们是免费的，并且没有内容过滤器。","安装过程可能比较复杂（ SillyTavern 开发团队不提供支持）。","需要单独从 HuggingFace 下载 LLM 模型，每个模型可能在 5-50GB 之间。","大多数模型的性能不如云端 LLM API。"]},{"l":"KoboldAI","p":["在您的个人电脑上运行，100% 私密，提供多种模型","提供对 AI 生成设置的最直接控制","需要大量 GPU VRAM（6-24GB，具体取决于 LLM 模型）","模型限制为 2k 上下文","不支持流式传输","受欢迎的 KoboldAI 版本：","Henky's United","0cc4m's 4bit-supporting United"]},{"l":"KoboldCpp","p":["易于使用的 API，支持 CPU 卸载（对低 VRAM 用户有帮助）和流式处理","在 Windows 上通过单个 .exe 文件运行（在 MacOS 和 Linux 上必须从源代码编译）","支持 GGUF/GGML 模型","比 AutoGPTQ 和 Exllama/v2 等仅 GPU 加载器慢","GitHub"]},{"l":"Oobabooga TextGeneration WebUI","p":["一体化 Gradio 用户界面，支持流式传输","对量化模型（AWQ, Exl2, GGML, GGUF, GPTQ）和 FP16 模型的广泛支持","提供一键安装程序","定期更新，有时可能会导致与 SillyTavern 的兼容性问题","GitHub","正确连接 SillyTavern 到 Ooba 的新 OpenAI API 的方法","确保您使用的是 Oobabooga 的 TextGen 的最新更新（截至 2023 年 11 月 14 日）。","编辑 CMD_FLAGS.txt 文件，并在其中添加 --api 标志。然后重启 Ooba 的服务器。","连接 ST 到 http://localhost:5000/（默认情况下），并且不要勾选“Legacy API”选项。您可以从 Ooba 控制台提供的 URL 中移除 /v1 后缀。","您可以通过 --api-port 5001 标志更改 API 托管端口，其中 5001 是您的自定义端口。"]},{"l":"TabbyAPI","p":["基于轻量级 Exllamav2 的 API，支持流式传输","支持 Exl2、GPTQ 和 FP16 模型","官方扩展 允许直接从 SillyTavern 加载/卸载模型","不推荐低 VRAM 用户使用（不支持 CPU 卸载）","GitHub"]},{"l":"云 LLM API","p":["这些 LLM API 作为云服务运行，不需要您电脑上的资源","它们比大多数本地 LLM 更强大/智能","然而，它们都有不同程度的内容过滤，大多数需要付费"]},{"i":"claude-由anthropic提供","l":"Claude (由Anthropic提供)","p":["推荐给希望其AI聊天具有创造性、独特写作风格的用户","提供4k、8k、100k上下文模型","所有API中最强的内容过滤器（截至2023年6月）","大多数模型访问受限","目前不接受新账户创建；处于候补名单中（2023年6月）","网站"]},{"l":"DreamGen","p":["无过滤的模型，专为可操控的人工智能角色扮演和故事创作而调优","每月免费积分，以及付费订阅","模型范围从 7B 到 70B","设置说明"]},{"l":"Kobold Horde","p":["SillyTavern 可以直接访问此 API，无需额外设置","使用个别志愿者 (Horde Workers) 的 GPU 来处理您的聊天输入的响应","在生成等待时间、AI 设置和可用模型方面依赖于 Worker","Website"]},{"l":"Mancer AI","p":["提供无约束模型的服务，无需越狱。","使用“积分”来支付各种模型的代币。免费积分每天补充。","默认情况下不记录提示，但您可以启用此功能以获得代币的积分折扣。","使用类似于 Oobabooga TextGeneration WebUI 的 API，详细信息请参见 Mancer 文档。","网站， 设置说明"]},{"l":"NovelAI","p":["无内容过滤","需要付费订阅","设置说明"]},{"i":"openai-chatgpt","l":"OpenAI (ChatGPT)","p":["易于设置和获取API密钥，提供4k-128k上下文模型","免费试用需要有效的电话号码","试用后，所有使用按月收费","角色扮演的写作风格可能会显得重复和可预测","设置说明"]},{"l":"OpenRouter","p":["WindowAI 浏览器扩展允许您使用自己的 API 密钥连接到上述云 LLM","使用 OpenRouter 支付以使用他们的 API 密钥","如果您不想在每个服务上创建单独的帐户，这将非常有用","WindowAI 网站 和 OpenRouter 网站"]}],[{"l":"聊天完成","p":["聊天完成 API 包括 OpenAI、Claude 和 PaLM。 WindowAI 和 OpenRouter 也允许连接这些 API。"]},{"l":"OpenAI"},{"l":"API 密钥","p":["获取方法：","访问 OpenAI 并登录。","使用 \" 查看 API 密钥\" 选项创建新的 API 密钥。","重要！","丢失的 API 密钥无法恢复！请确保妥善保管！"]},{"l":"Claude","p":["如果您可以访问Anthropic的Claude API：","选择“Claude”作为“聊天完成源”。","输入您的API密钥。","点击连接。"]},{"l":"代理","p":["LiteLLM","LM Studio","LocalAI","切换到“聊天完成”API 类型。","可以为 OpenAI 的后端配置代理/替代端点。此自定义端点可以连接到支持通用 OpenAI API 架构的替代聊天完成 API。","在这里，您可以输入代理/自定义端点，并在需要时在“代理密码”下可选地输入 API 密钥。 例如，TabbyAPI 会为您提供一个必须使用的 API 密钥。","大多数文本完成 API 支持比 OpenAI 标准允许的更大的自定义选项。这些更大的自定义选项，例如 Min-P 采样器，可能值得 SillyTavern 用户查看，因为它们可以大大提高生成的质量。","如果您打算使用此代理功能来使用本地端点，例如 TabbyAPI、Oobabooga、Aphrodite 或类似的服务，您可能想要查看 这些的内置兼容性。此代理功能主要用于与其他提供 OpenAI 兼容 API 聊天完成端点的服务和程序一起使用。","实现此 API 的后端示例包括：","将 API 密钥等详细信息留空。","打开“AI 响应配置”选项卡并向下滚动到“OpenAI / Claude 反向代理”部分。","提示： 如果它不起作用，请尝试在端点 URL 的末尾添加 /v1！","显示“外部”模型（由 API 提供）。","此功能不是自定义 API 端点正常工作的必要条件，并且可能并非在每个后端都可用。","此功能通过以下方式访问：","请注意，我们不提供对您可能遇到的任何问题的支持！ 我们不保证与每个可能的 API 端点的兼容性！","跳过 API 状态检查。","返回到“AI 连接”选项卡，您可以找到两个可选复选框，标记为：","选中“显示‘外部’模型（由 API 提供）”将显示您自定义 API 端点报告的可用外部模型（向下滚动经过 OpenAI 的模型）。这使您可以直接从 SillyTavern 选择不同的 API 模型，而无需进入自定义应用程序并更改模型。","选中“跳过 API 状态检查”会告诉 SillyTavern 停止提醒您关于非功能性 API 端点的警告。如果您的 API 端点正常工作，但 SillyTavern 仍然不断警告您，请选中此项。","选择“OpenAI”作为“聊天完成来源”。"]}],[{"l":"OpenRouter","p":["由于地理限制或候补名单无法访问 OpenAI / Claude API？使用 OpenRouter。","OpenRouter 的工作原理是让您使用他们拥有的密钥来访问像 GPT-4 和 Claude 2 这样的模型，所有服务都在一个共享的信用池中。","它提供免费试用（约 $1），之后为付费访问。没有订阅或每月账单 - 您只需为实际使用的部分付费。某些模型提供有限上下文大小的免费访问。","OpenRouter 定价详情","创建 OpenRouter 账户: openrouter.ai","OpenRouter-ConnectionPanel","从上到下（见上图）：","选择“聊天完成”API","选择 OpenRouter 源","点击“授权”以使用 OAuth 流获取密钥。或者，可以在 这里 生成 API 密钥并将其粘贴到框中。","点击“连接”并选择模型","（可选）使用“测试消息”按钮验证您的连接"]},{"l":"WindowAI","p":["WindowAI 是 OpenRouter 制作的浏览器扩展，可以控制您在任何启用的网站或网络应用上的 OpenRouter 连接。","您还可以在此处使用您自己的 Claude 和 OpenAI API 密钥。"]}],[{"l":"DreamGen","p":["DreamGen 是一个用于 AI 驱动的角色扮演和故事创作的应用程序和 API。它们提供免费套餐，以及付费订阅，允许无限制地每月访问专门为可控 AI 角色扮演和故事创作而设计的高质量内部文本生成模型。创建一个账户以开始使用： https://dreamgen.com/.","（免费）积分在每个日历月的开始时重置。请查看 定价 以了解每个模型的积分成本，并查看 使用情况 以查看您剩余的积分。"]},{"l":"连接到 DreamGen"},{"l":"获取 API 密钥","p":["访问 DreamGen API 密钥 页面，并点击 \"New API Key\" 按钮。确保将 API 密钥复制到剪贴板中。","创建新的 DreamGen API 密钥 复制 DreamGen API 密钥"]},{"l":"连接","p":["前往 SillyTavern 连接设置。","选择 API: 文本完成","选择 API 类型: DreamGen","输入 API 密钥","（可选）选择一个模型","连接到 DreamGen"]},{"l":"模型","p":["DreamGen 提供 opus-v1-sm、 opus-v1-lg 和 opus-v1-xl。模型越大，跟随指令和编写角色扮演和故事的能力就越强。"]},{"l":"格式设置","p":["DreamGen 模型期望特定的输入格式，详细信息请参见 此处。","SillyTavern 提供了专为 DreamGen 设计的内置预设。请确保将这些设置作为您的基础。 这些设置尽量与 DreamGen 格式保持一致，但由于角色卡的格式不规则，可能并不总是完美。","转到“高级格式”页面。","在“上下文模板”下，根据模型选择 DreamGen Role-Play V1 Llama3 / ChatML(*).","启用“指令模式”。","在“指令模式预设”下选择 DreamGen Role-Play V1 Llama3 / ChatML。","DreamGen 上下文设置 DreamGen 指令设置","(*) 什么时候使用 Llama 3，什么时候使用 ChatML？截至 2024/06/17， opus-v1-sm 是 ChatML，所有其他模型基于 Llama3。 运行本地模型时，模板将在模型的 HuggingFace 卡片中指明。"]},{"l":"完成设置","p":["DreamGen 支持：","\"Temperature\"、\"Top P\"、\"Top K\" 和 \"Min P\"","\"Presence Penalty\"、\"Frequency Penalty\" 和 \"Repetition Penalty\"（无范围）","\"Min Length\" -- 允许您强制模型生成至少 min(min_length, max_tokens) 个标记","好的起始值可能是：","Min P: 0.05","Temperature: 0.8","Repetition Penalty: 1.1"]},{"l":"格式化提示","p":["DreamGen 模型与常规的指令跟随模型（如 OpenAI 的 ChatGPT）有所不同。","这些模型经过微调，旨在根据提供的描述编写角色扮演或故事，通常包括情节描述、风格描述、角色、地点、背景等。模型还可以在角色扮演的过程中进行 引导，让你成为导演，告诉角色应该做什么或情节应该如何展开。","一个格式良好的 系统提示 消息看起来应该是这样的：","注意， 提示应该是故事的描述，而不是关于如何编写故事的指令或指示。 避免使用以下短语：","\"将故事写成好像...\"","\"确保...\"","等等。","请参阅更多 示例，了解情节、风格和角色描述应该是什么样的。","默认的 \"DreamGen 角色扮演 V1\" 模板将不同的部分替换如下：","## Plot description: 将由 {{scenario}} 和 {{wiBefore}} 组成。","## Style description: 不提供，您应该将其添加到系统提示的高级设置中，或者添加到角色卡的 {{scenario}} 末尾。此部分对影响叙述风格（第一人称、第二人称、第三人称）、时态（过去、现在）、细节和冗长程度等非常有用。","## Characters: 将有一个 {{char}} 角色，其描述由 {{description}} 和 {{personality}} 组成，以及一个 {{user}} 角色，其描述由 {{persona}} 组成。"]},{"l":"消息示例和初始消息","p":["DreamGen 模型对上下文非常敏感——它们在很大程度上会遵循之前对话回合中呈现的写作风格（和事实）。这使得消息示例和初始消息变得非常重要。"]},{"l":"格式化消息示例","p":["{{mesExamples}} 被附加在系统提示的末尾。为了充分利用指令格式，请确保您的示例用 START 分隔符分开。例如："]},{"l":"示例","p":["这里有几个为 DreamGen 适配的示例卡片，考虑到了独特的提示。这些卡片还利用了 {{mesExamples}}，如上所述。"]},{"l":"Seraphina","p":["这是对默认内置于 SillyTavern 的流行 Seraphina 卡片的编辑。"]},{"l":"Lara Lightland","p":["这是 Deffcolony 的 Lara Lightland 卡片的编辑。"]},{"l":"常见问题解答"},{"i":"我应该使用什么采样器设置","l":"我应该使用什么采样器设置？","p":["您可以从以下设置开始：","Temperature: 1.0","MinP: 0.05","Presence Penalty: 0.1","Frequency Penalty: 0.1"]},{"i":"如何使回复更长或更短","l":"如何使回复更长或更短？","p":["您有几个选项：","更改或添加系统提示或模型卡中的 ## Style description:。您可以尝试添加类似于“句子通常较长，叙述详细描述环境”的内容。","更改完成设置中的 Min Length。","在指令模式下的高级格式设置中，添加类似于以下的 Last Output Sequence：","以下是一个可能有助于使模型以更详细方式响应的 Last Output Sequence 示例，使用 Llama 3 模板：","使用 ChatML 模板表达相同内容："]}],[{"l":"KoboldAI"},{"l":"基本设置","p":["此处使用标准的KoboldAI设置文件。要添加您自己的设置，只需在 SillyTavern\\data\\user-handle\\KoboldAI Settings 中添加文件.settings"]},{"l":"Soft Prompts","p":["Soft Prompts 允许您自定义 AI 的风格和行为。","它们是通过使用一组输入数据的特殊类型提示训练 AI 创建的。尝试不同的软提示可以带来令人兴奋和独特的结果。最成功的软提示是那些能够将 AI 的输出与某种文学体裁、虚构宇宙或特定作者的风格对齐的提示。"]},{"l":"常见误解","p":["Soft prompts 并不向模型提供新信息，但可以有效影响模型的语气、用词和格式。","Soft prompts 不是将完整提示压缩到有限的令牌空间的方法。相反，它们提供了一种通过上下文中的数据引导语言模型输出的方式。"]}],[{"l":"KoboldAI Horde"},{"l":"免责声明","p":["KoboldAI Horde 是一个完全由志愿者运行的众包分布式 GPU 集群。","默认情况下，您的输入会匿名发送，运行 Horde Worker 的人无法看到响应。","然而，由于这是一个开源程序，恶意工作者可能会修改代码来：","记录您的活动（输入提示、AI 响应）。","生成不良或冒犯性的响应。","使用 Horde 时 绝不要发送 任何个人信息，例如姓名、电子邮件地址等。","启用“仅限受信任工作者”复选框将限制可用工作者的选择，仅限于那些在 Horde 上托管了一段时间并被普遍认为是可信的工作者。但他们仍然可能会看到提示，例如通过使用未记录的软件进行托管。","为了帮助减少这个问题，SillyTavern 内置了以下功能：","当 Horde Worker 生成聊天响应时，SillyTavern 会记录工作者的 ID 及其使用的模型。","通过将鼠标光标悬停在聊天项目上，您可以查看此信息（见下图）。","如果您认为收到了恶意响应，可以将此信息传递给 Horde 管理员，以便在 Kobold Discord 上进行审核和可能的纪律处分。","Horde Worker Info Popup"]},{"l":"设置","p":["SillyTavern 可以开箱即用地连接到 Horde，无需额外设置。","在 ST API 面板的 API 下拉选择器中选择 'KoboldAI Horde'。","在面板底部的模型选择器中选择一个或多个模型（角色的 'AI brains'）。","选择一个角色并开始聊天。","ST Kobold Horde API Connection Panel","默认情况下，您的 SillyTavern 实例连接到 Horde 的低优先级 'guest account'。 这意味着您可能需要等待很长时间才能收到回复。 要减少等待时间，请遵循下面的提示。"]},{"l":"提示","p":["在Horde网站注册一个账户，然后将你的Horde密钥添加到SillyTavern Horde API Key框中。","设置一个Horde Worker 来为他人提供你的GPU。","让他人使用你的GPU可以赚取'Kudos'，一种仅限Horde的货币。","你的账户拥有的kudos越多，你将从其他Horde Workers那里获得聊天响应的速度就越快。","Kudos还可以用于在 Stable Horde 上创建AI图像。","SillyTavern支持开箱即用的Stable Horde图像生成。","如果你的GPU不够强大无法运行AI，或者你没有电脑，你仍然可以通过 参与Horde社区以各种方式赚取Kudos。"]}],[{"l":"KoboldCpp","p":["KoboldCpp 是一个独立的 API，用于 GGML 和 GGUF 模型。","这个 VRAM 计算器 由 Nyx 提供，可以告诉你你的模型大约需要多少 RAM/VRAM。"]},{"l":"Nvidia GPU 快速入门","p":["KoboldCpp 1.58","下载最新版本： https://github.com/LostRuins/koboldcpp/releases","从版本 1.58 开始，KoboldCpp 应该看起来像这样：","加载模型时， GPU Layers 应该已经填充。现在先保持不变。","即使您的 VRAM 较低，也不要勾选 Low VRAM。","启动 KoboldCpp。您可能会看到来自 Microsoft Defender 的弹出窗口，点击 Run Anyway。","在 Hardware 标签下，勾选 High Priority。","在 Quick Launch 标签下，选择模型和您偏好的 Context Size。","差不多。","恭喜！您完成了！","您应该会看到类似以下内容：","您现在可以在 SillyTavern 中使用 http://localhost:5001 作为 API URL 连接到 KoboldCpp 并开始聊天。","本指南假设您正在使用 Windows。","点击 Launch，等待模型加载。","点击 Save，这样您就不必在每次启动时配置 KoboldCpp。","选择 Use CuBLAS，并确保 GPU ID 旁边的黄色文本与您的 GPU 匹配。","除非您拥有 Nvidia 10 系列或更早的 GPU，否则请取消勾选 Use QuantMatMul (mmq)。"]},{"l":"GPU Layers","p":["KoboldCpp 正在运行，但您可以通过确保尽可能多的层被卸载到 GPU 来提高性能。您应该在终端中看到类似以下内容：","不要害怕数字；这一部分比看起来要简单。 CPU buffer size 指的是系统 RAM 的使用量。忽略它。 CUDA0 buffer size 指的是 GPU VRAM 的使用量。 CUDA_Host KV buffer size 和 CUDA0 KV buffer size 指的是为您的模型上下文分配的 GPU VRAM。在这种情况下，KoboldCpp 使用了大约 9 GB 的 VRAM。","我有 12 GB 的 VRAM，只有 2 GB 的 VRAM 用于上下文，所以我还有大约 10 GB 的 VRAM 可用于加载模型。由于 9 层使用了大约 7 GB 的 VRAM， 7000 / 9 = 777.77，我们可以假设每层大约使用 777.77 MIB 的 VRAM。 10,000 MIB / 777.77 = 12.8，所以我将取整并从现在开始加载 12 层模型。","现在使用您的模型、上下文大小和系统的 VRAM 进行计算，并重启 KoboldCpp：","如果您聪明，之前点击过 Save，现在可以用 Load 加载您之前的配置。否则，选择您之前选择的相同设置。","将 GPU Layers 更改为您新的、经过 VRAM 优化的数字（在我的例子中是 12 层）。","点击 Save 保存您的更新配置。","您现在应该看到类似以下内容：","KoboldCpp 正在使用我 12 GB VRAM 的大约 11.5 GB。这应该比 KoboldCpp 自动生成的设置性能更好。","恭喜！您（实际上）完成了！","要更深入了解 KoboldCpp 设置，请查看 Kalmomaze 的 简单 Llama + SillyTavern 设置指南。"]}],[{"l":"Mancer","p":["Mancer 是一个大型语言模型推理服务，允许您运行任何您想要的提示，并且不对响应进行审查。大多数模型需要预加载余额才能开始聊天，但截至撰写时（2024年2月27日）有一个免费模型。","模型","定价"]},{"l":"如何开始","p":["在 mancer.tech 注册一个账户。","点击仪表板并复制您的 API 密钥。","Mancer 仪表板截至 2024年2月27日","在 SillyTavern 中，选择文本完成 API，然后在 API 类型下选择 Mancer。","输入您的 Mancer API 密钥并点击连接。","API 密钥","您现在应该能够与您选择的任何 Mancer 模型进行聊天。"]},{"l":"匿名日志记录","p":["如果您不介意您的聊天可能被用于训练模型、改善 Mancer 的服务、发布数据集或 他们可能决定用来做的其他任何事情，您可以选择匿名日志记录，以便在某些模型上获得 25% 的代币折扣。只需前往您的 Mancer 仪表板 并勾选 Enable Anon. Logging。"]},{"l":"支持","p":["仍然需要帮助吗？请前往 SillyTavern Discord 的 #mancer 支持频道。"]}],[{"l":"NovelAI","p":["NovelAI是一项付费订阅服务，允许用户无限制地每月访问其高质量的内部文本生成、图像生成和文本转语音模型。在此注册账户以开始使用： https://novelai.net/","您将仅获得 50次生成 的免费体验，以评估该模型。当出现**“不符合该模型的资格”** 错误时，这意味着您已用尽试用期，需要订阅付费计划。"]},{"l":"API 密钥","p":["要获取您的 NovelAI API 密钥，请按照以下步骤操作：","选择左侧边栏顶部的齿轮图标。 Left Sidebar","在“用户设置”下选择“账户”。 User Settings","选择“获取持久 API 令牌”。 Account","选择复制图标，将您的 NovelAI API 令牌复制到剪贴板。 Persistent API Token"]},{"l":"模型","p":["您应该使用 Kayra。","Clio 不是一个糟糕的模型，但不如 Kayra 强大。Clio 的速度优势微不足道。在 NovelAI 的平板和卷轴层级中，Clio 确实具有比 Kayra 更大的上下文大小，但与 Kayra 提供的更好的连贯性/文笔质量相比，这种权衡不太可能是值得的。"]},{"l":"设置","p":["设置文件位于此处 ( SillyTavern/data/user-handle/NovelAI Settings)。 您也可以手动添加自己的设置文件。"]},{"l":"响应长度","p":["您希望每条消息生成多少文本。请注意，NovelAI 每个响应的限制为 150 个标记。"]},{"l":"上下文大小","p":["聊天中在任何给定时间保留多少个令牌。您可以使用的最大上下文大小取决于模型和您的订阅级别：","Kayra (Tablet) - 3072 tokens","Kayra (Scroll) - 6144 tokens","Kayra (Opus) 和 Clio (所有级别) - 8192 tokens"]},{"l":"前言","p":["插入在聊天顶部以修改写作风格的文本。推荐格式是一个简短标签的列表，例如 \"[风格: 聊天, 详细, 感官 ]\"。"]},{"l":"预设描述","p":["根据 Novel AI 的说法，默认预设的用途如下。"]},{"l":"Kayra","p":["Asper - 适合创意写作。期待意想不到的转折。","Blended-Coffee - (CFG) 新鲜咖啡与一些CFG混合在一起。","Blook - (CFG) 倾向于简单、简洁但多样的语言。","Carefree - 一款优秀的全能型工具","CosmicCube - (CFG) 一个稳固、合理的基线。根据偏好调整随机性。","Fresh-Coffee - 保持事情在正轨上。很好地处理指令。","Green-Active-Writer - (CFG) 类似于Writer's Daemon，但具有高CFG。","PilotFish - (CFG) 专为丰富背景的创意写作而设计。","Pro_Writer - 模仿畅销小说的节奏和感觉。","Stelenes - 更可能选择合理的替代方案。重试时具有多样性。","Tea_Time - 一旦开始就变得精彩。","Tesseract - (CFG) 维持风格和质量。","Writers-Daemon - 极具想象力，有时甚至过于丰富。"]},{"l":"Clio","p":["Edgewise - 处理多种生成风格表现良好","Fresh Coffee - 保持事情的进展。","Long-Press - 旨在创造性散文。","Talker Chat - 设计用于聊天风格生成。","Vingt-Un - 一个优秀的全能默认选项，倾向于散文。"]},{"l":"使用NovelAI与SillyTavern的提示和常见问题解答","p":["在从其他ST后端API切换到NovelAI时，常常会出现许多常见问题和疑问。区别在于模型的训练目标。您很可能使用过OpenAI或Anthropic模型（或类似的本地模型），这些模型是围绕遵循用户指令构建的。NovelAI的模型则完全围绕文本补全构建：NAI的模型试图继续输入的提示，而不是将您的输入视为消息并形成响应。由于这种差异，许多适用于其他API的提示和常识在NAI中可能无法使用。"]},{"l":"调整 NovelAI 的设置","p":["在高级格式设置（A 图标）下：","将“上下文模板”设置为“NovelAI”","将“分词器”设置为“最佳匹配”","勾选“始终将角色名称添加到提示中”","勾选“折叠连续换行”","取消勾选“指令模式”下的“启用”框","在用户设置（带齿轮的人物）下：","开启“滑动”（虽然不是 NAI 特有的，但非常实用，建议开启）"]},{"i":"为novelai构建调整角色卡","l":"为NovelAI构建/调整角色卡","p":["为了优化您的角色卡以适应NovelAI，有几种推荐的方法来撰写角色描述：散文和属性。","散文非常简单，甚至让人觉得这应该不起作用：“Sylpheed是一个看起来年轻但实际上已经900岁的女神。她身材矮小，纤细，长长的白发在她编辫子的侧马尾中渐变成绿色，翡翠绿的眼睛呈十字形。[...]” 不，真的，仅此而已。只需用正常的句子写出角色的外貌、行为等，AI就会捕捉到这些信息。","如果您不相信自己的写作能力，或者想要一种更结构化的方法，可以使用属性方法，这在NovelAI的训练数据中存在。这种方法作为简单的角色特征列表，适用于不同类型。以下是一些经过测试与NovelAI模型有效的可能属性列表：","“Type: character”是为了告诉AI这是在描述一个角色（而不是地点、物体或其他类型的事物）。其余的属性是可选的，有些是多余的（例如，Personality、Mind和Mental基本上意味着相同的东西），但这些经过测试，与NovelAI的模型效果良好。填写与您的角色相关的属性即可。属性应以小写字母书写，并用逗号分隔，无需在单词周围加引号。例如：","这些方法被推荐是因为它们在NovelAI的训练数据中存在，因此特别适用于该模型。"]},{"l":"示例卡片","p":["以下是为NovelAI制作的几张示例卡片，展示了为NovelAI创建卡片的不同方式。第一张卡片Valka使用属性方法进行角色描述，而第二张卡片Eris则使用散文描述，并包含大量示例对话。","Valka","Eris"]},{"l":"不要做的事情","p":["大多数现有的角色卡格式与NovelAI不太匹配。它们会给您一些结果，甚至一些不错的结果，但存在很多问题。W++ 是最大的罪魁祸首之一，它与NovelAI模型的训练内容毫无相似之处，并且它不断使用括号/大括号/引号消耗了大量的tokens，导致卡片的大小膨胀而没有实际好处。","在那些没有集成到NovelAI中的现有格式中，AliChat是最有可能有效的，因为它依赖于使用示例消息同时传达角色信息和他们的声音，以您希望AI输出的消息类型格式。","对于大多数其他格式，由于它们通常是列出特定角色的不同特征的方法，因此可以相对简单地转换为属性方法。"]},{"i":"我应该使用哪个模块","l":"我应该使用哪个模块？","p":["可能不需要模块。如果你想让角色以更华丽的方式说话，Prose Augmenter 很有用，但要小心不要过度使用。Text Adventure 可能适合用于文本冒险风格的卡片/故事。"]},{"i":"不是指令模块","l":"不是指令模块？","p":["您可以在需要时调用指令模块。在您的消息中创建一个换行，并将您的指令放在大括号中，如下所示：{ CharName is offended by that seemingly innocuous statement }（文本与括号之间的空格是_必需_的）。这样做将自动将AI切换到指令模块一段时间。您不想一直使用指令模块，因为它往往会产生比其他模块更少的创造性输出，仅在您需要强烈引导AI朝特定方向时使用。"]},{"i":"为什么我的回复总是被截断","l":"为什么我的回复总是被截断？","p":["NovelAI 将响应长度限制为 ~ 150 个标记，即使您将滑块设置得更高。当达到滑块中的标记数或 150 时，以较低者为准，它会生成最多 20 个额外标记，以寻找停止序列或句子的结束，因此响应的有效限制为 170 个标记，此时它将停止，从而导致被截断。","如果被截断，您可以选择继续选项（在文本框左侧的三行菜单中）以让角色继续他们的回复。","如果您经常希望获得超过 170 个标记的回复，您可以通过以下方式绕过限制：","将响应长度保持在 150 个标记。","在高级格式设置中，启用自动继续。","将“目标长度”设置为所需长度。","这将将多个生成连接在一起，以便您获得更长的消息，但并不能保证回复会达到所需长度的 100%，如果模型决定停止。"]},{"i":"如何让机器人写更长的回复","l":"如何让机器人写更长的回复？","p":["阅读上面的内容，了解回复被截断的原因。这将有助于确保回复不会因达到生成长度限制而提前被截断。","如果您的回复没有被截断但仍然太短，很可能是因为“垃圾进，垃圾出”——如果您给模型提供了不好的示例，它将产生不好的输出。如果角色卡没有示例对话或示例对话很短，并且您发送给机器人的消息也很短，模型会注意到这一点，并将其视为接受的方式，因此回复会很短。因此，请编写更长的示例对话和更长的消息给机器人。（您可以始终使用 NovelAI 为您编写一些示例对话，而不是自己动手。）"]},{"i":"如何让机器人停止为我发言","l":"如何让机器人停止为我发言？","p":["检查角色卡的第一条消息和示例对话中是否包含角色为您采取行动的内容 - 如果有，请重写它们以消除角色为您行动的情况","确保已勾选“始终将角色名称添加到提示中”","确保您当前使用的用户角色与聊天的其余部分相同。如果您更改了用户角色但没有切换回来（或者没有将角色锁定到该聊天），那么通常停止为您生成内容的规则将失效","将 [\"\\n{{user}}:\"] 添加到自定义停止字符串（通常不需要，但有时有帮助）"]},{"i":"为什么我的角色没有回应","l":"为什么我的角色没有回应？","p":["有很多原因可能导致这种情况，因此我们需要查看几个地方：","确保在高级格式中选中了“始终将角色名称添加到提示”","检查是否有来自API的错误。虽然您可以在NAI免费试用期间使用SillyTavern，但一旦试用结束，您将只会收到错误","检查您在“自定义停止字符串”中设置的内容 - 如果这些内容在响应开始时被生成，可能会导致响应提前中断"]},{"i":"如何使用作者注释","l":"如何使用作者注释？","p":["一般来说，你可能不应该使用它。它插入在上下文的末尾附近，而在NAI的模型中，它常常会压倒上下文中的其他内容。它主要是旧的、较弱模型的遗留物，那时更为必要。"]},{"i":"如何进行场景切换时间跳跃","l":"如何进行场景切换/时间跳跃？","p":["将以下内容作为系统消息或在下一个消息的开始处换行：","然后将其余消息放在下一行。括号中的文本可以是时间跳跃、新地点或其他任何内容。“***”（幽默地称为“dinkus”）告诉 AI 场景已经改变，而括号中的文本则提供了更多上下文。"]},{"i":"ai不断重复特定单词短语我该怎么办","l":"AI不断重复特定单词/短语，我该怎么办？","p":["如上所述，您可以将重复惩罚滑块稍微调高一些，但调得过高可能会导致输出不连贯。 要更彻底地解决这个问题，请回顾上下文，尤其是最近的消息，并删除重复的单词/短语。从上下文中移除它可以减少AI开始重复它的理由。"]}],[{"l":"Scale","p":["Scale 是一种通过部署的“应用程序”轻松访问 GPT-4 和其他 LLM 的方式，这些应用程序充当 API 端点。","目前，Scale 不支持令牌流和通过 SillyTavern 的 UI 配置参数如温度。","Scale API 不是免费的，但如果您链接信用卡，可以提供 $5 的试用。"]},{"l":"快速入门","p":["{{ input }}","Complete the next response in this fictional roleplay chat.","最大令牌: 400 - 600（根据消息长度偏好）","创建一个“变体”，设置参数（系统提示、模型、温度、响应令牌限制等）","创建一个任意名称和描述的“应用”","前往您的新变体并点击部署","在 https://spellbook.scale.com 创建一个 Scale Spellbook 账户（如果您的国家不支持，请使用 VPN）","导航到 SillyTavern，选择“聊天完成”API 和 Scale 源","将 API 密钥和 URL 粘贴到相应字段中并点击“连接”","模型: GPT-4","温度:~ 0.6 - 0.9","点击“保存新变体”","用以下内容替换提示的“用户”部分：","这将为您的机器人创建一个 API 密钥和 URL","选择一个合适的语言模型进行部署（推荐使用 GPT-4）","配置模型参数。"]},{"l":"贡献","p":["实现和文档灵感来源于 khanon 的工作： https://github.com/khanonners/TavernAIScale"]}],[{"l":"TabbyAPI","p":["一个基于 FastAPI 的应用程序，允许使用 Exllamav2 后端生成文本，支持 Exl2、GPTQ 和 FP16 模型。","GitHub"]},{"l":"快速开始","p":["按照官方 TabbyAPI GitHub 上的 安装说明。","创建你的 config.yml 来设置你的模型路径、默认模型、序列长度等。如果你愿意，可以忽略大多数（如果不是全部）这些设置。","启动 TabbyAPI。如果成功，你应该会看到类似这样的内容：","TabbyAPI terminal","在 SillyTavern 的文本完成 API 下，选择 TabbyAPI。","将你的 API 密钥从 TabbyAPI 终端复制到 Tabby API key 中，并确保你的 API URL 是正确的（默认应该是 http://127.0.0.1:5000）。","如果你一切都做对了，你应该会在 SillyTavern 中看到类似这样的内容：","TabbyAPI SillyTavern","你现在可以使用 TabbyAPI 聊天了！"]},{"l":"TabbyAPI 加载器","p":["TabbyAPI 的开发者创建了一个官方扩展，可以直接从 SillyTavern 加载/卸载模型。安装步骤简单：","在 SillyTavern 中，点击扩展选项卡并导航到下载扩展和资产。","将 https://raw.githubusercontent.com/theroyallab/ST-repo/main/index.json 复制到资产 URL 中，并点击右侧的插头按钮。","你应该会看到类似的界面。点击 Tabby Loader 旁边的下载按钮。","Tabby Loader","如果安装成功，你应该会在屏幕顶部看到一个绿色的弹出消息。在扩展选项卡下，导航到 TabbyAPI Loader，并将你的管理员密钥从 TabbyAPI 终端复制到管理员密钥中。","点击模型选择旁边的刷新按钮。当你点击下面的文本框时，你应该会看到模型目录中的所有模型。","Tabby Loader Extension","你现在可以直接从 SillyTavern 加载和卸载模型！"]},{"l":"支持","p":["仍然需要帮助吗？访问 TabbyAPI GitHub 获取开发者官方 Discord 服务器的链接，并 阅读维基。"]}],[{"l":"CFG","p":["页面作者：kingbri","贡献者：kingbri, Guillaume \"Vermeille\" Sanchez, AliCat"]},{"i":"它是什么","l":"它是什么？","p":["CFG，即无分类器引导，是一种用于帮助使提示的某些部分更突出或不那么突出的技术。"]},{"l":"支持的后端 API","p":["目前，支持的后端有 oobabooga 的 textgen WebUI、NovelAI 和 TabbyAPI。NovelAI 有自己的 CFG 文档，您可以在 这里 阅读。","警告：由于处理超过 1 个提示，CFG 会增加显存使用量！如果您的 GPU 内存在生成启用 CFG 的提示时耗尽，请考虑减小上下文大小、使用参数较小的模型或完全关闭 CFG。"]},{"l":"配置","p":["访问 CFG 设置与访问作者注释相同：","CFGhamburgermenupng","以下是 CFG 面板的外观：","CFGchatpanelpng","CFG 面板中有四个下拉菜单：","聊天 CFG","将 CFG 比例和提示限制在此聊天中","角色 CFG","将 CFG 比例和提示限制在指定角色上","全局 CFG","全局覆盖 CFG 比例和提示（也覆盖模型预设！）","CFG 高级设置（以前称为 CFG 提示级联）","用于组合前面 3 个下拉菜单中的提示并设置插入深度。","注意：如果指导比例设置为 1，则不会发送任何内容，因为这时 CFG 处于“关闭”状态。"]},{"l":"群组聊天","p":["在群组聊天中，CFG 比例面板如下所示：","CFGpanelgcpng","主要变化是角色 CFG 被移除，并且在聊天 CFG 下拉菜单中出现了一个名为 使用角色 CFG 比例 的复选框。这允许使用当前角色的指导比例，而不是聊天 CFG 比例的设置。","此功能的主要用途是根据每个角色的个体需求调整比例。","此外，在提示级联中勾选 角色负面 复选框将附加独立的角色负面提示以及聊天提示（如果启用）。"]},{"l":"概念"},{"i":"这不是在-stable-diffusion-中吗","l":"这不是在 Stable Diffusion 中吗？","p":["是的，也不是。与在 Stable Diffusion 中可能习惯的方式不同，LLM 中的 CFG 工作原理是基于“提示混合”。CFG 公式采用正向和负向提示，然后混合它们之间的 差异。从那里，发送一个组合提示并生成响应！","这里有一个插图来帮助可视化这个概念。红色代表负向提示，蓝色代表中性提示，紫色代表被解释的混合结果。所有的空白区域在三个提示中都是相同的，因此这些区域不用于 CFG 混合。","stcfgdiagrampng","如果您想了解更多关于 CFG 和 LLM 的信息，Vermifuge 的原始论文在这里。我建议您阅读/收听一下：","论文 - [2306.17806] Stay on topic with Classifier-Free Guidance (arxiv.org)","音频版本 - https://www.youtube.com/watch?v=MGY00YFcyco"]},{"i":"我需要-cfg-提示吗","l":"我需要 CFG 提示吗？","p":["不需要！CFG 提示是完全可选的。只需将指导比例调整到 1 以上，也可以对响应产生影响，从而增强聊天和角色互动。"]},{"i":"什么是好的-cfg-提示","l":"什么是好的 CFG 提示？","p":["所以，我们已经确定 CFG 提示与 Stable Diffusion 的负标签和嵌入不同。我们该如何创建提示？","警告：这假设您已经使用 PLists 和 Ali:Chat 创建了一个角色。如果没有，请随意尝试各种提示技巧。","假设我有一个名叫“John”的角色。根据他的示例对话，John 应该总是感到快乐和兴奋。然而，在与 John 聊天时，他有时会感到悲伤和沮丧。","为了解决这个问题，CFG 来救援了！只需使用负提示 [John's feelings: sad, depressed] 来帮助去除悲伤的部分。您还可以选择使用正提示 [John's feelings: happy, joyful] 进一步突出 John 的快乐部分。"]},{"l":"积极提示","p":["我在上一节中提到过这一点，但我想再多谈谈。积极提示用于进一步强调角色的某些部分。我们再用约翰作为例子。通过使用积极提示 [John's feelings: happy, joyful] 使他更快乐，约翰应该开始输出带有更快乐感觉的对话，而不是不包含积极提示的情况。"]},{"i":"但是","l":"但是...","p":["这些只是基于某种特定字符格式的 宽松指南。还有许多其他创建提示的方法，您应该进行尝试。欢迎与其他用户分享您的想法！"]},{"l":"指导比例","p":["这是一个经验法则。指导比例为 1 意味着 CFG 被禁用。实际上，如果指导比例为 1，SillyTavern 将不会向您的后端发送任何内容。指导比例 1 将在不同程度上给出其他部分所示的结果。","然而，指导比例 1 将产生相反的效果，因为负提示在这里被用作主要提示。","我们再用约翰的例子。负提示是 [John's feelings: sad, depressed]，正提示是 [John's feelings: happy, joyful]，指导比例为 0.8。","这将反过来更加突出负提示，您会看到约翰开始表现得比平常更悲伤，而不是更快乐。","tldr; 使用 1.5 的指导比例，并根据您的输出在此基础上上下调整。"]},{"l":"提示级联","p":["负面和正面可以在CFG类型之间级联（类型包括每个聊天、每个角色和全局覆盖）。有关更多信息，请参见配置标题。"]},{"l":"插入深度","p":["遵循基本规则：在提示中位置越低的内容，对响应的影响越大。对于聊天，我建议使用默认深度 1，因为它与SillyTavern的其他组件非常灵活。","但是，如果你想进行实验，可以使用插入深度 0。不过，这可能会显著改变你的响应外观，不建议在这里使用提示级联！"]}],[{"l":"世界信息","p":["世界信息（也称为故事书或记忆书）增强了人工智能对您虚构世界细节的理解。","它像一个动态字典，只在消息文本中出现与条目相关的关键词时插入相关的世界信息条目。","SillyTavern 引擎激活并无缝集成适当的背景知识到提示中，为人工智能提供背景信息。","需要注意的是，虽然世界信息有助于引导人工智能朝您期望的背景知识方向发展，但并不能保证它会出现在生成的输出消息中。"]},{"l":"专业提示","p":["AI不会将关键词插入上下文，因此每个世界信息条目都应该是一个全面、独立的描述。","为了创建丰富而详细的世界背景，条目可以相互链接并相互引用。","为了节省令牌，建议保持条目内容简洁。","世界信息引擎是一个非常强大的提示管理工具。不要仅仅专注于添加角色背景，欢迎进行实验。"]},{"l":"深入阅读","p":["世界信息百科全书: 关于世界信息和背景书的详尽深入指南。作者：kingbri, Alicat, Trappu。"]},{"l":"角色背景","p":["可选地，可以为一个角色分配一个世界信息文件，以作为该角色在所有聊天（包括群组）中的专用背景资料来源。","为此，导航到角色管理面板，点击地球按钮，然后从下拉列表中选择世界信息，最后点击“确定”。"]},{"l":"角色背景插入策略","p":["在生成AI回复时，角色世界信息的条目将与全球世界信息选择器的条目结合，使用以下策略之一："]},{"i":"均匀排序默认","l":"均匀排序（默认）","p":["所有条目将根据它们的插入顺序进行排序，就好像它们是一个大文件的一部分，忽略来源。"]},{"l":"角色背景优先","p":["角色世界信息的条目将首先按其插入顺序包含，然后是全球世界信息的条目。"]},{"l":"全球背景优先","p":["全球世界信息的条目将首先按其插入顺序包含，然后是角色世界信息的条目。"]},{"l":"世界信息条目"},{"l":"关键字","p":["触发世界信息条目激活的关键字列表。默认情况下，关键字不区分大小写（这是 可配置的）。"]},{"i":"正则表达式regex作为关键字","l":"正则表达式（Regex）作为关键字","p":["关键字允许通过支持正则表达式来采用更灵活的匹配方式。这使得可以匹配更动态的内容，包括可选的单词或字符、空格以及正则表达式提供的所有其他工具。 如果定义的关键字是有效的正则表达式（Javascript正则表达式风格，以/ 作为分隔符，所有标志均可使用），在检查条目是否应该被触发时将被视为正则表达式。可以将多个正则表达式作为单独的关键字输入，并且它们可以相互配合。在正则表达式内部，可以使用逗号。普通文本关键字不支持逗号，因为它们被视为关键字分隔符。","高级正则匹配的一个使用案例示例： 在字符进行天气相关操作时应插入的条目/指令","有关正则表达式语法和可能性的更多信息： 正则表达式 - JavaScript | MDN"]},{"l":"关键字输入","p":["有两种模式可以输入关键字，每种模式的用户界面略有不同。在 纯文本模式（默认）中，关键字可以在单个文本框中作为用逗号分隔的列表输入。正则表达式也可以包含在内，但没有任何特殊的高亮显示。在 花哨模式 中，关键字作为单独的元素出现，正则表达式将被高亮显示。该控件支持编辑和删除关键字。可以通过输入控件内的内联按钮切换模式。"]},{"l":"可选过滤器","p":["与主要关键字结合使用的补充关键字列表。请参见 可选过滤器。这些关键字也支持 正则表达式。"]},{"l":"条目内容","p":["在条目激活时插入到提示中的文本。"]},{"l":"插入顺序","p":["数值。如果多个条目同时被激活，定义条目的优先级。顺序号较高的条目将更靠近上下文的末尾插入，因为它们对输出的影响更大。"]},{"l":"插入位置","p":["在角色定义之前： 世界信息条目在角色的描述和场景之前插入。对对话有中等影响。","在角色定义之后： 世界信息条目在角色的描述和场景之后插入。对对话有更大的影响。","在示例消息之前： 世界信息条目作为示例对话块解析，并在角色卡提供的示例之前插入。","在示例消息之后： 世界信息条目作为示例对话块解析，并在角色卡提供的示例之后插入。","在作者注释顶部： 世界信息条目在作者注释内容的顶部插入。根据作者注释的位置，影响程度可变。","在作者注释底部： 世界信息条目在作者注释内容的底部插入。根据作者注释的位置，影响程度可变。","@ D： 世界信息条目在聊天中的特定深度插入（深度0为提示的底部）。","⚙️ - 作为系统角色消息","\uD83D\uDC64 - 作为用户角色消息","\uD83E\uDD16 - 作为助手角色消息","示例消息条目将根据提示构建设置进行格式化：指令模式或聊天完成提示管理器。它们还遵循示例消息行为规则：在完整上下文中逐渐被推送出去，始终保留或完全禁用。","如果您的作者注释被禁用（插入频率= 0），则作者注释位置的世界信息条目将被忽略！"]},{"i":"条目标题--备忘录","l":"条目标题 / 备忘录","p":["一个文本字段，方便您标记条目，AI或任何触发逻辑都不会使用该字段。","如果为空，可以通过单击“填充空备忘录”按钮使用条目的第一个关键字进行填充。"]},{"l":"状态","p":["\uD83D\uDD35（蓝色圆圈）= 条目将始终出现在提示中。","\uD83D\uDFE2（绿色圆圈）= 条目仅在存在关键字时触发。","\uD83D\uDD17（链条链接）= 条目允许通过嵌入相似性插入。","❌（红色叉）= 条目已禁用。"]},{"i":"可选过滤器-1","l":"可选过滤器","p":["与主要关键字结合使用的附加关键字的逗号分隔列表。 如果未提供任何参数，则此标志将被忽略。 支持AND ANY、NOT ANY或NOT ALL的逻辑。","AND ANY = 仅在主要关键字和任何一个可选过滤器关键字在扫描上下文中时激活条目。","AND ALL = 仅在主要关键字和所有可选过滤器关键字都存在时激活条目。","NOT ANY = 仅在主要关键字和没有任何可选过滤器关键字在扫描上下文中时激活条目。","NOT ALL = 如果所有可选过滤器在扫描上下文中，则阻止激活条目，尽管触发了主要关键字。"]},{"l":"概率","p":["该值充当附加过滤器，在条目通过任何方式激活时（常量、主要关键字、递归），增加该条目不被插入的机会。","概率= 100意味着条目将在每次激活时插入。","概率= 50意味着条目将以1:1的机会插入。","概率= 0意味着条目将不被插入（实际上禁用它）。","使用此功能在聊天中创建随机事件。例如，每条消息都有1%的机会唤醒一个古老的神，如果在消息中提到它的名字。"]},{"l":"包含组","p":["包含组控制在多个具有相同组标签的条目同时被触发时如何选择条目。如果多个具有相同组标签的条目被激活，只有一个将插入到提示中。","默认情况下，选择的条目是根据其组权重随机选择的（默认是100分）——数字越高，选择的概率越高。这允许在触发的条目中进行随机选择，为交互增添了一定的惊喜和多样性。","单个条目可以属于多个包含组，如果它们被定义为逗号分隔的列表。上述逻辑同样适用。如果该条目被触发，它将 禁用 所有其他属于其任何组的条目。因此，如果激活了任何组，该条目将不会被激活。"]},{"l":"优先包含","p":["为了提供更多控制，通过 包含组 激活哪些条目，您可以使用“优先包含”设置。此选项允许您确定性地选择哪个条目，而不是随机滚动组权重机会。","如果多个具有相同组标签且此设置开启的条目被激活，将选择“顺序”值最高的那个。这对于通过包含组创建回退序列非常有用。例如，优先选择低深度条目以获得更多强调，或者在两个都有效的情况下选择设置场景的特定指令。"]},{"l":"使用组评分","p":["当此设置在全局或每个条目中启用时，激活的条目关键字的数量决定了组胜利者的选择。只有具有最高关键字匹配数量的组子集将被允许通过组权重或包含优先级激活——其余将被禁用并从组中移除。","使用此功能为大型组中的单个条目提供更多特异性。例如，它们可以具有一个共同的关键字和一个特定的关键字。当未提供特定关键字时，将插入随机条目，反之亦然。","主要关键字的评分计算逻辑为1个匹配= 1分。","对于次要关键字，交互取决于所选的选择逻辑：","AND ANY：1个次要匹配= 1分。","AND ALL：如果所有次要关键字都匹配，则每个次要关键字得1分。","NOT ANY和NOT ALL：没有变化。","示例：","条目 1. 关键字：song, sing, Black Cat。组：songs","条目 2. 关键字：song, sing, Ghosts。组：songs","输入 sing me a song 可以激活任意条目（两个都激活了2个关键字），但 sing me a song about Ghosts 将仅激活条目2（激活了3个关键字）。"]},{"l":"自动化ID","p":["允许将世界信息条目与 ST脚本 从快速回复扩展集成。如果快速回复命令和世界信息条目具有相同的自动化ID，则在激活具有匹配ID的条目时，该命令将自动执行。","自动化将按照触发的顺序执行，遵循您指定的排序策略，将 角色背景插入策略 与“优先级”排序结合在一起。这导致 蓝色圆圈 条目首先被处理，随后是其他条目，按其指定的“顺序”处理。递归触发的条目将在相同顺序后处理。","如果多个具有相同自动化ID的条目被激活，脚本命令将仅运行一次。"]},{"l":"向量存储匹配","p":["向量存储扩展通过使用最近聊天消息与世界信息条目内容之间的相似性，提供了一种替代关键字匹配的方法。","要启用并使用此功能，需要满足以下先决条件：","向量存储扩展已启用，并配置为使用可用的嵌入源之一。","在向量存储扩展设置中勾选“为世界信息启用”复选框。","允许无关键字匹配的世界信息条目具有“向量化”（\uD83D\uDD17）状态，或者在向量存储设置中勾选“为所有条目启用”选项。","扩展中的向量化模型选择和“嵌入”一词背后的理论含义在此不作讨论。如果您需要更多关于此主题的信息，请查看 数据银行 指南。","向量存储匹配遵循以下规则：","允许与向量存储匹配的最大条目数可以通过“最大条目”设置进行调整。此数字仅设置限制，不影响在世界信息的激活设置中设定的令牌预算。所有预算规则仍然适用。","此功能仅替代对关键字的检查。条目插入仍需满足所有附加检查：触发器%、角色过滤器、包含组等。","不使用激活设置或条目覆盖中的“扫描深度”设置。改为使用向量存储的“查询消息”值来获取匹配文本。这允许将“扫描深度”配置为0，因此不会进行常规关键字匹配，但条目仍然可以通过向量激活。","“向量化”状态仅是一个附加标记。该条目仍会像正常的、启用的、非恒定记录一样，如果设置了关键字，则将通过关键字激活。如果希望条目仅通过向量激活，请移除关键字。","由于检索质量完全依赖于嵌入模型的输出，因此无法准确预测将插入哪些条目。如果您希望获得确定性和可预测的结果，请坚持使用关键字匹配。"]},{"l":"定时效果","p":["通常，世界信息评估是无状态的，这意味着评估的结果是相同的，仅依赖于当前的聊天上下文。然而，随着定时效果的引入，您可以创建具有激活延迟的条目、在触发后保持激活的条目，或在激活后无法触发的条目。"]},{"l":"定时效果规则","p":["效果的时间框架以消息为单位进行测量（而不是消息对/交换），0表示没有效果。","效果仅适用于激活条目的聊天。分支继承父聊天的状态。","如果聊天没有进展，主动定时效果将被移除，例如，如果最后一条消息被滑动或删除。","对当前处于定时效果中的条目进行任何更改将导致效果被强制移除。","连续触发关键词不会刷新效果持续时间，如果它已经处于激活状态。"]},{"l":"定时效果的类型","p":["Sticky - 条目在激活后会在 N 条消息中保持有效。粘性条目在过期之前会忽略后续扫描中的概率检查。","Cooldown - 条目在激活后 N 条消息内无法被激活。可以与粘性一起使用：当粘性持续时间结束时，条目进入冷却状态。","Delay - 条目无法被激活，除非在评估时聊天中至少有 N 条消息。","Delay = 0 -> 条目可以在任何时候被激活。","Delay = 1 -> 如果聊天为空（没有问候），则条目无法被激活。","Delay = 2 -> 如果聊天中没有消息或只有一条消息，则条目无法被激活，等等。"]},{"l":"定时效果示例","p":["条目配置：sticky = 3，cooldown = 2，delay = 2。"]},{"l":"激活设置","p":["在世界信息屏幕顶部的可折叠菜单。"]},{"l":"扫描深度","p":["可以在条目级别被覆盖。","定义在聊天历史中应扫描多少条消息以获取世界信息键。","如果设置为 0，则仅评估递归条目和作者注释。","如果设置为 1，则 SillyTavern 仅扫描最后一条消息。","2 = 最近两条消息，依此类推。"]},{"i":"上下文---预算","l":"上下文 % / 预算","p":["定义了 World Info 条目一次可以使用多少个令牌。 您可以定义相对于 API 的最大上下文设置的阈值（上下文 %）或一个目标令牌阈值（预算）","如果预算耗尽，则即使提示中存在键，也不会激活更多条目。","常量条目将首先插入。然后是具有更高顺序号的条目。","通过直接提及其键插入的条目优先级高于在其他条目内容中提及的条目。"]},{"l":"最小激活","p":["最小激活：如果设置为非零值，这将忽略“扫描深度”的限制，从最新消息开始向后搜索聊天记录中的关键字，直到触发的条目数量达到最小激活中指定的数量。这仍然会受到最大深度设置或您整体预算上限的限制。","由最小激活触发的额外扫描将不会检查之前步骤中递归添加的条目。只有聊天消息和扩展提示可以触发这些额外的激活。然而，最小激活触发的条目可以像往常一样触发其他条目。"]},{"l":"最大深度","p":["使用最小激活设置时扫描的最大深度。"]},{"l":"递归扫描","p":["递归扫描允许条目激活其他条目或被其他条目激活，从而实现不同世界信息条目之间的复杂交互和依赖关系。此功能可以显著增强您的叙事或角色扮演场景的动态特性。 是否启用递归扫描可以通过全局设置 递归扫描 进行控制。 每个条目的递归控制有三个选项：","不可递归：当选中此复选框时，该条目将不会被其他条目激活。这对于不应该改变或受其他世界信息条目影响的静态信息非常有用。","防止进一步递归：选择此选项可确保一旦激活该条目，就不会触发其他条目。这有助于避免意外的激活链。","延迟直到递归：该条目仅在递归检查期间激活，这意味着它不会在首次扫描中被触发，但可以被启用递归的其他条目激活。这对于只有在特定引用其他条目时才应发挥作用的更深层次信息，或在激活其他内容时故意保留的信息非常有用。","条目可以通过在内容文本中提及其关键字来激活其他条目。","例如，如果您的世界信息包含两个条目：","如果消息文本仅提到 Bessie ，那么这两个条目都将被拉入上下文。"]},{"l":"区分大小写的键","p":["可以在条目级别被覆盖。","要被拉入上下文，条目键需要与在 World Info 条目中定义的大小写匹配。","当你的键是常见词或常见词的一部分时，这一点非常有用。","例如，当此设置处于活动状态时，键 'rose' 和 'Rose' 将根据输入被视为不同。"]},{"l":"匹配整个单词","p":["可以在条目级别覆盖。","仅当搜索文本中存在整个单词时，才会匹配仅包含一个单词的键的条目。默认情况下启用。","例如，如果该设置启用且条目键为 \"king\"，则文本 \"long live the king\" 将被匹配，但 \"it's not to my liking\" 则不会。"]},{"l":"溢出警报","p":["如果激活的世界信息超过分配的令牌预算，则显示警报。"]}],[{"l":"人物管理"},{"i":"什么是角色","l":"什么是角色？","p":["在SillyTavern中，角色代表了一个用户名称和一张图片的组合，形成了你在聊天中扮演的角色或自我识别的独特身份。","创建用户角色是可选的，但这是一种自动化常规操作的好方法。"]},{"i":"如何创建一个角色","l":"如何创建一个角色？","p":["要创建一个角色：","在顶部栏中打开角色管理面板（微笑脸图标）。","选择一个现有的头像，或使用虚拟图像创建一个空白角色（“创建”按钮）。","在列表中找到角色，选择最左侧的上下文操作按钮（“将名称绑定到该头像”）。","在弹出窗口中输入所需的名称。通过点击“确定”按钮确认。","该头像现在代表一个角色。点击头像以选择它，这也会自动更新用户名。"]},{"l":"人物描述","p":["此字段的内容代表您希望绑定到所选人物的任何特定信息。 它可以是您用户角色的任何描述：心理和身体特征、年龄、职业等。 在这里，您还可以使用替换宏，例如 {{user}}、{{char}} 和其他支持的参数。","如果定义了，人物描述将插入到 AI 提示的所选位置之一：","在提示管理器（聊天完成 API）或故事字符串（其他 API）中。这是默认位置。","作者注释的顶部（如果未禁用作者注释）。","作者注释的底部（如果未禁用作者注释）。","但是，请记住，在您为未绑定头像设置用户描述时选择人物将不会保留您的更改。","要永久保存用户描述，请将当前选择的头像绑定到用户名。"]},{"l":"人物锁定","p":["一个选择的人物可以被锁定到当前打开的个人或群组聊天。如果当前选择的人物与锁定的人物不同，则在打开该聊天时将自动选择锁定的人物。"]},{"l":"锁定一个角色","p":["打开一个聊天（可以是群聊或个人聊天）。","通过点击其头像选择一个所需的角色。","点击名称输入框旁边按钮行中的锁定图标。","要撤销此操作，请点击解锁图标。这样在重新打开聊天时，角色将不会自动更改。","或者，您可以使用 /lock 和 /unlock 斜杠命令来实现相同的结果。"]},{"l":"默认角色","p":["您可以选择一个角色作为您首选的默认身份，自动为所有新聊天和未锁定角色的聊天选择该身份。 默认角色在角色管理面板上以黄色轮廓表示。","要将角色设置为默认，请点击角色块中的“皇冠”按钮，然后确认您的操作。","要撤销此操作并取消默认角色，请再次点击“皇冠”按钮。"]},{"l":"专业提示","p":["在聊天中切换用户角色不会自动更改之前发送的用户消息的归属。这样可以同时扮演多个用户角色。","通过点击角色管理面板上的“同步”按钮或使用 /sync 斜杠命令，可以将当前打开聊天中所有用户发送的消息归属到当前选定的角色。","要在不删除角色的情况下更改角色图像，请将鼠标悬停在角色管理面板上的头像上，然后点击左下角的按钮。然后选择新图像，它将被替换，同时保留您设置的描述和聊天锁定状态。","要在聊天中快速更改角色而无需打开角色管理面板，请使用 /persona 斜杠命令。例如，/persona Blaze。","如果需要，您可以备份您的角色并使用之前保存的文件进行恢复。请在角色管理面板中查找“备份”和“恢复”按钮。"]}],[{"l":"作者注释"},{"i":"什么是它","l":"什么是它？","p":["作者注释是一个强大的工具，可以自定义AI响应，它可以在您希望的任何位置和频率将一段文本插入到提示中。"]},{"l":"使用方法","p":["作者说明可以在聊天输入框左侧的选项菜单中找到。","选项菜单","作者说明面板"]},{"l":"配置作者注释"},{"l":"聊天特定的作者注释","p":["作者注释面板顶部的框中包含您当前聊天的作者注释。","此框中的内容不会自动转移到任何新聊天中。"]},{"l":"放置选项"},{"l":"场景之后","p":["这将作者注释放置在角色定义的“场景”部分之后，接近上下文的顶部。如果没有指定场景，它将被放置在角色定义的最后部分之后，且在示例消息之前。"]},{"l":"聊天中","p":["这将作者注释放置在指定深度的聊天记录中。","深度 0 = 放置在聊天记录的最末端。","深度 4 = 放置在最近的 3 条聊天记录消息之前，使其成为聊天记录中的第 4 个实体。","作者注释越接近提示的底部，对下一个 AI 响应的影响就越大."]},{"l":"插入频率","p":["这就是您希望作者注释在聊天中包含的频率。","频率 0 = 作者注释将永远不会被插入。","频率 1 = 作者注释将在每个用户输入提示中插入。","频率 4 = 作者注释将在每第 4 个用户输入提示中插入。"]},{"l":"默认作者注释","p":["面板底部的框包含将应用于每个新聊天的默认作者注释。"]},{"l":"常见用例"},{"l":"提醒AI响应格式","p":["作者注释可用于指定AI应如何撰写其响应。","[您下一个响应必须为300个标记。]","[以埃德加·爱伦·坡的风格写下您的下一个回复]","[使用markdown斜体来表示未说出的动作，使用引号来指定口头表达。]"]},{"l":"强化指令","p":["[记住您在本次聊天开始时收到的指令。]"]},{"i":"作为临时世界信息角色偏见或对非指令模型的指示","l":"作为临时世界信息、角色偏见或对非指令模型的指示","p":["[{{char}}在图书馆中]","[{{user}}的腿上有一个新伤口，因此无法逃跑。]","[{{char}}无法说话，必须使用手势进行交流。]"]}],[{"l":"指令模式","p":["指令模式允许您调整针对各种提示格式（如Alpaca、ChatML、Llama2等）训练的指令跟随模型的提示。"]},{"l":"API 支持"},{"l":"文本补全 API","p":["完全支持。这包括：","文本补全下的所有来源","KoboldAI Classic","AI Horde"]},{"l":"选择格式","p":["所选的指令模板必须符合实际在后端运行的模型的预期。","这通常在 HuggingFace 上的模型卡中反映出来，有些甚至提供与 SillyTavern 兼容的 JSON 文件。","示例： NeverSleep/Noromaid-13b-v0.1.1"]},{"i":"聊天完成-api-openai-claude-等","l":"聊天完成 API (OpenAI, Claude 等)","p":["这对于聊天完成 API （并且不需要） 是不支持的。它们使用完全不同的提示构建器。","例外：启用指令覆盖的 OpenRouter。这是一个遗留设置，最终会被移除。"]},{"l":"NovelAI","p":["虽然 技术上 支持NovelAI，但他们的模型并没有经过训练以理解指令格式。Kayra使用一个特殊的指令模块，当在聊天消息中遇到用大括号包裹的指令时，该模块会 自动 激活，因此在整个提示中使用指令模式会导致输出的 质量下降。","以下是一个自动激活NovelAI指令模块的示例："]},{"l":"指令模式设置"},{"l":"预设","p":["提供一些知名指令模型的现成预设，包括提示和序列。","更改预设会将您的系统提示重置为默认值！如果您进行了不想丢失的更改，请不要忘记保存您的预设。"]},{"i":"默认预设心形图标","l":"默认预设（心形图标）","p":["如果切换，连接到API时将自动选择此预设，前提是没有其他预设被正则表达式匹配触发。","指令模式需要事先启用。只能将一个预设标记为默认。"]},{"l":"激活正则表达式","p":["如果定义为有效的正则表达式，当连接到模型并且其名称与该正则表达式匹配时，将自动选择该预设。","在此之前需要启用指令模式。只有在预设中第一个正则表达式匹配项会被选择（按字母顺序评估）。"]},{"l":"用换行符包裹序列","p":["每个序列文本在插入提示时将用换行符包裹。对于Alpaca及其衍生产品是必需的。","如果希望完全控制行终止符，请禁用此选项。"]},{"l":"在序列中替换宏","p":["如果启用，已知的 {{macro}} 替换将在消息包装序列中定义时被替换。","此外，可以在消息前缀中使用特殊的 {{name}} 宏来引用附加到消息的实际名称（而不是当前活动的 {{char}} 或 {{user}}），这在使用群聊或 /sendas 命令时非常有用。如果无法确定名称，将使用“系统”作为后备占位符。"]},{"l":"包含名称","p":["如果启用，在插入序列后将角色和用户名添加到聊天历史记录日志中。","对于群聊和使用角色发送的消息自动启用，除非强制适用于群组和角色设置未勾选！"]},{"l":"系统提示","p":["通常添加到每个提示的开头。应定义模型要遵循的指令。支持通过任何支持的 {{宏}} 参数进行替换。","例如：","为 {{char}} 写一条互联网角色扮演风格的回复。要详细且富有创意。"]},{"i":"序列系统提示包装","l":"序列：系统提示包装","p":["定义系统提示的包装方式。"]},{"l":"系统提示前缀","p":["插入在系统提示之前。"]},{"l":"系统提示后缀","p":["插入在系统提示之后。","重要： 这仅适用于系统提示本身，而 不是 整个故事字符串！如果您想要包装故事字符串，请在上下文模板部分将这些序列添加到故事字符串模板中。"]},{"i":"序列聊天消息包装","l":"序列：聊天消息包装","p":["这些设置定义了不同角色的消息在构建提示时如何被包装。","所有前缀序列也将自动用作停止字符串。"]},{"l":"用户消息前缀","p":["在用户消息之前插入，并作为模拟时的最后一行提示。"]},{"l":"用户消息后缀","p":["在用户消息之后插入。"]},{"l":"助手消息前缀","p":["在助手消息之前插入，并作为生成AI回复时的最后一行提示。"]},{"l":"助手消息后缀","p":["在助手消息之后插入。"]},{"l":"系统消息前缀","p":["在系统（由斜杠命令或扩展添加）消息之前插入。"]},{"l":"系统消息后缀","p":["在系统消息之后插入。"]},{"l":"系统与用户相同","p":["如果选中，系统消息将使用用户角色消息序列。","否则，系统消息将使用它们自己的序列（如果不为空），或者根本不进行任何包装（如果为空）。"]},{"l":"Misc. Sequences","p":["各种高级配置，用于更精细地调整提示构建"]},{"l":"First Assistant Prefix","p":["插入在第一个助手消息之前。","只有 聊天记录 的第一条消息算数，而不是实际进入提示的第一条消息！"]},{"l":"Last Assistant Prefix","p":["插入在最后一个助手消息之前，或作为生成AI回复时的最后提示行。","在生成后台文本时不使用（例如，Stable Diffusion提示或摘要）。将使用系统指令前缀或常规助手前缀。"]},{"l":"System Instruction Prefix","p":["在生成中性/系统文本的后台时，作为最后提示行插入（例如，Stable Diffusion提示或摘要）。"]},{"l":"User Filler Message","p":["如果聊天记录不以用户消息开始，将在聊天记录开始时插入。","用例： 当指令格式 严格要求 提示以用户为先，并且只有交替角色的消息时，例如：Llama 2 Chat，Mistral Instruct。"]},{"l":"Stop Sequence","p":["表示回复结束的文本。也作为停止字符串发送到后台API。","如果生成了停止序列，输出中将删除它之后的所有内容（包括该序列本身）。"]}],[{"i":"数据库-rag","l":"数据库 (RAG)","p":["检索增强生成 (RAG) 是一种为 LLM 提供外部知识来源的技术。它通过访问模型训练数据之外的信息，帮助提高 AI 答案的准确性。","SillyTavern 提供了一套工具，用于从多种来源构建多用途知识库，以及在 LLM 提示中使用收集的数据。"]},{"l":"访问数据银行","p":["内置的聊天附件扩展（在版本 >= 1.12.0 的发布版本中默认包含）在“魔法棒”菜单中添加了一个新选项 - 数据银行。这是您在 SillyTavern 中管理可用于 RAG 的文档的中心。"]},{"l":"关于文档","p":["数据银行存储文件附件，也称为文档。文档分为三种可用范围。","全球附件 - 在每个聊天中可用，无论是单人还是群组。","角色附件 - 仅在当前选择的角色中可用，包括在他们回复群组时。 附件是本地保存的，不会与角色卡一起导出！","聊天附件 - 仅在当前打开的聊天中可用。聊天中的每个角色都可以从中提取。","虽然不正式属于数据银行，但您可以将文件附加到单独的消息中。使用“魔杖”菜单中的附加文件选项，或在消息操作行中的回形针图标。","什么可以成为文档？实际上任何可以用纯文本形式表示的东西！","示例包括但不限于：","本地文件（书籍、科学论文等）","网页（维基百科、文章、新闻）","视频转录本","各种扩展和插件也可以提供新的数据收集和处理方式，更多内容见下文。"]},{"l":"数据源","p":["要将文档添加到任何范围，请单击“添加”并选择可用的源之一。"]},{"l":"记事本","p":["从头创建一个文本文件，或编辑现有的附件。"]},{"l":"文件","p":["从计算机的硬盘上传文件。SillyTavern 提供了流行文件格式的内置转换器：","PDF（仅文本）","HTML","Markdown","ePUB","TXT","您还可以附加任何具有非标准扩展名的文本文件，例如 JSON、YAML、源代码等。如果所选文件类型没有已知的转换，并且该文件无法被解析为纯文本文档，则文件上传将被拒绝，这意味着不允许上传原始二进制文件。","导入 Microsoft Office（DOCX、PPTX、XLSX）和 LibreOffice 文档（ODT、ODP、ODS）需要安装并加载 服务器插件。有关安装说明，请参见插件的 README 页面。"]},{"l":"网络","p":["通过其 URL 从网页中抓取文本。然后通过 Readability 库处理 HTML 文档，以提取仅可用的文本。","某些网络服务器可能会拒绝抓取请求，受到 Cloudflare 的保护，或严重依赖 JavaScript 才能正常工作。如果您在特定网站上遇到问题，请通过网页浏览器手动下载该页面，并使用文件上传器附加它。"]},{"l":"YouTube","p":["通过视频的ID或URL下载YouTube视频的文字稿，文字稿可以是创作者上传的或由Google自动生成的。某些视频可能禁用了文字稿，此外，因需要登录，无法解析年龄限制的视频。","脚本以视频的默认语言加载。可选地，您可以指定两个字母的语言代码，尝试以特定语言获取文字稿。此功能并非总是可用，可能会失败，因此请谨慎使用。"]},{"l":"网络搜索","p":["此资源需要安装并正确配置 Web Search 扩展。有关更多详细信息，请参见链接页面。","执行网络搜索并下载搜索结果页面中的文本。这类似于网络源，但完全自动化。所选择的搜索引擎将从扩展设置中继承，因此请提前进行设置。","要开始，请指定搜索查询、要访问的最大链接数量和输出类型：一个合并的文件（根据扩展规则格式化）或每个页面的单独文件。您还可以选择保存页面摘要。"]},{"l":"Fandom","p":["此来源需要安装并加载 Server Plugin。请参阅插件的README页面以获取安装说明。","通过其ID或URL从 Fandom 维基抓取文章。由于某些维基非常庞大，限制使用过滤正则表达式的范围可能会很有益，它将针对文章的标题进行测试。如果未提供过滤器，则所有页面都将被导出。您可以将它们保存为每个页面的单独文件，或合并为一个文档。"]},{"i":"bronie-parser-extension-第三方","l":"Bronie Parser Extension (第三方)","p":["此来源来自第三方，与 SillyTavern 团队 无关。此来源要求您安装 Bronya Rand 的 Bronie Parser Extension，以及需要解析器才能工作的服务器插件。","Bronya Rand 的 Bronie Parser Extension 允许将第三方抓取工具（例如 miHoYo/HoYoverse 的 HoYoLab）引入 SillyTavern，类似于其他数据来源。","目前，Bronya Rand 的 Bronie Parser Extension 支持以下内容：","miHoYo/HoYoverse 的 HoYoLab（用于原神/崩坏：星穹铁道）通过 HoYoWiki-Scraper-TS","要开始，请按照其 安装指南 安装 Bronya Rand 的 Bronie Parser Extension，并在 SillyTavern 中安装一个受支持的服务器插件。重启 SillyTavern，进入 数据银行 菜单。点击 + 添加，您应该会看到最近安装的抓取工具已被添加到可获取信息的来源列表中。"]},{"l":"向量存储","p":["所以，您已经为您的特定主题构建了一个完善的信息库。接下来该怎么办？","要将文档用于 RAG，您需要使用一个兼容的扩展，它将相关数据插入到 LLM 提示中。","向量存储，作为 SillyTavern 的一部分，是此类扩展的参考实现。它使用嵌入（也称为向量）来搜索与您正在进行的聊天相关的文档。","嵌入是数字数组，抽象地表示一段文本，由专业语言模型生成。相似的文本之间的向量距离较短。","向量存储扩展使用 Vectra 库来跟踪文件嵌入。它们存储在您用户数据目录的 /vectors 文件夹中的 JSON 文件中。每个文档在内部由其自己的索引/集合文件表示。","由于向量功能默认是禁用的，您需要打开扩展面板（顶部栏上的“堆叠立方体”图标），然后导航到“向量存储”部分，并在“文件向量化设置”下勾选“启用文件”复选框。","向量存储本身不会生成任何向量，您需要使用一个兼容的嵌入提供者。"]},{"l":"向量提供者"},{"l":"本地","p":["这些来源是免费的，且没有限制，使用您的 CPU/GPU 来计算嵌入。","本地 (Transformers) - 在 Node 服务器上运行。SillyTavern 会自动从 HuggingFace 下载兼容的 ONNX 格式模型。默认模型： jina-embeddings-v2-base-en。","附加功能 - 在 Extras API 下运行，使用 SentenceTransformers 加载器。默认模型： all-mpnet-base-v2。","Ollama - 从 https://ollama.com/ 获取。在 API 连接菜单中设置 API URL（在文本补全下，默认： http://localhost:11434）。必须先下载兼容的模型，然后在扩展设置中设置其名称。示例模型： mxbai-embed-large。可选，勾选一个选项以保持模型加载在内存中。","llama.cpp 服务器 - 从 ggerganov/llama.cpp 获取，并使用 --embedding 标志运行服务器可执行文件。从 HuggingFace 加载兼容的 GGUF 嵌入模型，例如 nomic-ai/nomic-embed-text-v1.5-GGUF。","vLLM - 从 vllm-project/vllm 获取。首先在 API 连接菜单中设置 API URL 和 API 密钥。"]},{"l":"API 源","p":["所有这些源都需要相应服务的 API 密钥，并且通常会有使用费用，但一般来说，计算嵌入的成本相对较低。","OpenAI","Cohere","Google MakerSuite","TogetherAI","MistralAI","NomicAI","嵌入仅在使用生成它们的相同模型检索时可用。更改嵌入模型或源时，建议清除并重新计算文件向量。"]},{"l":"向量化设置","p":["在选择了嵌入提供者之后，请不要忘记配置其他设置，这些设置将定义处理和检索文档的规则。","从附件中拆分、向量化和检索信息需要一些时间。虽然文件的初始摄取可能需要一段时间，但RAG搜索查询通常足够快速，不会造成显著的延迟。"]},{"l":"消息附件","p":["这些设置控制直接附加到消息中的文件。","以下规则适用：","只有适合 LLM 上下文窗口的消息才能检索其附件。","当向量存储扩展禁用时，文件附件及其附带的消息将完全插入到提示中。","当文件向量化启用时，文件将被拆分成多个块，仅插入最相关的部分，从而节省上下文空间并使模型保持专注。","大小阈值 (KB) - 设置块拆分的阈值。只有大于指定大小的文件才会被拆分。","块大小 (chars) - 设置单个块的目标大小（以文本字符为单位，而不是模型令牌！）。","块重叠 (%) - 设置相邻块之间共享的块大小的百分比。这允许块之间更平滑的过渡，但也可能引入一些冗余。","检索块 - 设置要检索的最相关文件块的最大数量。它们将按原始顺序插入。"]},{"l":"数据库文件","p":["这些设置控制如何处理数据库文档。","适用以下规则：","当文件向量化被禁用时，数据库将不被使用。","否则，当前范围内的所有可用文档（见上文）将被考虑用于查询。仅检索所有文件中最相关的片段。来自同一文件的多个片段将按其原始顺序插入。","插入的片段将在适应聊天消息之前保留一部分上下文。","大小阈值 (KB) - 设置片段分割的阈值。只有大于指定大小的文件才会被分割。","片段大小 (chars) - 设置单个片段的目标大小（以文本字符计算，而不是模型标记！）。","片段重叠 (%) - 设置相邻片段之间共享的片段大小的百分比。这允许片段之间更平滑的过渡，但也可能引入一些冗余。","检索片段 - 设置要检索的文件片段的最大数量。此配额在所有文件之间共享。","注入模板 - 定义检索到的信息如何插入到提示中。您可以使用特殊的 {{text}} 宏来指定检索文本的位置，以及任何其他宏。","注入位置 - 设置插入提示注入的位置。适用与作者注释和世界信息相同的规则。"]},{"l":"共享设置","p":["查询消息 - 将使用多少最新的聊天消息来查询文档片段。","分数阈值 - 调整以允许根据相关性分数（0 - 完全不匹配，1 - 完美匹配）筛选片段的检索。较高的值允许更准确的检索，并防止完全随机的信息进入上下文。合理的值范围在 0.2（更宽松）和 0.5（更集中）之间。","包含在世界信息扫描中 - 检查是否希望注入的内容激活背景书条目。","全部向量化 - 强制摄取所有未处理文件的嵌入。","清除向量 - 清除文件嵌入，允许重新计算它们的向量。","\"聊天向量化\"设置超出了本指南的范围，将不在此处涵盖。"]},{"l":"结论","p":["恭喜你！你的聊天体验现在得益于 RAG 的强大功能。它的能力仅受限于你的想象力。和往常一样，不要害怕尝试！"]}],[{"l":"斜杠命令","p":["/autobg – 根据聊天上下文自动更改背景（别名：/bgauto）","/bg (filename) – 根据文件名设置背景，允许部分名称，如果多个文件以提供的参数字符串开头，将按字母顺序设置第一个（别名：/background）","/bind – 将角色（名称和头像）绑定/解绑到当前聊天","/depth (number) – 为聊天中的位置设置作者注释深度","/freq (number) – 设置作者注释插入频率（别名：/interval）","/help – 显示此帮助信息（别名：/?）","/lock – 锁定当前选定聊天的背景","/name (name) – 设置用户名和角色头像（如果已设置）（别名：/persona）","/note (text) – 为当前选定的聊天设置作者注释","/pos (chat or scenario) – 设置作者注释位置（别名：/position）","/roll (dice formula) – 掷骰子。例如，/roll 2d6（别名：/r）","/sd (argument) – 请求 SD 制作图像。支持的参数：","/sendas – 以特定角色发送消息。","/sync – 在当前聊天中同步用户属性消息中的用户名","/sys (text) – 以系统叙述者身份发送消息","/sysname (name) – 为此聊天中的未来系统叙述者消息设置名称（仅显示）。默认值：System。留空以重置。","/taskcheck – 检查当前任务是否已完成","/unlock – 解锁当前选定聊天的背景","任何其他内容将触发 \"自由模式\"，使 SD 生成您提示的任何内容。 示例：'/sd apple tree' 将生成一张苹果树的图片。","示例：","要获取您实例中可用命令的最新列表，请在任何 SillyTavern 聊天中使用 /help slash 聊天命令。","这不是一个详尽的列表，因为它更新得不频繁。"]}],[{"l":"用户界面自定义"},{"l":"UI 自定义"},{"l":"消息声音","p":["要在收到来自机器人的新消息时播放您自己的自定义声音，请替换 SillyTavern 文件夹中的以下 MP3 文件：","public/sounds/message.mp3","音量为 80%。","如果启用了“仅背景声音”选项，则声音仅在 SillyTavern 窗口 未聚焦 时播放。"]},{"l":"UI 颜色","p":["您可以使用颜色选择器和滑块以多种方式自定义 UI。","您还可以保存预设并与其他用户共享（保存在 /data/user-handle/themes/ 中）。"]},{"l":"高级用户选项"},{"l":"公式渲染","p":["启用数学公式渲染，使用 showdown-katex 包。","支持以下格式规则："]},{"l":"LaTeX 语法"},{"l":"Asciimath 语法","p":["更多信息： KaTeX"]}],[{"l":"群聊"},{"l":"回复顺序策略","p":["决定群聊中角色的回复顺序。"]},{"l":"自然顺序","p":["尝试模拟真实人类对话的流动。算法如下：","从聊天中的最后一条消息中提取群组成员名称的提及。","只有完整的单词被识别为提及！如果你的角色名字是“御坂美琴”，他们只会在提及“御坂”或“美琴”时回复，而不会对“Misa”、“电击”等作出回应。","除非启用了“允许自我回应”设置，否则角色不会对自己消息中提及的名字作出回复！","角色通过“健谈度”因素被激活。","健谈度定义了角色在未被提及时说话的频率。在角色编辑器的“高级定义”屏幕上调整此值。滑块值在 0% / 害羞（角色除非被提及，否则从不说话）到 100% / 健谈（角色总是回复）之间呈线性比例。新角色的默认值为50%的机会。","随机选择一个角色。","如果在前面的步骤中没有激活任何角色，则随机选择一个发言者，忽略所有其他条件。"]},{"l":"列表顺序","p":["角色根据在群组成员列表中的顺序进行排列。没有其他规则适用。"]},{"l":"群组生成处理模式","p":["此设置决定如何处理群聊成员的角色信息。无论选择什么，群聊历史始终在所有成员之间共享。"]},{"l":"交换角色卡片","p":["默认模式。每次生成消息时，仅包含当前发言者的角色卡片信息。"]},{"l":"加入角色卡片","p":["所有群组成员的信息（如果他们不是当前发言者，则不包括静音的成员）按列表顺序合并为一个。这在不希望大幅改变上下文的情况下会有所帮助，例如在使用 llama.cpp 时。","以下字段被合并：","描述","场景，如果未为聊天覆盖","个性","消息示例","角色备注 / 深度提示","重要！ 请注意，由于典型角色卡片的结构，使用此模式可能会导致意想不到的行为，包括但不限于：角色对自己感到困惑、个性合并、不确定的特征等。"]},{"l":"其他群聊菜单选项"},{"l":"静音角色","p":["群聊菜单中角色头像旁边的划线对话气泡图标可以禁用或启用特定角色在聊天中的回复。"]},{"l":"强制发言","p":["群聊菜单中角色头像旁边的对话气泡图标将仅触发特定角色的回复，绕过回复顺序策略。即使该群成员被静音，它也会工作。"]},{"l":"自动模式","p":["当启用自动模式时，群聊将遵循回复顺序，并在没有用户交互的情况下触发消息生成。当最后一个草拟角色发送其消息后，下一次自动模式转发将在5秒延迟后触发。当用户开始在发送消息文本区域输入时，自动模式将被禁用，但已经排队的生成不会自动停止。"]},{"l":"允许自我回复","p":["如果在选择自然顺序时由于自我提及而触发，允许连续回复最近发送消息的角色。对列表顺序没有影响。"]},{"l":"群聊场景覆盖","p":["所有群成员将使用输入的场景文本，而不是他们角色卡中指定的内容。分支聊天从其父级继承场景覆盖，之后可以单独更改。"]},{"l":"查看角色定义","p":["点击群聊菜单中头像旁的角色卡图标将快速导航到通常的角色定义屏幕。在这里所做的任何更改将保存到卡片本身。","要返回群聊，请点击群名称标题链接。"]},{"l":"成员管理","p":["您现有的任何角色都可以在群聊中添加、移除、静音或重新排序。默认情况下，新成员会被添加到群成员列表的顶部，然后可以使用箭头图标重新排序。"]},{"l":"群聊弹出窗口","p":["通过点击“当前成员”字段旁的图标可以激活群聊菜单弹出窗口。这会创建一个群聊菜单的弹出窗口。通过在用户设置中启用MovingUI，该菜单可以调整大小并拖动到界面的任何位置，并且功能与常规群聊菜单相同。"]}],[{"l":"聊天文件管理","p":["本页面描述了您可以管理 AI 聊天文件的方法。"]},{"l":"单人聊天"},{"l":"聊天导入","p":["将聊天导入SillyTavern","要导入Character.AI聊天，请使用此工具： https://github.com/0x000011b/characterai-dumper。"]},{"l":"群聊"},{"l":"导出为 .txt"},{"l":"书签"},{"l":"重命名聊天","p":["默认情况下，聊天文件的名称是根据其开始的日期和时间生成的。","您可以通过点击铅笔图标并输入新名称来更改此名称。","这将打破与该聊天相关的书签之间的链接。"]}],[{"l":"角色设计"},{"l":"人物描述","p":["用于添加角色描述及AI应了解的其他信息。这将在提示中始终存在，因此所有重要事实都应包含在此处。","例如，您可以添加有关动作发生的世界的信息，并描述您所扮演角色的特征。","它可以是任何长度（无论是200个还是2000个令牌）并以任何样式格式化（自由文本、W++、对话风格等）。"]},{"l":"方法与格式","p":["字符格式化的方法是一个复杂的话题，超出了本文档页面的范围。","经过测试或依赖于SillyTavern功能的推荐指南：","Trappu的PLists + Ali:Chat指南: https://wikia.schneedc.com/bot-creation/trappu/creation","AliCat的Ali:Chat指南: https://rentry.co/alichat","kingbri的极简指南: https://rentry.co/kingbri-chara-guide","Kuma的W++ 指南: https://rentry.co/WPP_For_Dummies"]},{"l":"字符令牌","p":["TL;DR: 如果您正在使用具有2048上下文令牌限制的AI模型，那么您的1000令牌字符定义正在将AI的“记忆”减半。","为了更好地理解这一点，一个优秀的AI的良好响应通常可以达到200-300个令牌。在这种情况下，AI只能“记住”大约3次交流的聊天历史。"]},{"i":"为什么我角色的令牌计数器变成红色","l":"为什么我角色的令牌计数器变成红色？","p":["当我们看到您的角色在其定义中超过模型定义的上下文长度的一半时，我们会为您突出显示，因为这可能会降低 AI 提供愉快对话的能力。"]},{"i":"如果我的角色有太多的令牌会发生什么","l":"如果我的角色有太多的令牌，会发生什么？","p":["不用担心 - 这不会破坏任何东西。最糟糕的情况是，如果角色的永久令牌太大，这仅意味着上下文中可用于其他内容的空间会更少（见下文）。","唯一的负面影响是，AI 的“记忆”会减少，因为可用于处理的聊天记录会更少。","这是因为每个 AI 模型在一次处理时都有处理上下文的数量限制。"]},{"i":"上下文","l":"'上下文'？","p":["这是每次您请求AI生成响应时发送给AI的信息：","字符定义","聊天历史","作者注释","特殊格式字符串","[括号命令]","SillyTavern会自动计算在将信息发送给AI模型之前，如何最佳分配可用的上下文令牌。"]},{"i":"角色的永久令牌是什么","l":"角色的“永久令牌”是什么？","p":["这些将在每次生成请求中始终发送给AI：","角色名称（保持名称简短！在每个角色消息的开头发送）","角色描述框","角色个性框","场景框"]},{"i":"角色定义中哪些部分不是永久的","l":"角色定义中哪些部分不是永久的？","p":["第一个消息框 - 仅在聊天开始时发送一次。","示例消息框 - 仅在聊天历史填满上下文之前保留（可以选择强制将其保留在上下文中）。"]},{"l":"流行的AI模型上下文令牌限制","p":["低于6B参数的旧模型 - 1024","Pygmalion 6B，LLaMA 1模型（标准） - 2048","LLaMA 2及其微调 - 4096","OpenAI ChatGPT（3.5 Turbo） - 4096或16k","OpenAI GPT-4 - 8192或32k","Anthropic的Claude - 8000（旧版本）或100k（Claude 2）","NovelAI - 8192（Kayra，Opus级别；Clio，所有级别），6144（Kayra，Scroll级别），或3072（Kayra，Tablet级别）"]},{"l":"性格总结","p":["对性格的简要描述。","示例：","开朗、狡猾、挑衅","Aqua喜欢无所事事，也喜欢喝醉"]},{"l":"第一条消息","p":["第一条消息是一个重要的内容，它准确地设定了角色将如何以及以何种风格进行交流。","角色的第一条消息应该较长，以便后续角色回复时不太可能使用非常简短的消息。","你也可以使用星号 ** 来描述角色的动作。","例如：","*I noticed you came inside, I walked up and stood right in front of you* Welcome. I'm glad to see you here. *I said with a toothy smug sunny smile looking you straight in the eye* What brings you..."]},{"l":"对话示例","p":["描述角色的说话方式。在每个示例前面添加<START>标记。对话示例块仅在上下文中有空位时插入，并逐块推出上下文。<START>不会出现在提示中，因为它只是一个标记——它将被“示例分隔符”替换，来自文本完成API的高级格式化，以及来自聊天完成API的“新示例聊天”工具提示的内容。","使用{{char}}代替角色名称。","使用{{user}}代替用户名。","示例：","<START>","{{user}}: 嗨，Aqua，我听说你喜欢在酒吧消磨时间。","{{char}}: *兴奋地* 哦，我的天，是的！我就是喜欢在酒吧消磨时间！和所有冒险者聊天，听他们讲述刺激的冒险真是太有趣了！你呢？","{{user}}: 我是新来的，我想请教你一些建议。","{{char}}: *咯咯笑* 哦，建议！我喜欢给建议！为了表示感谢，请请我喝一杯！ 向酒保示意","{{user}}: 你好","{{char}}: *兴奋地* 你好，亲爱的！你是新来的吗？别担心，我是水之女神Aqua，我在这里帮助你！你需要什么帮助吗？我可以说，今天我看起来真是光彩照人！ *摆出姿势，用狗狗眼神看着你*"]},{"l":"情境","p":["对话的情况和背景。"]},{"i":"替换标签宏","l":"替换标签（宏）","p":["{{// (note)}} 允许留下一个注释，将被替换为空内容。AI 不可见。","{{banned \"text here\"}} 动态地将引号中的文本添加到禁用词序列，如果使用的是文本生成 WebUI 后端。对其他后端无效。可以在任何地方使用（角色描述、WI、AN 等）。文本周围的引号很重要。","{{bias \"text here\"}} 设置 AI 的行为偏见，直到下一个用户输入。文本周围的引号很重要。","{{char_version}} => 角色的版本号。","{{char}} 和 <BOT> => 角色名称。","{{charJailbreak}} => 角色的历史后指令提示覆盖","{{charPrompt}} => 角色的主要提示覆盖","{{currentSwipeId}} => 当前显示的最后一条消息滑动的 1 基 ID。","{{date}} => 当前系统日期。","{{description}} => 角色描述。","{{firstIncludedMessageId}} => 上下文中包含的第一条消息的 ID。需要在当前会话中至少运行一次生成。","{{idle_duration}} 插入自上次用户消息发送以来的时间范围的人性化字符串（示例：4 小时，1 天）。","{{input}} => 用户输入栏的内容。","{{isodate}} => 当前 ISO 日期（YYYY-MM-DD）","{{isotime}} => 当前 ISO 时间（24 小时制）","{{lastCharMessage}} => 角色发送的最后一条聊天消息。","{{lastMessage}} => 最后聊天消息文本。","{{lastMessageId}} => 最后聊天消息 ID。","{{lastSwipeId}} => 最后聊天消息中的滑动次数。","{{lastUserMessage}} => 用户发送的最后一条聊天消息。","{{mesExamples}} => 角色的对话示例（未更改且未分割）。","{{model}} => 当前选定 API 的文本生成模型名称。 可能不准确！","{{newline}} => 仅插入一个换行符。","{{noop}} => 无操作，仅为空字符串。","{{original}} 可以在提示覆盖字段（主要提示和历史后指令）中使用，以包含系统设置中的相应默认提示。仅适用于聊天完成 API 和指令模式。","{{persona}} => 用户的角色描述。","{{personality}} => 角色个性。","{{pick::(args)}} => 随机的替代方案，但所选参数在当前聊天中的后续评估中是稳定的，只要源字符串保持不变。","{{pipe}} => 仅用于斜杠命令批处理。替换为上一个命令的返回结果。","{{random::arg1::arg2}} => 支持其参数中包含逗号的随机的替代语法。","{{random:(args)}} 从列表中返回随机项。（例如，{{random:1,2,3,4}} 将随机返回 4 个数字中的 1 个）。也适用于文本列表。","{{roll:(formula)}} 生成随机值并使用提供的骰子公式返回，使用 D&D 骰子语法：XdY+Z。例如，{{roll:d6}} 将生成 1-6 范围内的随机值（标准六面骰）。","{{scenario}} => 角色的场景或聊天场景覆盖（如果设置）。","{{time_UTC±X}} => 指定 UTC 偏移（时区）下的当前时间，例如，对于 UTC+02:00 使用 {{time_UTC+2}}。","{{time}} => 当前系统时间。","{{timeDiff::(time1)::(time2)}} => time1 和 time2 之间的时间差。接受时间和日期宏。","{{trim}} => 修剪包围此宏的换行符。","{{user}} 和 <USER> => 用户名。","{{weekday}} => 当前星期几","此列表可能不完整或过时。在任何 SillyTavern 聊天中使用 /help macros 斜杠命令以获取适用于您实例的宏列表。","生成时发送的标签列表："]},{"i":"指令模式和上下文模板宏","l":"指令模式和上下文模板宏：","p":["（在高级格式设置中启用）","{{chatStart}} – 上下文模板聊天开始行","{{exampleSeparator}} – 上下文模板示例对话分隔符","{{instructAssistantPrefix}} – 助手消息前缀序列","{{instructAssistantSuffix}} – 助手消息后缀序列","{{instructFirstAssistantPrefix}} – 助手第一次输出序列","{{instructLastAssistantPrefix}} – 助手最后一次输出序列","{{instructStop}} – 指令停止序列","{{instructSystemInstructionPrefix}} – 系统指令前缀序列","{{instructSystemPrefix}} – 系统消息前缀序列","{{instructSystemPrompt}} – 指令系统提示","{{instructSystemPromptPrefix}} – 系统提示前缀序列","{{instructSystemPromptSuffix}} – 系统提示后缀序列","{{instructSystemSuffix}} – 系统消息后缀序列","{{instructUserFiller}} – 用户填充消息文本","{{instructUserPrefix}} – 用户消息前缀序列","{{instructUserSuffix}} – 用户消息后缀序列","{{maxPrompt}} - 提示的最大大小（以标记为单位）（上下文长度减少响应长度）"]},{"i":"聊天变量宏","l":"聊天变量宏：","p":["本地变量 = 仅限当前聊天","全局变量 = 在任何聊天中适用于任何角色","{{getvar::name}} – 替换为本地变量 \"name\" 的值","{{setvar::name::value}} – 替换为空字符串，将本地变量 \"name\" 设置为 \"value\"","{{addvar::name::increment}} – 替换为空字符串，将数值 \"increment\" 添加到本地变量 \"name\"","{{incvar::name}} – 替换为将变量 \"name\" 的值增加 1 的结果","{{decvar::name}} – 替换为将变量 \"name\" 的值减少 1 的结果","{{getglobalvar::name}} – 替换为全局变量 \"name\" 的值","{{setglobalvar::name::value}} – 替换为空字符串，将全局变量 \"name\" 设置为 \"value\"","{{addglobalvar::name::value}} – 替换为空字符串，将数值 \"increment\" 添加到全局变量 \"name\"","{{incglobalvar::name}} – 替换为将全局变量 \"name\" 的值增加 1 的结果","{{decglobalvar::name}} – 替换为将全局变量 \"name\" 的值减少 1 的结果"]},{"l":"喜爱的角色","p":["通过按下“星星”按钮，将角色标记为喜爱，以便在侧边菜单栏中快速筛选。"]}],[{"l":"高级格式设置","p":["本节提供的设置允许对提示构建策略进行更精细的控制。"]},{"l":"上下文模板","p":["这里的大多数设置不适用于聊天完成 API，因为它们由提示管理系统控制。","通常，AI 模型需要您以某种特定方式向它们提供角色数据。SillyTavern 包含不同模型的预制转换规则列表，但您可以根据需要自定义它们。"]},{"l":"故事字符串","p":["此字段是预聊天角色数据的模板（内部称为故事字符串）。 这是为文本完成和指导模型格式化角色卡的主要方式。","该模板支持 Handlebars 语法以及任何自定义文本注入或格式化。请参见语言参考： https://handlebarsjs.com/guide/","我们向 Handlebars 评估器提供以下参数（将它们包裹在双大括号中）：","description- 角色的描述","scenario- 角色的场景","personality- 角色的个性","system- [指令模式] 系统提示或角色的主要提示覆盖（如果存在并且用户设置中启用了“优先角色提示”）","persona- 选定的角色描述","char- 角色的名字","user- 选定的角色名字","wiBefore 或 loreBefore- 位置设置为“角色定义之前”的组合激活的世界信息条目","wiAfter 或 loreAfter- 位置设置为“角色定义之后”的组合激活的世界信息条目","mesExamples- （可选）角色的示例对话，使用分隔符进行指令格式化。将“示例消息行为”设置为“从不包含示例”以避免重复。","支持一个特殊的 {{trim}} 宏，用于删除其周围的任何换行符。如果您希望某部分文本与前一行不分开，请使用它（ 空格 不会 被修剪）。","警告：如果故事字符串模板中缺少上述某些参数，它们将根本不会发送到提示中。"]},{"l":"示例分隔符","p":["用作块头和示例对话块之间的分隔符。示例对话中的任何 START 标签实例将被此字段的内容替换。"]},{"l":"聊天开始","p":["作为渲染的故事字符串和示例对话块之间的分隔符插入，但在上下文中的第一条消息之前。"]},{"l":"用作停止字符串","p":["将“示例分隔符”和“聊天开始”添加到停止字符串列表中。","如果模型倾向于幻觉或泄漏整个示例对话块，前面有分隔符，这将很有帮助。"]},{"l":"允许后历史指令","p":["在提示的末尾包含后历史指令，格式为最后的用户消息。","后历史指令提示应在角色卡中定义，并且应启用“偏好角色指令”设置。","应谨慎使用，因为将指令放在上下文的较低位置可能会导致较小模型的输出质量下降。"]},{"l":"始终将角色名称添加到提示中","p":["将角色的名称附加到提示中，以强制模型作为该角色完成消息："]},{"l":"Tokenizer","p":["AI21 API：GPT-3.5 turbo（默认，快速）或 API tokenizer（如果切换打开，可能会导致速度变慢！）。","API tokenizer。查询生成 API 以直接从模型获取 token 计数。已知支持的后端：Text Generation WebUI (ooba)、koboldcpp、TabbyAPI、Aphrodite API。 如果您使用受支持的后端，请选择此项。","Claude：依赖于模型的 tokenizer，通过 WebTokenizers。","GPT 通过 OpenAI / OpenRouter / Window：依赖于模型的 tokenizer，通过 tiktoken。","KoboldAI Classic / AI Horde：LLaMA tokenizer。","Koboldcpp：模型 API tokenizer。","LLaMA tokenizer。用于 LLaMA 1/2 模型系列：Vicuna、Hermes、Airoboros 等。 如果您使用 LLaMA 1/2 模型，请选择此项。","Mistral tokenizer。用于 Mistral 模型系列及其微调。 如果您使用 Mistral 模型，请选择此项。","NerdStash tokenizer。用于 NovelAI 的 Clio 模型。 如果您使用 Clio 模型，请选择此项。","NerdStash v2 tokenizer。用于 NovelAI 的 Kayra 模型。 如果您使用 Kayra 模型，请选择此项。","NovelAI Clio：NerdStash tokenizer。","NovelAI Kayra：NerdStash v2 tokenizer。","OpenRouter：其各自模型的 Llama 和 Mistral tokenizer。","Scale API：GPT-4 tokenizer。","SillyTavern 提供了一个“最佳匹配”选项，该选项根据所使用的 API 提供者尝试匹配 tokenizer，遵循以下规则。","Tokenizer 是一个将一段文本分解为称为 tokens 的更小单元的工具。这些 tokens 可以是单个单词，甚至是单词的部分，例如前缀、后缀或标点符号。一个经验法则是，一个 token 通常对应于 3~ 4 个字符的文本。","Yi tokenized。用于 Yi 模型。 如果您使用 Yi 模型，请选择此项。","回退 tokenizer（用于代理）：GPT-3.5 turbo tokenizer。","如果您获得不准确的结果或希望进行实验，您可以为 SillyTavern 设置一个 覆盖 tokenizer，以在向 AI 后端发出请求时使用：","文本补全 API (可覆盖)：","文本补全：API tokenizer（如果支持）或 LLaMA tokenizer。","无。每个 token 的估计为 ~ 3.3 个字符，四舍五入到最接近的整数。 如果您的提示在高上下文长度下被截断，请尝试此方法。 该方法由 KoboldAI Lite 使用。","聊天补全 API (不可覆盖)："]},{"l":"Token Padding","p":["重要：本节不适用于 Chat Completions API。SillyTavern 将始终为这些模型使用匹配的分词器。","SillyTavern 无法使用由在远程实例的 KoboldAI 或 Oobabooga 的 TextGen 上运行的模型提供的适当分词器，因此在提示生成过程中假定的所有令牌计数都是基于所选的 tokenizer 类型进行估算的。","由于在接近模型定义的最大上下文大小时，分词的结果可能不准确，因此提示的某些部分可能会被修剪或删除，这可能会对角色定义的连贯性产生负面影响。","为了防止这种情况，SillyTavern 将上下文大小的一部分分配为填充，以避免添加超过模型可以容纳的聊天项。如果您发现即使选择了最匹配的分词器，提示的某些部分仍被修剪，请调整填充以确保描述不被截断。","您可以输入负值进行反向填充，这样可以分配超过设定的最大令牌数量。"]},{"l":"自定义停止字符串","p":["接受一个 JSON 序列化的停止字符串数组。示例：[\\n, \\nUser:, \\nChar:]。如果您不确定格式，请使用 在线 JSON 验证器。","支持的 API：","KoboldAI（版本 1.2.2 及更高）或 KoboldCpp","AI Horde","文本补全 API：文本生成 WebUI (ooba)、Tabby、Aphrodite、Mancer、TogetherAI、Ollama 等","NovelAI","OpenAI，包括通过 OpenRouter（最多 4 个字符串）","Claude","Google MakerSuite"]}],[{"l":"自托管 AI 模型","p":["本指南基于作者的个人经验和知识，并非绝对真理。所有陈述都应持保留态度。如有任何更正或建议，请通过 Discord 联系我们或向 SillyTavern 文档库 提交 PR。"]},{"l":"介绍","p":["本指南旨在帮助您在本地计算机上使用 SillyTavern 设置一个运行中的 AI（我们将从现在开始使用正确的术语，称其为 LLM）。在打扰他人进行技术支持问题之前，请先阅读此内容。"]},{"i":"最好的大型语言模型是什么","l":"最好的大型语言模型是什么？","p":["这个问题无法回答，因为没有标准化的“最佳”评估标准。社区在Reddit和Discord上有足够的资源和讨论，可以形成对首选/常用模型的某种看法。你的体验可能会有所不同。"]},{"i":"什么是最佳配置","l":"什么是最佳配置？","p":["如果有最佳或显而易见的设置，是否还需要配置？最佳配置就是适合你的配置。这是一个试错的过程。"]},{"l":"硬件要求和方向","p":["这是一个复杂的话题，所以我将坚持基本要点并进行概括。","互联网上有成千上万的免费 LLM 可供下载，类似于 Stable Diffusion 拥有大量可用于生成图像的模型。","运行未修改的 LLM 需要一张强大的 GPU，配备大量 VRAM（GPU 内存）。这超出了你所能拥有的。","可以通过使用量化技术（如 GPTQ 或 AWQ）压缩模型，从而减少 VRAM 的需求。这使得模型的能力有所降低，但大大减少了运行所需的 VRAM。突然间，这使得拥有像 3080 这样的游戏 GPU 的人能够运行一个 13B 的模型。尽管它不如未量化模型好，但仍然不错。","更好的是：还有一种模型格式和量化方法称为 GGUF（之前称为 GGML），已经成为普通用户的首选格式，而不需要强大的 GPU。这使得你可以完全不使用 GPU 来使用 LLM。它只会使用 CPU 和 RAM。这比在 GPU 上使用 GPTQ/AWQ 运行 LLM 慢得多（可能慢 15 倍），尤其是在提示处理期间，但模型的能力仍然很好。GGUF 的创建者进一步优化了 GGUF，添加了一个配置选项，允许拥有游戏级 GPU 的人将模型的部分内容卸载到 GPU，从而使他们能够以 GPU 速度运行部分模型（注意，这并不会减少 RAM 的需求，只会提高生成速度）。","模型有不同的大小，名称是根据它们训练时的参数数量命名的。你会看到像 7B、13B、30B、70B 等名称。你可以把这些看作模型的“大脑”大小。一个 13B 模型会比同一系列中的 7B 模型更强大：它们是在相同的数据上训练的，但更大的“大脑”能够更好地保留知识并更连贯地思考。更大的模型也需要更多的 VRAM/RAM。","量化有不同的级别（8 位、5 位、4 位等）。你越往下走，模型的性能就越差，但硬件要求也越低。因此，即使在较差的硬件上，你也可能能够运行所需模型的 4 位版本。甚至还有 3 位和 2 位量化，但这时你已经在无效地重复了。还有进一步的量化子类型，如 k_s、k_m、k_l 等。k_m 比 k_s 更好，但需要更多资源。","上下文大小（你的对话可以变得多长而不被模型丢弃部分内容）也会影响 VRAM/RAM 的需求。值得庆幸的是，这是一个可配置的设置，允许你使用更小的上下文以减少 VRAM/RAM 的需求。（注意：基于 Llama2 的模型的上下文大小为 4k。Mistral 宣传为 8k，但实际上是 4k。）","在 2023 年的某个时候，NVIDIA 更改了他们的 GPU 驱动程序，因此如果你需要的 VRAM 超过了 GPU 的容量，任务不会崩溃，而是会开始使用常规 RAM 作为后备。这将降低 LLM 的写入速度，但模型仍然可以工作并提供相同质量的输出。值得庆幸的是，这种行为 可以被禁用。","考虑到以上所有因素，硬件要求和性能完全取决于模型的系列、模型类型、模型大小、量化方法等。"]},{"l":"模型大小计算器","p":["你可以使用 Nyx's Model Size Calculator 来确定你需要多少 RAM/VRAM。","记住，你想要运行的模型应该是最大且量化程度最低的，能够适应你的内存，即不导致 磁盘交换。"]},{"l":"下载 LLM","p":["要开始，你需要下载一个 LLM。最常见的查找和下载 LLM 的地方是 HuggingFace。这里有成千上万的模型可供选择。查找模型的一个好方法是查看 TheBloke 的账户页面： https://huggingface.co/TheBloke。他是一位致力于将每个模型转换为 GGUF 的独行侠。如果你不想要 GGUF，他会链接到原始模型页面，你可能会在该页面找到其他格式的同一模型。","在某个模型的页面上，你会发现一堆文件。","你可能不需要所有文件！对于 GGUF，你只需要 .gguf 模型文件（通常为 4-11GB）。如果你发现多个大型文件，通常都是同一模型的不同量化版本，你只需选择一个。","对于 .safetensors 文件（可以是 GPTQ、AWQ 或 HF 量化或未量化），如果你在文件名中看到像 model-00001-of-00003.safetensors 的数字序列，那么你需要所有 3 个 .safetensors 文件 + 存储库中的所有其他文件（tokenizer、configs 等）来获取完整模型。","截至 2024 年 1 月，Mixtral MOE 8x7B 被广泛认为是本地 LLM 的最先进技术。如果你有 32GB 的 RAM 来运行它，绝对可以尝试。如果你的 RAM 少于 32GB，那么使用 Kunoichi-DPO-v2-7B，尽管它的大小，但它的表现非常出色。"]},{"l":"下载 Kunoichi-DPO-v2-7B 的步骤","p":["我们将在本指南的其余部分使用 Kunoichi-DPO-v2-7B 模型。它是一个基于 Mistral 7B 的优秀模型，仅需 7GB RAM，性能远超预期。注意：Kunoichi 使用 Alpaca 提示。","前往 https://huggingface.co/brittlewis12/Kunoichi-DPO-v2-7B-GGUF","点击“文件和版本”。您将看到几个文件的列表。这些都是相同的模型，但提供了不同的量化选项。点击文件 'kunoichi-dpo-v2-7b.Q6_K.gguf'，它提供了 6 位量化。","点击“下载”按钮。您的下载应该开始。"]},{"l":"如何识别模型类型","p":["好的模型上传者如 TheBloke 会给出描述性的名称。但如果没有：","文件名以 .gguf 结尾：GGUF CPU 模型（显而易见）","文件名以 .safetensors 结尾：可以是未量化的，或 HF 量化的，或 GPTQ，或 AWQ","文件名是 pytorch-***.bin：与上述相同，但这是一个较旧的模型文件格式，允许模型在加载时执行任意 Python 脚本，被认为是不安全的。如果你信任模型创建者，或者非常需要，可以继续使用，但如果有选择，建议使用 .safetensors。","config.json 是否存在？查看它是否有 quant_method。","q4 表示 4 位量化，q5 表示 5 位量化，依此类推。","你看到一个数字如 -16k？那是增加的上下文大小（即在模型忘记你聊天开始之前，你的对话可以有多长）！请注意，较高的上下文大小需要更多的 VRAM。"]},{"i":"安装-llm-服务器oobabooga-或-koboldai","l":"安装 LLM 服务器：Oobabooga 或 KoboldAI","p":["在您的 PC 上安装 LLM 后，我们需要下载一个工具，它将充当 SillyTavern 和模型之间的中介：它将加载模型，并将其功能作为本地 HTTP Web API 暴露出来，以便 SillyTavern 可以与之通信，方式与 SillyTavern 与 OpenAI GPT 或 Claude 等付费 Web 服务的通信方式相同。您使用的工具应该是 KoboldAI 或 Oobabooga（或其他兼容工具）。","本指南的其余部分将继续使用 Oobabooga，但这些工具应视为等效。"]},{"l":"安装 Oobabooga","p":["这是一个更正确/简单易懂的安装步骤：","git clone https://github.com/oobabooga/text-generation-webui（或者在浏览器中下载他们的仓库为 .zip 文件，然后解压）","运行 start_windows.bat 或者根据你的操作系统选择相应的文件","当被询问时，选择你的 GPU 类型。即使你打算使用 GGUF/CPU，如果你的 GPU 在列表中，现在也请选择，因为这将给你提供一个名为 GPU sharding 的速度优化选项（而不需要从头重新安装）。如果你没有游戏级的 dGPU（NVIDIA, AMD），请选择 None。","等待安装完成","将 kunoichi-dpo-v2-7b.Q6_K.gguf 放入 text-generation-webui/models","打开 text-generation-webui/CMD_FLAGS.txt，删除里面的所有内容并写入： --api","重启 Oobabooga","访问 http://127.0.0.1:5000/docs。是否加载了 FastAPI 页面？如果没有，你在某个地方出错了。"]},{"l":"在 Oobabooga 中加载我们的模型","p":["在浏览器中打开 http://127.0.0.1:7860/","点击模型标签","在下拉菜单中，选择我们的 Kunoichi DPO v2 模型。它应该会自动选择 llama.cpp 加载器。","（可选）我们在之前提到过“GPU 卸载”：这就是此页面上的 n-gpu-layers 设置。如果您想使用它，请在加载模型之前设置一个值。作为基本参考，将其设置为 30 将为 13B 及更小的模型使用不到 6GB 的 VRAM。（这因模型架构和大小而异）","点击加载"]},{"l":"配置 SillyTavern 与 Oobabooga 进行对话","p":["点击 API 连接（顶部栏的第二个按钮）","将 API 设置为文本完成","将 API 类型设置为默认（Oobabooga）","将服务器 URL 设置为 http://127.0.0.1:5000/","点击连接。它应该成功连接并检测到 kunoichi-dpo-v2-7b.Q6_K.gguf 作为模型。","与角色聊天以测试其是否正常工作"]},{"l":"结论","p":["恭喜，您现在应该拥有一个可工作的本地 LLM。"]},{"i":"第2部分配置sillytavern以获得更好的llm输出","l":"第2部分：配置SillyTavern以获得更好的LLM输出","p":["所以你和机器人聊天，感觉效果不太好。可能是模型不佳。也许你无法运行更好的模型，这就是最好的结果。但也许你可以修复它。","请在下一个指南中阅读， 如何提高输出质量"]}],[{"l":"如何提高输出质量","p":["所以你和机器人聊天，感觉效果不太好。也许是模型不佳。也许你无法运行更好的模型，这已经是最好的了。但也许你可以修复它。"]},{"l":"检查您是否可以运行更高级的变体","p":["这应该是常识。我们在指南中使用了一个7B模型，但如果您的硬件可以处理更大的模型，您应该使用像13B这样的更大模型，这样您将获得更好的输出。在撰写本文时，我无法找到openhermes-2.5-mistral的13B或更高变体，但这个建议适用于许多其他模型，它们有多种尺寸。","此外，只要您有足够的RAM/VRAM容量来运行更高的量化（例如q5或q8而不是q4），那么这也会产生更好的结果。"]},{"l":"调整SillyTavern的指令提示","p":["与LLM对话没有单一的方法：不同的模型被训练以响应不同的请求方式（例如“在这个角色扮演聊天中写回复”）。在像GPT4这样的高级云模型上，模型非常强大，可以理解以任何自然语言方式表达的许多隐含上下文。","在您的消费硬件上运行的LLM则没有那么出色。当您按照模型期望的方式进行提示时，它们的输出会有所改善。这是基于模型创建者的训练方式，这被称为“指令风格”，即您如何指示模型为您执行任务。","SillyTavern附带了一些指令模板（告诉SillyTavern如何与模型交流的配置方案），但您可能需要创建自定义模板，以使SillyTavern能够正确指示。如果只是为了将默认系统提示更改为更接近您想要的内容。在我的经验中，只有ChatML模板不需要我在ST中进行调整。大多数模型在SillyTavern提示不当时，生成良好输出的能力远不如OpenHermes-2.5-Mistral-7B，因此它们受益于这种定制。","您的目标是让SillyTavern遵循指令风格。要理解发生了什么，我们需要知道三件事：","模型期望什么样的指令风格？","SillyTavern是否使用了正确的指令风格？","如果没有，我们如何在ST中创建一个更正确的指令风格？"]},{"l":"初步准备","p":["在 ST 中，我们将创建一个简单的角色，名为 Betty，描述为“Betty 是一名刚毕业的商业管理专业学生。”，第一条消息为“嗨，我是 Betty。我来面试吗？”。请继续创建这个角色，我们将在本指南中使用它。","此外，我们还需要一个需要定制以便良好运作的模型。在本指南中，我们将使用 TheBloke/Starling-LM-7B-alpha-GGUF 作为我们的示例。这是另一个高评价的模型。"]},{"i":"1-模型期望什么样的指令风格","l":"1. 模型期望什么样的指令风格？","p":["Starling 的页面上写道：“我们的模型遵循与 Openchat 3.5 完全相同的聊天模板和用法。有关更多详细信息，请参阅他们的模型卡。” OpenChat 3.5 的页面在“对话模板（点击展开）”下表示，进行多轮（即聊天）的方法是：","如果我们忽略 Python 代码，并添加一些换行符，我们可以看到它期望接收的是：","所以现在我们知道如何正确地提示它。"]},{"i":"2-sillytavern-是否使用了正确的指令风格","l":"2. SillyTavern 是否使用了正确的指令风格？","p":["SillyTavern 与 LLM 的交互在 AI Response Formatting 窗口中配置（顶部的第 3 个按钮）。主要有两个部分：上下文模板和指令模式。这两部分都有一些针对流行模型系列的预设。","（旁注：当 Ooba 在 Ooba 中加载 Starling 时，它说这是 Alpaca 指令风格。这是错误的，我们知道模型创建者/微调者说这是 OpenChat 3.5 风格。在利用模型时，不应信任 Ooba。只有在对模型几乎没有信息时，才遵循它的建议，这样总比没有好。）","让我们从简单的开始。将 SillyTavern 配置为使用上下文模板 = 默认，指令模式 = OpenOrca-OpenChat。OpenOrca-OpenChat 是 SillyTavern 最接近 OpenChat 的选项，对吧？所以这是你自然的起点。","与 Betty 开始一个新聊天，并发送“没错，进来吧。”你会立即看到回复是多么糟糕。以下是我得到的内容：","在这一点上，你可能会立即放弃这个模型，认为它不适合聊天，对吧？在我们放弃这个模型之前，让我们看看 SillyTavern 是否正确使用它。查看 ST 的控制台，看看它发送的“提示”。我们看到它发送了这个：","难怪 Betty 的回复如此糟糕。我们的 OpenOrca-OpenChat 模板有一个糟糕的默认系统提示，没有提到角色扮演或聊天，而且我们没有遵循模型的指令格式，因为我们使用了“用户”而不是“GPT4 Correct User”。","让我们看看如何修复这个问题。"]},{"i":"3-如何创建新的更正确的指令风格","l":"3. 如何创建新的更正确的指令风格？","p":["我们的目标是将ST的默认提示转换为符合OpenChat 3.5的指令风格，并提供更好的系统提示。我正在编写一个逐步的操作指南，以便您可以将这种方法应用于将来遇到的任何模型，并能够自己完成，但如果您想要最终解决方案，请直接跳到最后。"]},{"i":"第一轮修复系统提示","l":"第一轮：修复系统提示","p":["提醒一下，我们的目标是遵循OpenChat的指令风格：","在AI响应格式窗口中，创建一个新的指令模式预设，点击“保存预设为”按钮，并将其命名为Starling。在其中写入：","这个提示实现了两个目标：","用与聊天和角色扮演相关的内容替换了糟糕的默认提示","遵循了OpenChat预期的指令风格，包括清晰的指示","将“That's right. Come on in.”发送给Betty，看看控制台输出什么：","我们可以发现3个问题：","SillyTavern在聊天开始时发送的是'Assistant:'而不是'GPT4 Correct Assistant:'","SillyTavern发送的是'User:'而不是'GPT4 Correct User:'","Betty的描述被插入到中间，没有遵循OpenChat格式：它没有作为'GPT4 Correct User: blah blah <|end_of_turn|>'行的一部分提及。"]},{"i":"第二轮更多调整","l":"第二轮：更多调整","p":["问题#1和#2很容易解决：在指令模式序列下，只需将输入序列从'User:'更改为'GPT4 Correct User:'，将输出序列的'<|end_of_turn|> Assistant:'更改为'<|end_of_turn|> GPT4 Correct Assistant:'（注意：在GPT4 Correct Assistant之前有一个换行，即按Enter）。您可以保存您的预设并再次尝试，以确认这些问题已解决。","现在来看描述。如果您对Betty的回复满意，现在可以停止。如果您想深入了解，请继续阅读。"]},{"i":"第三轮可选最终描述调整","l":"第三轮（可选）：最终描述调整","p":["如果您对模型现在的表现满意，就不需要做这个。如果您需要进行重大更改，我在这里展示如何让SillyTavern满足您的要求。这一轮的调整更具侵入性，并将丢弃角色卡的可选部分（场景、个性等）。","在AI响应格式页面，SillyTavern顶部有一个名为StoryString的设置。这定义了SillyTavern将发送给您的模型的内容。例如，默认情况下，它将发送系统提示（即{{system}} 条目），然后是{{wiBefore}}（世界信息标记），然后是{{description}} 即角色描述，然后是其他内容。","基于默认设置创建一个新的上下文模板预设，点击顶部的“保存预设为”按钮，并将其命名为Starling。该语法的格式有些不寻常，因为闭合的{{/if}} 必须在下一行，但基本上，它遵循格式{{#if system}}{{system}}{{/if}}。这表示如果系统提示存在，则发送LLM系统提示，其他条目也是如此。","我们要做的是告诉SillyTavern停止将描述作为Story String的一部分发送（这不允许我们用<|end_of_turn|>自定义它）。","所以让我们替换：","为：","现在将不会发送任何描述。那么我们应该如何在OpenChat格式中给Betty的描述呢？将您的系统提示编辑为：","我们刚刚在系统提示中添加了{{char}}的描述: {{description}}|end_of_turn|。所以虽然我们的Story String不再发送描述，但我们发送了我们的系统提示，而我们的系统提示包括了描述，因此一切都很好。","（注意，我们还删除了其他几个内容，例如场景、个性等。我的角色没有使用这些可选字段，所以我没有覆盖它们。您可以对这些进行相同的修复。您可以在系统提示中写入类似的内容，例如场景：“如果以下场景定义不为空，请遵循场景：场景定义：{{scenario}}。”）","如果您使用角色描述或世界信息，您 必须 将它们的宏占位符添加到系统提示或故事字符串中，否则它们将不会发送给模型。请参阅 高级格式化 以获取更深入的解释。"]},{"l":"结论","p":["与Betty聊天，输出结果应该不言而喻。她从写糟糕的回复变成了能够进行体面的角色扮演聊天回复。因此，每当您使用Starling模型时，您应该在ST中使用新的Starling预设。","以下是Betty现在的示例输出（您可以通过根据需要修改系统提示进一步改进）："]}],[{"l":"Branches"},{"l":"分支","p":["SillyTavern 正在使用多分支系统进行开发，以确保所有用户的顺畅体验。","release- 推荐给大多数用户。这是最稳定和推荐的分支，仅在发布重大版本时更新。适合大多数用户。","staging- 不推荐随意使用。此分支具有最新功能，但请小心，因为它可能随时中断。仅适合高级用户和爱好者。","main 和 dev- 这些分支已被弃用，将不再接收更新，并将在 2023年9月1日 删除。建议您在截止日期之前切换分支。"]},{"i":"主分支和开发分支发生了什么","l":"主分支和开发分支发生了什么？","p":["git 提交历史被压缩到 1.9.0 版本的状态。","旧分支承载着长期存在的不良 git 实践和曾经存在于仓库中的大型二进制文件。 每次 git clone 都会下载并存储大量不必要的文件，造成网络和磁盘负担。 此外，这使得我们几乎不可能在不引发 git 冲突的情况下，正确更新默认内容，例如 settings.json。","不幸的是，失去提交历史也意味着失去代码贡献历史。 如果您对 SillyTavern 的开发做出了贡献，并希望在 README 文件和文档网站上看到您的名字，请与我们联系！"]},{"i":"如何在使用-maindev-的情况下迁移到新分支","l":"如何在使用 main/dev 的情况下迁移到新分支？","p":["建议进行全新安装。 但是，如果您希望使用现有的 SillyTavern 副本，请按照以下说明进行操作。","重要！ 在进行任何操作之前，请对您的安装做 完整备份。您可能会 丢失数据，所以不要忽视这个警告。","不确定要备份哪些文件？请参见此处的列表： 如何更新 SillyTavern"]},{"l":"git 安装","p":["在您的 SillyTavern 安装文件夹中打开终端提示符 (cmd, PowerShell, Termux 等)。","输入 git fetch 然后输入 git pull 以拉取更新。","您可能会丢失设置。您是否做了备份？ git switch release 或 git switch staging 将分别更改您的分支。","如果没有错误，请跳到下一项。您可能会看到类似以下内容：","您将看到受影响文件的列表。如果您不在乎这些设置文件被替换， git switch -f release 或 git switch -f staging 将设置您的分支。 如果您想保留这些更改，请从备份中恢复。","输入 npm install 然后输入 npm run start 以测试一切是否正常。","享受吧！如有需要，请从备份中恢复您的数据。"]},{"i":"fatal-invalid-reference-release","l":"fatal: invalid reference: release","p":["如果您仅从旧的远程（在迁移到组织仓库之前）克隆了一个分支，这种情况可能会发生。要解决此问题，您需要从新的远程添加并获取一个分支：","然后从第5步继续。"]},{"l":"ZIP 安装","p":["对您来说没有任何变化。只需像往常一样下载分支/发布的 ZIP 文件。"]}],[{"l":"STscript语言参考"},{"i":"什么是-stscript","l":"什么是 STscript？","p":["它是一种简单而强大的脚本语言，可以在不需要复杂编码的情况下扩展 SillyTavern 的功能，让您能够：","创建迷你游戏或速度挑战","构建 AI 驱动的聊天洞察","发挥您的创造力并与他人分享","STscript 是使用斜杠命令引擎构建的，利用命令批处理、数据管道、宏和变量。这些概念将在以下文档中描述。","STscript 仍在积极开发中。 如果您计划使用其任何功能，建议使用 staging 分支。"]},{"l":"安全预防措施","p":["拥有强大能力意味着承担重大责任。请小心并始终在执行脚本之前进行检查。"]},{"i":"你好世界","l":"你好，世界！","p":["要运行你的第一个脚本，打开任何 SillyTavern 聊天并在聊天输入框中输入以下内容：","Hello World","你应该在屏幕顶部的通知中看到消息。现在让我们逐步解析一下。","脚本是一组命令，每个命令以斜杠开头，可以有命名参数和未命名参数，最后以命令分隔符字符 | 结束。","命令按顺序执行，一个接一个，并在彼此之间传递数据。","/pass 命令接受一个常量值 \"Hello, World!\" 作为未命名参数，并将其写入管道。","/echo 命令通过管道从前一个命令接收该值，并将其显示为通知。","提示： 要查看所有可用命令的列表，请在聊天中输入 /help slash。","由于常量未命名参数和管道是可以互换的，我们可以简单地将这个脚本重写为："]},{"l":"用户输入","p":["现在让我们为脚本添加一些互动性。我们将接受用户的输入值并在通知中显示它。","/input 命令用于显示一个带有未命名参数中指定提示的输入框，然后将输出写入管道。","由于 /echo 已经有一个未命名参数来设置输出的模板，我们使用 {{pipe}} 宏来指定管道值将被渲染的位置。","Slim Shady Input","Slim Shady Output"]},{"i":"其他输入输出命令","l":"其他输入/输出命令","p":["/popup (text)— 显示一个阻塞弹窗，支持简单的 HTML 格式，例如：/popup font color=redI'm red!/font。","/setinput (text)— 用提供的文本替换用户输入栏的内容。","/speak voice=name (text)— 使用选定的 TTS 引擎和语音映射中的角色名称来朗读文本，例如：/speak name=Donald Duck Quack!。","/buttons labels=[a,b] (text)— 显示一个带有指定文本和按钮标签的阻塞弹窗。 labels 必须是一个 JSON 序列化的字符串数组或包含该数组的变量名。返回点击的按钮标签，如果取消则返回空字符串。文本支持简单的 HTML 格式。"]},{"i":"popup-和-input-的参数","l":"/popup 和 /input 的参数","p":["/popup 和 /input 支持以下附加命名参数：","large=on/off- 增加弹窗的垂直大小。默认： off。","wide=on/off- 增加弹窗的水平大小。默认： off。","okButton=string- 添加自定义“确定”按钮文本的能力。默认： Ok。","rows=number- （仅适用于 /input）增加输入控件的大小。默认：1。","示例："]},{"i":"echo-的参数","l":"/echo 的参数","p":["/echo 支持以下值作为附加的 severity 参数，以设置显示消息的样式。","warning","error","info（默认）","success","示例："]},{"l":"变量","p":["/addglobalvar key=name 或 {{addglobalvar::name:increment}}— 将 increment 添加到全局变量的值中。","/addvar key=name increment 或 {{addvar::name::increment}}— 将 increment 添加到本地变量的值中。","/addvar 命令中的增量会执行加法或减法，如果增量和变量值都可以转换为数字，否则将执行字符串连接。","/decglobalvar name 或 {{decglobalvar::name}}— 将全局变量的值减少 1。","/decvar name 或 {{decvar::name}}— 将本地变量的值减少 1。","/flushglobalvar name— 删除全局变量的值。","/flushvar name— 删除本地变量的值。","/getglobalvar name 或 {{getglobalvar::name}}— 获取全局变量的值。","/getvar name 或 {{getvar::name}}— 获取本地变量的值。","/incglobalvar name 或 {{incglobalvar::name}}— 将全局变量的值增加 1。","/incvar name 或 {{incvar::name}}— 将本地变量的值增加 1。","/setglobalvar key=name 或 {{setglobalvar::name::value}}— 设置全局变量的值。","/setvar key=name value 或 {{setvar::name::value}}— 设置本地变量的值。","getvar 命令用于检索变量的值并通过管道传递。","getvar 宏用于在 /echo 命令中显示该值。","之前未定义变量的默认值是一个空字符串，或者在 /addvar、/incvar、/decvar 命令首次使用时为零。","全局变量 — 保存到 settings.json 中，并在整个应用程序中存在。","变量用于在脚本中存储和操作数据，可以使用命令或宏。变量可以是以下类型之一：","如果命令参数接受变量名，并且存在同名的本地变量和全局变量，则 本地变量 优先。","对于 宏，只有 \"get\"、\"inc\" 和 \"dec\" 类型的宏返回值，\"add\" 和 \"set\" 则替换为空字符串。","所有用于变量操作的 斜杠命令 将结果值写入管道，以供下一个命令使用。","本地变量 — 保存到当前聊天的元数据中，并且是唯一的。","现在，让我们考虑以下示例：","用户输入的值保存在名为 SDinput 的本地变量中。","由于变量在脚本执行之间被保存而未被清除，因此您可以在其他脚本和宏中引用该变量，并且它将解析为与示例脚本执行时相同的值。要确保值被丢弃，请将 /flushvar 命令添加到脚本中。","该值传递给 /imagine 命令（由图像生成插件提供），作为其输入提示。"]},{"l":"数组和对象","p":["变量值可以包含 JSON 序列化的数组或键值对（对象）。","示例：","数组： [apple,banana,orange]","对象： {fruits:[apple,banana,orange]}","可以对命令进行以下修改，以便处理这些变量：","/len 命令获取数组中的项目数量。","index=number/string 命名参数可以添加到 /getvar 或 /setvar 及其全局对应命令，以通过零基索引（数组）或字符串键（对象）获取或设置子值。","如果在不存在的变量上使用数字索引，则该变量将被创建为空数组 []。","如果在不存在的变量上使用字符串索引，则该变量将被创建为空对象 {}。","/addvar 和 /addglobalvar 命令支持将新值推送到数组类型的变量中。"]},{"i":"流程控制---条件语句","l":"流程控制 - 条件语句","p":["您可以使用 /if 命令创建条件表达式，根据定义的规则分支执行。","/if left=valueA right=valueB rule=comparison else=(command on false) (command on true)","让我们回顾以下示例：","该脚本根据用户输入与所需值进行评估，并根据输入值显示不同的消息。"]},{"i":"if-的参数","l":"/if 的参数","p":["left 是第一个操作数。我们称之为 A。","right 是第二个操作数。我们称之为 B。","rule 是要应用于操作数的操作。","else 是可选的子命令字符串，如果布尔比较的结果为假，则执行该子命令。","未命名参数是在布尔比较结果为真时要执行的子命令。","操作数值的评估顺序如下：","数字字面量","本地变量名","全局变量名","字符串字面量","命名参数的字符串值可以用引号转义，以允许多词字符串。引号随后会被丢弃。"]},{"l":"布尔运算","p":["支持的布尔比较规则如下。对操作数应用的操作结果为真值或假值。","eq(等于) => A = B","neq(不等于) => A != B","lt(小于) => A < B","gt(大于) => A > B","lte(小于或等于) => A <= B","gte(大于或等于) => A >= B","not(一元否定) => !A","in(包含子字符串) => A 包含 B，不区分大小写","nin(不包含子字符串) => A 不包含 B，不区分大小写"]},{"l":"子命令","p":["子命令是一个包含要执行的斜杠命令列表的字符串。","要在子命令中使用命令批处理，命令分隔符字符应被转义（见下文）。","由于宏值在条件进入时执行，而不是在子命令执行时执行，因此可以额外转义宏，以将其评估延迟到子命令执行时。","子命令执行的结果被传递给 /if 后面的命令。","/abort 命令在遇到时会中断脚本执行。","/if 命令可以作为三元运算符使用。以下示例将在变量 a 等于 5 时将 \"true\" 字符串传递给下一个命令，否则传递 \"false\" 字符串。"]},{"l":"转义序列"},{"l":"宏","p":["宏的转义方式与之前一样。然而，使用闭包时，您需要转义宏的频率会比以前少得多。要么转义两个左花括号，要么转义成对的左花括号和右花括号。"]},{"l":"管道","p":["在闭包中，管道不需要转义（作为命令分隔符使用时）。在你想使用字面量管道字符而不是命令分隔符的地方，你需要对其进行转义。","使用解析器标志 STRICT_ESCAPING 时，你不需要在引用的值中转义管道。"]},{"l":"引用","p":["要在引用值中使用字面量引号字符，必须对该字符进行转义。"]},{"l":"空格","p":["要在命名参数的值中使用空格，您必须将值用引号括起来，或者转义空格字符。"]},{"l":"闭包定界符","p":["如果您想使用用于标记闭包开始或结束的字符组合，您必须用一个反斜杠转义该序列。"]},{"l":"管道分隔符","p":["为了防止前一个命令的输出被自动作为未命名参数注入到下一个命令中，请在两个命令之间放置双管道。"]},{"l":"闭包","p":["闭包（块语句、lambda、匿名函数，无论你想怎么称呼它们）是一系列被 {: 和 :} 包裹的命令，只有在执行代码的那部分时才会被评估。"]},{"i":"子命令-1","l":"子命令","p":["闭包使得使用子命令变得更加容易，并且消除了转义管道和宏的需要。"]},{"l":"作用域","p":["闭包具有自己的作用域，并支持作用域变量。作用域变量通过 /let 声明，其值通过 /var 设置和检索。获取作用域变量的另一种方式是 {{var::}} 宏。","在闭包内，您可以访问在同一闭包或其祖先中声明的所有变量。您无法访问在闭包的后代中声明的变量。 如果一个变量与在闭包的某个祖先中声明的变量同名，则在该闭包及其后代中无法访问祖先变量。"]},{"l":"命名闭包","p":["闭包可以被赋值给变量（仅限作用域变量），以便在稍后的时间调用或用作子命令。","/: 也可以用来执行快速回复，因为它只是 /run 的简写。"]},{"l":"闭包参数","p":["命名闭包可以像斜杠命令一样接受命名参数。这些参数可以具有默认值。"]},{"l":"闭包和管道参数","p":["以下部分记录了当前仅在 暂存 分支上可用的功能。","来自父闭包的管道值不会自动注入到子闭包的第一个命令中。 您仍然可以使用 {{pipe}} 显式引用父级的管道值，但如果您在闭包内部留下第一个命令的未命名参数为空，则该值将 不会 被自动注入。"]},{"l":"立即执行的闭包","p":["闭包可以被立即执行，这意味着它们将被替换为其返回值。这在没有显式支持闭包的地方非常有用，并且可以缩短一些本来需要大量中间变量的命令。","以下部分记录了当前仅在 暂存 分支上可用的功能。","除了运行保存在作用域变量中的命名闭包外，/run 命令还可以用于立即执行闭包。"]},{"l":"注释","p":["注释是脚本代码中可读的人类解释或注释。注释不会中断管道。"]},{"l":"块注释","p":["以下部分记录了当前仅在 暂存 分支上可用的功能。","块注释可以用于快速注释多个命令。它们不会在管道中终止。"]},{"l":"流程控制"},{"i":"循环while-和-times","l":"循环：/while 和 /times","p":["如果您需要在某个条件满足之前循环执行某个命令，请使用 /while 命令。","在循环的每一步，它将变量 A 的值与变量 B 的值进行比较，如果条件为真，则执行引号内的任何有效斜杠命令，否则退出循环。该命令不会向输出管道写入任何内容。"]},{"i":"while-的参数","l":"/while 的参数","p":["可用的布尔比较、变量处理、字面值和子命令的集合与 /if 命令相同。","可选的 guard 命名参数（默认值为 on）用于防止无限循环，限制迭代次数为 100。 要禁用并允许无限循环，请设置 guard=off。","此示例将 1 加到 i 的值，直到其达到 10，然后输出结果值（在此情况下为 10）。"]},{"i":"times-的参数","l":"/times 的参数","p":["以指定的次数运行子命令。","/times (repeats) (command)– 任何有效的斜杠命令（用引号括起来）重复指定的次数，例如 /setvar key=i 1 | /times 5 /addvar key=i 1 将 1 加到 \"i\" 的值 5 次。","{{timesIndex}} 被替换为迭代次数（从零开始），例如 /times 4 /echo {{timesIndex}} 输出数字 0 到 4。","循环默认限制为 100 次迭代，传递 guard=off 以禁用此限制。"]},{"l":"跳出循环和闭包","p":["以下部分记录了当前仅在 暂存 分支上可用的功能。","/break 命令可用于提前跳出循环 (/while 或 /times) 或闭包。/break 的无名参数可用于传递与当前管道不同的值。/break 目前在以下命令中实现：","/while- 提前退出循环","/times- 提前退出循环","/run（带闭包或通过变量的闭包）- 提前退出闭包","/:（带闭包）- 提前退出闭包"]},{"l":"数学运算","p":["/abs (a)– 对一个值进行绝对值运算，例如 /abs -10","/add (a b c d)– 对一组值进行加法运算，例如 /add 10 i 30 j","/cos (a)– 对一个值进行余弦运算，例如 /cos i","/div (a b)– 对两个值进行除法运算，例如 /div 10 i","/log (a)– 对一个值进行自然对数运算，例如 /log i","/max (a b c d)– 返回一组值中的最大值，例如 /max 1 0 4 k","/min (a b c d)– 返回一组值中的最小值，例如 /min 5 4 i 2","/mod (a b)– 对两个值进行取模运算，例如 /mod i 2","/mul (a b c d)– 对一组值进行乘法运算，例如 /mul 10 i 30 j","/pow (a b)– 对两个值进行幂运算，例如 /pow i 2","/rand (round=round|ceil|floor from=number=0 to=number=1)– 返回一个在 from 和 to 之间的随机数，例如 /rand 或 /rand 10 或 /rand from=5 to=10。范围是包含端点的。返回值将包含小数部分。使用 round 命名参数可获得整数值，例如 /rand round=ceil 向上取整， round=floor 向下取整， round=round 四舍五入到最近整数。","/round (a)– 对一个值进行四舍五入到最近整数的运算，例如 /round 3.14","/sin (a)– 对一个值进行正弦运算，例如 /sin i","/sqrt (a)– 对一个值进行平方根运算，例如 /sqrt 9","/sub (a b)– 对两个值进行减法运算，例如 /sub i 5","乘法、加法、最小值和最大值接受无限数量的以空格分隔的参数。","以下所有运算接受一系列数字或变量名，并将结果输出到管道。","减法、除法、指数运算和取模接受两个以空格分隔的参数。","无效运算（如除以零）以及导致 NaN 值或无穷大的运算返回零。","正弦、余弦、自然对数、平方根、绝对值和四舍五入接受一个参数。","运算列表："]},{"i":"示例-1获取半径为-50-的圆的面积","l":"示例 1：获取半径为 50 的圆的面积。"},{"i":"示例-2计算-5-的阶乘","l":"示例 2：计算 5 的阶乘。"},{"l":"使用 LLM","p":["脚本可以使用以下命令向您当前连接的 LLM API 发起请求：","/gen (prompt)— 使用提供的提示生成文本，适用于所选角色并包含聊天消息。","/genraw (prompt)— 仅使用提供的提示生成文本，忽略当前角色和聊天。","/trigger— 触发正常生成（相当于点击“发送”按钮）。如果是在群聊中，您可以选择提供一个基于 1 的群成员索引或角色名称以让他们回复，否则根据群设置触发一次群轮次。"]},{"i":"gen-和-genraw-的参数","l":"/gen 和 /genraw 的参数","p":["lock— 可以是 on 或 off。指定在生成过程中是否应阻止用户输入。默认值： off。","stop— JSON序列化的字符串数组。为此次生成添加自定义停止字符串（如果API支持）。默认值：无。","instruct（仅适用于 /genraw）— 可以是 on 或 off。允许在输入提示中使用指令格式（如果启用了指令模式并且API支持）。设置为 off 以强制使用纯提示。默认值： on。","as（适用于文本补全API）— 可以是 system（默认）或 char。定义最后一行提示的格式。 char 将使用角色名称， system 将使用无或中立名称。","生成的文本随后通过管道传递给下一个命令，可以保存到变量中或使用I/O功能进行显示：","Cthulhu Says"]},{"l":"提示注入","p":["脚本可以添加自定义 LLM 提示注入，这基本上相当于无限的作者注释。","/inject (text)— 将任何文本插入当前聊天的正常 LLM 提示中，并需要一个唯一标识符。保存到聊天元数据。","/listinjects— 显示当前聊天中由脚本添加的所有提示注入的列表，以系统消息形式呈现。","/flushinjects— 删除当前聊天中由脚本添加的所有提示注入。","/note (text)— 设置当前聊天的作者注释值。保存到聊天元数据。","/interval— 设置当前聊天的作者注释插入间隔。","/depth— 设置聊天中位置的作者注释插入深度。","/position— 设置当前聊天的作者注释位置。"]},{"i":"inject-的参数","l":"/inject 的参数","p":["id— 标识符字符串或变量的引用。对同一 ID 的后续调用 /inject 将覆盖之前的文本注入。 必填参数。","position— 设置注入的位置。默认值： after。可能的值：","after: 在主要提示之后。","before: 在主要提示之前。","chat: 在聊天中。","depth— 设置聊天位置的注入深度。0 表示在最后一条消息之后插入，1 表示在最后一条消息之前，依此类推。默认值：4。","未命名参数是要注入的文本。空字符串将取消提供的标识符的先前值。"]},{"l":"访问聊天消息"},{"l":"阅读消息","p":["您可以使用 /messages 命令访问当前选定聊天中的消息。","names 参数用于指定是否要包含角色名称，默认值： on。","在未命名参数中，它接受以 start-finish 格式表示的消息索引或范围。范围是包含的！","如果范围不满足，即请求无效索引或请求的消息数量超过现有数量，则返回空字符串。","从提示中隐藏的消息（由鬼魂图标表示）将被排除在输出之外。","如果您想知道最新消息的索引，请使用 {{lastMessageId}} 宏，{{lastMessage}} 将获取消息本身。","要计算范围的起始索引，例如，当您需要获取最后 N 条消息时，请使用变量减法。 此示例将为您获取聊天中的 3 条最新消息："]},{"l":"发送消息","p":["脚本可以以用户、角色、人格、中立叙述者的身份发送消息，或添加评论。","/send (text)— 以当前选定的人格添加消息。","/sendas name=charname (text)— 以任何角色的身份添加消息，通过他们的名字匹配。 name 参数是必需的。使用 {{char}} 宏以当前角色身份发送。","/sys (text)— 以中立叙述者的身份添加消息，该消息不属于用户或角色。显示名称纯粹是装饰性的，可以通过 /sysname 命令自定义。","/comment (text)— 添加一个隐藏评论，该评论在聊天中显示，但对提示不可见。","/addswipe (text)— 向最后一条角色消息添加滑动。无法向用户或隐藏消息添加滑动。","/hide (message id or range)— 根据提供的消息索引或 start-finish 格式的包含范围隐藏一条或多条消息。","/unhide (message id or range)— 根据提供的消息索引或 start-finish 格式的包含范围将一条或多条消息返回到提示中。","/send、/sendas、/sys 和 /comment 命令可选择性地接受一个命名参数 at，其值为零基数的数字（或包含该值的变量名），指定消息插入的确切位置。默认情况下，新消息将插入到聊天记录的末尾。","这将在对话历史的开头插入一条用户消息："]},{"l":"删除消息","p":["这些命令可能会造成破坏，并且没有“撤销”功能。如果不小心删除了重要内容，请检查 /backups/ 文件夹。","/cut (消息 ID 或范围)— 根据提供的消息索引或 start-finish 格式的包含范围，从聊天中剪切一条或多条消息。","/del (数字)— 删除聊天中最后 N 条消息。","/delswipe (基于 1 的滑动 ID)— 根据提供的基于 1 的滑动 ID，从最后一条字符消息中删除一个滑动。","/delname (角色名称)— 删除当前聊天中属于指定名称角色的所有消息。","/delchat— 删除当前聊天。"]},{"l":"世界信息命令","p":["世界信息（也称为Lorebook）是一个高度实用的工具，用于动态插入数据到提示中。有关更详细的说明，请参见专门页面： 世界信息。","/getchatbook– 获取与聊天绑定的世界信息文件的名称，如果未绑定则创建一个新文件，并将其传递下去。","/findentry file=bookName field=fieldName [text]– 使用模糊匹配指定文件（或指向文件名的变量）中的字段值与提供的文本（默认字段： key）查找记录的UID，并将UID传递下去，例如 /findentry file=chatLore field=key Shadowfang。","/getentryfield file=bookName field=field [UID]– 获取指定世界信息文件（或指向文件名的变量）中具有UID的记录的字段值（默认字段： content），并将值传递下去，例如 /getentryfield file=chatLore field=content 123。","/setentryfield file=bookName uid=UID field=field [text]– 设置指定世界信息文件（或指向文件名的变量）中具有UID（或指向UID的变量）的记录的字段值（默认字段： content）。要为关键字段设置多个值，请使用以逗号分隔的列表作为文本值，例如 /setentryfield file=chatLore uid=123 field=key Shadowfang,sword,weapon。","/createentry file=bookName key=keyValue [content text]– 在指定文件（或指向文件名的变量）中创建一个新记录，带有键和值（这两个参数都是 可选的），并将UID传递下去，例如 /createentry file=chatLore key=Shadowfang The sword of the king。"]},{"l":"有效输入字段","p":["(见下文)","0 = AND ANY","0 = 在主提示之前","0 = 系统","1 = NOT ALL","1 = 在主提示之后","1 = 用户","2 = NOT ANY","2 = 助手","2 = 在作者说明顶部","3 = AND ALL","3 = 在作者说明底部","4 = 在深度的聊天中","5 = 在示例消息顶部","6 = 在示例消息底部","caseSensitive","comment","constant","content","depth","disable","excludeRecursion","key","keysecondary","matchWholeWords","order","position","probability","role","scanDepth","selectiveLogic","UI 元素","主要关键词","位置","位置值","值类型","内容","匹配完整单词","区分大小写","可选过滤","字段","字符串","字符串列表","布尔值 (1/0)","常量状态","扫描深度","数字","数字 (0-100)","数字 (0-999)","标题 / 备注","深度","深度角色","禁用状态","角色值（仅限位置 = 4）","触发%","逻辑","逻辑值","非递归","顺序"]},{"i":"示例-1通过键从聊天图书馆读取内容","l":"示例 1：通过键从聊天图书馆读取内容"},{"i":"示例-2创建聊天资料册条目包含关键字和内容","l":"示例 2：创建聊天资料册条目，包含关键字和内容"},{"i":"示例-3根据聊天记录扩展现有的资料库条目","l":"示例 3：根据聊天记录扩展现有的资料库条目"},{"l":"文本处理","p":["有多种有用的文本处理实用命令可用于各种脚本场景。","/trimtokens— 从开始或结束修剪输入到指定数量的文本标记，并将结果输出到管道。","/trimstart— 将输入修剪到第一个完整句子的开始，并将结果输出到管道。","/trimend— 将输入修剪到最后一个完整句子的结束，并将结果输出到管道。","/fuzzy— 对输入文本与字符串列表进行模糊匹配，将最佳字符串匹配输出到管道。","/regex name=scriptName [text]— 从正则表达式扩展执行指定文本的正则表达式脚本。该脚本必须已启用。"]},{"i":"trimtokens-的参数","l":"/trimtokens 的参数","p":["direction 设置修剪的方向，可以是 start 或 end。默认值： end。","limit 设置输出中保留的令牌数量。也可以指定一个包含数字的变量名。 必需参数。","未命名参数是要修剪的输入文本。"]},{"i":"fuzzy-的参数","l":"/fuzzy 的参数","p":["list 是一个 JSON 序列化的字符串数组，包含候选项。也可以指定包含列表的变量名。 必需参数。","未命名参数是要匹配的输入文本。输出是与输入最接近的候选项之一。"]},{"l":"自动补全","p":["自动补全在聊天输入框和大型快速回复编辑器中均已启用。","自动补全可以在输入的任何位置工作。即使有多个管道命令和嵌套闭包。","自动补全支持三种查找匹配命令的方式 ( 用户设置-> STscript 匹配)。","以...开头 旧的方式。只有完全以输入值开头的命令会显示。","包含 所有 包含 输入值的命令会显示。例如：输入 /delete 时，命令 /qr-delete 和 /qr-set-delete 会出现在自动补全列表中 (/qr- delete, /qr-set- delete)。","模糊 所有可以与输入值进行模糊匹配的命令会显示。例如：输入 /seas 时，命令 /sendas 会出现在自动补全列表中 (/ se nd as)。","命令参数也支持自动补全。对于必需参数，列表会自动显示。对于可选参数，按 Ctrl+ Space 打开可用选项列表。","输入 /: 来执行闭包或 QR 时，自动补全会显示作用域变量和 QR 的列表。","自动补全对宏（在斜杠命令中）有有限支持。输入 {{ 以获取可用宏的列表。","使用 上 和 下 箭头键 从自动补全选项列表中选择一个选项。","按 Enter 或 Tab 或 点击 一个选项将选项放置在光标位置。","按 Escape 关闭自动补全列表。","按 Ctrl+ Space 打开自动补全列表或切换选定选项的详细信息。"]},{"l":"解析器标志","p":["解析器接受标志以修改其行为。这些标志可以在脚本中的任何时候切换开关，所有后续输入将相应地进行评估。 您可以在用户设置中设置默认标志。"]},{"l":"严格转义","p":["启用 STRICT_ESCAPING 的更改如下。"]},{"i":"管道-1","l":"管道","p":["在引用值中，管道不需要转义。"]},{"l":"反斜杠","p":["符号前的反斜杠可以转义，以提供字面反斜杠后跟功能符号。"]},{"l":"替换变量宏","p":["该标志有助于避免在变量值包含可能被解释为宏的文本时发生双重替换。{{var::}} 宏最后被替换，并且在结果文本/变量值上不会发生进一步的替换。","将所有 {{getvar::}} 和 {{getglobalvar::}} 宏替换为 {{var::}}。在后台，解析器将在替换宏的命令之前插入一系列命令执行器：","调用 /let 将当前 {{pipe}} 保存到一个作用域变量","调用 /getvar 或 /getglobalvar 获取宏中使用的变量","调用 /let 将检索到的变量保存到一个作用域变量","调用 /return 使用保存的 {{pipe}} 值来恢复下一个命令的正确管道值"]},{"i":"快速回复脚本库和自动执行","l":"快速回复：脚本库和自动执行","p":["快速回复是一个内置的SillyTavern扩展，提供了一种简单的方法来存储和执行您的脚本。"]},{"l":"配置快速回复","p":["为了开始，请启用扩展面板（堆叠块图标），并展开快速回复菜单。","Quick Reply","快速回复默认是禁用的，您需要先启用它们。 然后您会看到一个条出现在您的聊天输入框上方。","您可以设置显示的按钮文本标签（我们建议使用表情符号以简洁为主），以及在单击按钮时将执行的脚本。","按钮的数量由 插槽数量 设置控制（最大 = 100），根据您的需要进行调整，完成后单击“应用”。","建议在使用STscript时禁用自动注入用户输入，否则可能会干扰您的输入，使用{{input}} 宏在脚本中获取输入框的当前值。","快速回复预设 允许拥有多个预定义快速回复集，并可以手动切换或使用/qrset (集名称) 命令进行切换。 在切换到不同的预设之前，请不要忘记单击“更新”以将您的更改写入当前使用的预设！"]},{"l":"手动执行","p":["现在您可以将第一个脚本添加到库中。选择任意空闲插槽（或创建一个），在左侧框中输入“Click me”以设置标签，然后将以下内容粘贴到右侧框中：","然后在聊天栏上方出现的按钮上点击 5 次。 每次点击将变量 clicks 增加 1，当值等于 5 时显示不同的消息并重置变量。"]},{"l":"自动执行","p":["通过点击创建命令的 ⋮ 按钮打开模态菜单。","在此菜单中，您可以执行以下操作：","在方便的全屏编辑器中编辑脚本","隐藏聊天栏中的按钮，使其仅对自动执行可用。","在以下一个或多个条件下启用自动执行：","应用程序启动","向聊天发送用户消息","在聊天中接收AI消息","打开角色或群组聊天","触发群组成员的回复","使用相同的自动化ID激活世界信息条目","为快速回复提供自定义工具提示（在您的用户界面中悬停在快速回复上时显示的文本）","出于测试目的执行脚本","仅在启用快速回复扩展时，命令才会自动执行。","例如，您可以通过添加以下脚本并将其设置为在用户消息时自动执行，在发送五条用户消息后显示一条消息。"]},{"l":"调试器","p":["以下部分记录了当前仅在 暂存 分支上可用的功能。","在扩展的快速回复编辑器中存在一个基本的调试器。可以在脚本中的任何位置使用 /breakpoint | 设置断点。当从 QR 编辑器执行脚本时，执行将在该点中断，允许您检查当前可用的变量、管道、命令参数等，并逐步执行其余代码。","QR Editor Debugger"]},{"l":"调用过程","p":["一个 /run 命令可以通过其标签调用在快速回复中定义的脚本，基本上提供了定义过程和返回结果的能力。这允许有可重用的脚本块，其他脚本可以引用它们。过程管道的最后结果会传递给其后的下一个命令。","让我们创建两个快速回复：","标签：","GetRandom","命令：","GetMessage","点击 GetMessage 按钮将调用 GetRandom 过程，该过程将解析 {{roll}} 宏并将数字传递给调用者，显示给用户。","过程不接受命名或未命名的参数，但可以引用与调用者相同的变量。","调用过程时避免递归，因为如果处理不当可能会产生“调用栈超出”错误。"]},{"l":"从不同的快速回复预设调用过程","p":["您可以使用 a.b 语法从不同的快速回复预设调用过程，其中 a = QR 预设名称，b = QR 标签名称。","默认情况下，系统将首先查找快速回复标签 a.b，因此如果您的标签确实是 \"QRpreset1.QRlabel1\"，它将尝试运行该标签。如果未找到此标签，它将搜索 QR 预设名称 \"QRpreset1\" 和标签为 \"QRlabel1\" 的 QR。"]},{"l":"快速回复管理命令"},{"l":"创建快速回复","p":["/qr-create (arguments, [message])– 创建一个新的快速回复，例如：/qr-create set=MyPreset label=MyButton /echo 123","参数：","label- 字符串 - 按钮上的文本，例如， label=MyButton","set- 字符串 - 快速回复集的名称，例如， set=PresetName1","hidden- 布尔值 - 按钮是否应隐藏，例如， hidden=true","startup- 布尔值 - 应用启动时自动执行，例如， startup=true","user- 布尔值 - 用户消息时自动执行，例如， user=true","bot- 布尔值 - AI 消息时自动执行，例如， bot=true","load- 布尔值 - 聊天加载时自动执行，例如， load=true","title- 布尔值 - 按钮上显示的标题/工具提示，例如， title=My Fancy Button"]},{"l":"删除快速回复","p":["/qr-delete (set=string [label])– 删除快速回复"]},{"l":"更新快速回复","p":["/qr-update (arguments, [message])– 更新快速回复，例如：/qr-update set=MyPreset label=MyButton newlabel=MyRenamedButton /echo 123","参数：","newlabel- 字符串 - 按钮的新文本，例如， newlabel=MyRenamedButton","label- 字符串 - 按钮上的文本，例如， label=MyButton","set- 字符串 - 快速回复集的名称，例如， set=PresetName1","hidden- 布尔值 - 按钮是否应隐藏，例如， hidden=true","startup- 布尔值 - 应用启动时自动执行，例如， startup=true","user- 布尔值 - 用户消息时自动执行，例如， user=true","bot- 布尔值 - AI 消息时自动执行，例如， bot=true","load- 布尔值 - 聊天加载时自动执行，例如， load=true","title- 布尔值 - 按钮上显示的标题/工具提示，例如， title=My Fancy Button"]},{"i":"#","p":["以下部分记录了当前仅在 暂存 分支上可用的功能。","qr-get- 检索快速回复的所有属性，例如：/qr-get set=myQrSet id=42"]},{"l":"创建或更新快速回复预设","p":["/qr-presetupdate (arguments [label]) 或 /qr-presetadd (arguments [label])","参数：","enabled- 布尔值 - 启用或禁用预设","nosend- 布尔值 - 禁用发送/插入用户输入（对斜杠命令无效）","before- 布尔值 - 在用户输入之前放置快速回复","slots- 整数 - 插槽数量","inject- 布尔值 - 自动注入用户输入（如果禁用，请使用 {{input}}）","创建一个新的预设（覆盖现有的），例如：/qr-presetadd slots=3 MyNewPreset"]},{"l":"添加快速回复上下文菜单","p":["/qr-contextadd (set=string label=string chain=bool [preset name])– 将上下文菜单预设添加到快速回复，例如：/qr-contextadd set=MyPreset label=MyButton chain=true MyOtherPreset"]},{"l":"移除所有上下文菜单","p":["/qr-contextclear (set=string [label])– 从快速回复中移除所有上下文菜单预设，例如：/qr-contextclear set=MyPreset MyButton"]},{"l":"移除一个上下文菜单","p":["/qr-contextdel (set=string label=string [preset name])– 从快速回复中移除上下文菜单预设，例如：/qr-contextdel set=MyPreset label=MyButton MyOtherPreset"]},{"l":"快速回复值转义","p":["|{} 可以在 QR 消息/命令中通过反斜杠进行转义。","例如，使用 /qr-create label=MyButton /getvar myvar \\| /echo \\{\\{pipe\\}\\} 创建一个调用 /getvar myvar | /echo {{pipe}} 的 QR。"]},{"l":"扩展命令","p":["SillyTavern 扩展（包括内置、可下载和第三方）可以添加自己的斜杠命令。以下仅是官方扩展功能的示例。该列表可能不完整，请确保检查 /help slash 以获取可用命令的最完整列表。","/websearch (query)— 在网上搜索指定查询的网页片段，并将结果返回到管道中。由 Web Search 扩展提供。","/imagine (prompt)— 使用提供的提示生成图像。由 Image Generation 扩展提供。","/emote (sprite)— 通过模糊匹配名称为活动角色设置精灵。由 Character Expressions 扩展提供。","/costume (subfolder)— 为活动角色设置精灵集覆盖。由 Character Expressions 扩展提供。","/music (name)— 强制按名称更改播放的背景音乐文件。由 Dynamic Audio 扩展提供。","/ambient (name)— 强制按名称更改播放的环境音效文件。由 Dynamic Audio 扩展提供。","/roll (dice formula)— 在聊天中添加一条隐藏消息，显示掷骰结果。由 D&D Dice 扩展提供。"]},{"l":"UI 交互","p":["脚本还可以与 SillyTavern 的 UI 进行交互：浏览聊天或更改样式参数。"]},{"l":"角色导航","p":["/random— 打开与随机角色的聊天。","/go (name)— 打开与指定名称角色的聊天。首先搜索完全匹配的名称，然后按前缀搜索，再按子字符串搜索。"]},{"l":"UI 样式","p":["/bubble— 将消息样式设置为“气泡聊天”样式。","/flat— 将消息样式设置为“扁平聊天”样式。","/single— 将消息样式设置为“单一文档”样式。","/movingui (name)— 按名称激活一个 MovingUI 预设。","/resetui— 将 MovingUI 面板状态重置为其原始位置。","/panels— 切换 UI 面板的可见性：顶部栏、左侧和右侧抽屉。","/bg (name)— 查找并使用模糊名称匹配设置背景。尊重聊天背景锁定状态。","/lockbg— 锁定当前聊天的背景图像。","/unlockbg— 解锁当前聊天的背景图像。"]},{"l":"更多示例"},{"i":"生成聊天摘要-由-ikaridevgit","l":"生成聊天摘要 (由 @IkariDevGIT)"},{"l":"按钮弹出使用"},{"i":"获取第-n-个斐波那契数使用比奈公式","l":"获取第 N 个斐波那契数（使用比奈公式）","p":["提示：将 fib_no 的值设置为所需的数字"]},{"i":"递归阶乘使用闭包","l":"递归阶乘（使用闭包）"}],[{"l":"热键","p":["要获取您在 SillyTavern 实例中有效的最新热键列表，请在任何聊天中使用 /help hotkeys 斜杠命令。","上 = 编辑聊天中的最后一条消息","Ctrl+上 = 编辑聊天中的最后一条用户消息","左 = 向左滑动","右 = 向右滑动（注意：当聊天框中有输入内容时，滑动热键被禁用）","Enter（选中聊天框时）= 将您的消息发送给 AI","Ctrl+Enter = 重新生成最后的 AI 响应","Alt+Enter = 继续上一个 AI 响应","Escape","(在编辑消息时且启用了消息编辑自动保存)= 关闭编辑框。","(在 AI 消息生成或流式传输时)= 立即停止生成。","移动设备禁用热键"]}],[{"l":"UI 扩展","p":["UI 扩展通过连接 SillyTavern 的事件和 API 来扩展其功能。您可以轻松创建自己的扩展。","想将您的扩展贡献给 官方仓库 吗？联系我们！"]},{"l":"示例","p":["查看简单的 SillyTavern 扩展的实时示例：","https://github.com/city-unit/st-extension-example- 基本扩展模板。展示了清单创建、本地脚本导入、添加设置 UI 面板和持久扩展设置的使用。"]},{"l":"打包","p":["扩展还可以利用打包将自己与其他模块隔离，并使用来自 NPM 的任何依赖，包括像 Vue、React 等 UI 框架。","https://github.com/SillyTavern/Extension-ReactTemplate- 使用 React 和 Webpack 的基础扩展模板库。","要从打包中使用相对导入，您可能需要创建一个导入包装器。以下是 Webpack 的一个示例："]},{"i":"manifestjson","l":"manifest.json","p":["每个扩展必须在 data/user-handle/extensions 中有一个文件夹，并且必须有一个包含插件元数据的 manifest.json 文件和一个 JS 脚本文件。","display_name 是必需的。显示在“管理扩展”菜单中。","loading_order 是可选的。数字越高，加载越晚。","requires 指定所需的 Extras 模块依赖项。除非连接的 Extras API 提供所有这些模块，否则扩展将不会加载。","optional 指定可选的 Extras 依赖项。","js 是主要的 JS 文件引用，是必需的。","css 是可选的样式文件引用。","author 是必需的。应包含作者的姓名或联系信息。","auto_update 如果扩展在 ST 包版本更改时应自动更新，则设置为 true。","可下载的扩展被挂载到 /scripts/extensions/third-party 文件夹中，因此应根据此使用相对导入。如果您计划从 GitHub 安装扩展，覆盖 third-party 文件夹中的内容，请注意在开发期间创建扩展的位置。"]},{"l":"requires 与 optional","p":["requires- 扩展可以安装，但在用户连接到提供所有指定模块的 Extras API 之前不会加载。","optional- 扩展可以安装并且将始终加载，但缺少的任何 Extras API 模块将在“管理扩展”菜单中突出显示。","要检查当前由连接的 Extras API 提供哪些模块，请从 scripts/extensions.js 导入 modules 数组。"]},{"l":"使用 getContext","p":["getContext() 函数让您可以访问 SillyTavern 上下文：","使用这个与主应用状态进行交互。","您还可以使用全局定义的窗口对象： SillyTavern.getContext()。"]},{"l":"从其他文件导入","p":["除非您正在构建一个打包的扩展，否则可以从其他 JS 文件中导入变量和函数。","例如，这段代码片段将从当前选定的 API 生成回复："]},{"l":"重要提示","p":["从 SillyTavern 代码中使用导入是不可靠的，如果 ST 模块的内部结构发生变化，可能会随时中断。 getContext 提供了一个更稳定的 API。","如果您在 getContext 中缺少任何函数/属性，请与开发者联系或向我们发送 Pull Request！"]},{"i":"注册斜杠命令新方式","l":"注册斜杠命令（新方式）","p":["虽然 registerSlashCommand 仍然存在以兼容旧版本，但新的斜杠命令现在应通过 SlashCommandParser.addCommandObject() 注册，以便为解析器提供有关命令及其参数的扩展详细信息（进而用于自动完成和命令帮助）。"]},{"i":"已弃用-注册斜杠命令旧方法","l":"(已弃用) 注册斜杠命令（旧方法）","p":["使用 registerSlashCommand() 注册一个新的斜杠命令：","命令执行示例：","参数说明：","command- 主要命令名称。它将在自动补全和帮助命令中使用。","callback- 当命令被触发时将执行的函数。回调函数可以接受两个参数：","namedArgs- 一个包含命名参数的对象","unnamedArgs- 一个包含未命名参数的字符串","aliases- 一个包含别名字符串的数组。可以使用任何别名调用命令，但它们不会显示在自动补全中，而会在帮助命令中列出。","helpString- 当调用 /help slash 命令时将显示的字符串。必须描述您的命令的功能以及接受哪些参数。可以包含 HTML 标记。","所有注册的命令都可以在 STscript 中以任何可能的方式使用。","在极少数情况下，未命名命令参数也可以接收一个数字，因此如果您期望具体类型，请务必进行类型检查或转换！"]},{"l":"监听事件类型","p":["使用 eventSource.on() 来监听事件：","主要的事件类型有：","MESSAGE_RECEIVED","MESSAGE_SENT","CHAT_CHANGED","其余的可以在 这里 找到。"]},{"l":"Do Extras 请求","p":["doExtrasFetch() 函数允许您向 SillyTavern Extra 服务器发起请求。","例如，要调用 /api/summarize 端点：","getApiUrl() 返回 Extras 服务器的基本 URL。","doExtrasFetch() 函数：","添加 Authorization 和 Bypass-Tunnel-Reminder 头部","处理结果的获取","返回结果（响应对象）","这使得从您的插件调用 Extra 的 API 变得简单。","您可以指定：","请求方法：GET、POST 等","额外的头部","POST 请求的主体","以及其他任何获取选项"]}],[{"l":"服务器插件","p":["这些插件允许添加仅使用 UI 扩展无法实现的功能，例如创建新的 API 端点或使用在浏览器环境中不可用的 Node.JS 包。","插件位于 SillyTavern 的 plugins 目录中，并在服务器启动时加载，但 仅当 config.yaml 文件中的 enableServerPlugins 设置为 true 时。","插件没有沙箱，安装和运行时请小心！"]},{"l":"插件类型"},{"l":"文件","p":["一个可执行的 JavaScript 文件，扩展名为 \".js\"（用于 CommonJS 模块）或 \".mjs\"（用于 ES 模块），包含一个导出 init 函数的模块，该函数接受一个为您的插件专门创建的 Express 路由器作为参数，并返回一个 Promise。","该模块还应导出一个 info 对象，包含有关插件的信息（ id、 name 和 description 字符串）。这将为加载器提供有关插件的信息。","您可以通过路由器注册路由，这些路由将注册在 /api/plugins/{id}/{route} 路径下。例如，插件 example 的 router.get('/foo') 将生成如下路由：/api/plugins/example/foo。","插件还可以 可选地 导出一个 exit 函数，在关闭服务器时执行清理。它不应有参数，并且必须返回一个 Promise。","插件导出的 TypeScript 合同：","以下是一个“Hello world！”插件示例："]},{"l":"目录","p":["您可以通过以下方式之一从 plugins 的子目录加载插件（按检查顺序）：","package.json 文件，其中包含 \"main\" 字段指向可执行文件的路径。","CommonJS 模块的 index.js 文件。","ES 模块的 index.mjs 文件。","结果文件必须导出一个 init 函数和一个 info 对象，其要求与单个文件相同。","目录插件示例（带有 index.js 文件）： https://github.com/SillyTavern/SillyTavern-DiscordRichPresence-Server"]},{"l":"打包","p":["建议使用打包工具（如 Webpack 或 Browserify）将所有依赖项打包成一个文件。确保将“Node”设置为构建目标。","使用 Webpack 和 TypeScript 的插件模板库： https://github.com/SillyTavern/Plugin-WebpackTemplate"]}],[{"l":"函数调用","p":["函数调用允许通过让 LLM 使用结构化数据来为您的扩展添加动态功能，您可以使用这些数据触发扩展的特定功能。"]},{"l":"限制和前提条件","p":["此功能仅适用于某些聊天完成源：OpenAI、Claude、MistralAI、Cohere、Groq、OpenRouter 和 Perplexity。","文本完成 API 不支持函数调用，但其中一些选择性地允许 JSON 语法模式。它们的使用超出了本文档的范围。","对于使用流式传输的请求，函数调用功能不可用。注意：后台（“安静”）请求永远不会流式传输，即使启用了流式传输。","函数调用的支持必须首先由用户明确允许。这可以通过在 AI 响应配置面板中启用“启用函数调用”选项来完成。","当调用一个函数时，正常的响应生成将被抑制，因此在调用 generateQuietPrompt 时，您可能会收到一个空响应。","无法保证 LLM 会执行任何函数调用。始终提供备份计划，以防函数调用未执行。","要确定是否支持函数调用功能，可以调用从 openai.js 模块导出的 isFunctionCallingSupported。"]},{"l":"注册一个函数","p":["当准备一个聊天完成请求时，通过 eventSource 对象发出一个类型为 LLM_FUNCTION_TOOL_REGISTER 的事件。注册是临时的，在请求之间不会持久化，因此您可以始终根据事件数据决定是否跳过注册。","事件数据包括以下内容：触发事件的生成类型、生成数据（包括采样参数和组装的聊天提示）以及用于注册函数工具的回调函数。要注册一个函数，您必须调用 registerFunctionTool 函数，并传入以下参数：","name: 要注册的函数工具的名称。这将在后续作为调用该函数的标识符使用。","description: 函数工具的描述。它帮助语言模型更好地理解该工具的用途。","params: 函数工具参数的 JSON 架构。模型将尝试生成一个与此架构匹配的 JSON 对象，用于函数调用的参数。","required: 是否强制使用该函数工具。这只是一个提示，并不能保证您的函数会被执行，特别是如果 API 不支持同时调用或没有提供强制执行的方式。"]},{"l":"处理成功的调用","p":["当在LLM的输出中检测到函数调用时，将通过 eventSource 对象发出类型为 LLM_FUNCTION_TOOL_CALL 的事件。事件数据包括以下内容：被调用的函数工具的名称和以JSON序列化字符串形式传递给函数的参数。","注意： 在使用参数之前，请务必检查参数是否可以正确解析并进行基本验证！有时模型生成的JSON可能不正确。"]},{"l":"示例代码","p":["函数注册和使用的示例："]}],[{"l":"AllTalk TTS","p":["AllTalk 是一个基于 Coqui XTTS 模型的语音克隆系统，只需一个高质量的 wav 音频文件即可尝试重现原始说话者的声音。它还提供微调选项，以在需要时提高语音的重现质量。","要查看完整的功能集，请访问此 link 和 Screenshot here","除了标准的 SillyTavern 文本分割选项以选择说出或不说出的内容外，AllTalk 还提供了额外的选项，可以使用 AllTalk 叙述者，以便以替代声音朗读非角色文本 example","文档和自定义设置内置于 AllTalk，并可通过 SillyTaven TTS 界面中的链接获取。"]},{"i":"设置","l":"\uD83D\uDFE9 设置","p":["Windows 机器上的 DeepSpeed 将作为标准安装。Linux 机器有其他要求，这些要求在设置工具和此页面中有详细说明。","启动 AllTalk 设置脚本 atsetup.bat 或 ./atsetup.sh","在 AllTalk 页面 选择 代码> 下载 ZIP，然后将其解压到 text-generation-webui 扩展文件夹中 例如 \\text-generation-webui\\extensions\\alltalk_tts\\","在 AllTalk 页面 选择 代码> 下载 ZIP，然后将其解压到您选择的文件夹中 例如 C:\\myfiles\\alltalk_tts\\","在终端/命令提示符中，在 text-generation-webui 文件夹中，您将使用 cmd_windows.bat 或 ./cmd_linux.sh 启动其 Python 环境","在终端/命令提示符中，进入 AllTalk 文件夹，例如 cd alltalk_tts","如果您希望查看视频，请访问 这里","当 AllTalk 服务器启动时，其默认设置和文档页面将在 http://127.0.0.1:7851/","微调和 DeepSpeed 有其他安装要求（根据您的操作系统），因此请阅读设置工具中的任何说明，并参考 AllTalk Github 页面以获取详细说明。","微调有其他安装要求，因此请阅读设置工具中的任何说明，并参考 AllTalk Github 页面以获取详细说明。","您有 2 种当前的安装选项。如果您使用 Text-generation-webui 作为 LLM 模型加载器，可以将 AllTalk 作为扩展添加。如果您希望将 AllTalk 作为独立使用，也可以这样做。有关最新的文档、支持和帮助，请访问 这里。以下是两种快速安装方法（附视频），如果您需要手动安装方法，请查看 AllTalk 网站。","打开终端/控制台，进入 \\text-generation-webui\\extensions\\ 文件夹 并 git clone https://github.com/erew123/alltalk_tts","打开终端/控制台，进入您选择的文件夹，例如 C:\\myfiles\\ 文件夹 并 git clone https://github.com/erew123/alltalk_tts","按照屏幕上的提示安装所需的正确要求文件。建议在安装 DeepSpeed 之前测试 AllTalk 是否正常工作。","每次需要对 AllTalk 进行更改，或使用微调等功能时，请始终先启动 Text-generation-webui Python 环境。","注意 您需要在 Text-generation-webui 界面 中 取消选中“启用 TTS”，否则在使用 SillyTavern 时，由于 Text-generation-webui 发送消息的方式，AllTalk 将双重生成 TTS。可以在 AllTalk 设置页面将其设置为启动设置。","点击展开以下其中一个：","要下载 AllTalk 设置，您可以选择：","请阅读 \uD83D\uDFE9 其他安装说明（那里还有额外的声音可用）。","进入 AllTalk 文件夹，例如 cd extensions 然后 cd alltalk_tts"]},{"i":"其他安装说明","l":"\uD83D\uDFE9 其他安装说明","p":["在首次启动时，AllTalk 将下载 Coqui XTTSv2 2.0.2 模型到其 models 文件夹（需要 1.8GB 的空间）。如果您想知道它在做什么，请检查命令提示符/终端窗口。在显示“模型已加载”后，AllTalk 通常会在几秒钟后在其 IP 地址上可用，您可以在浏览器中连接。","扩展加载后，请在 http://127.0.0.1:7851/ 上查找所有文档和设置。","在哪里可以找到声音 https://aiartes.com/voiceai 或 https://commons.wikimedia.org/ 或 YouTube 上的访谈等。有关如何剪切和准备声音样本的说明在内置文档中。","请阅读有关确保您的角色卡正确设置的说明。","一些额外的 AllTalk 声音可以在 这里 下载。"]},{"i":"关于角色卡和问候消息的说明","l":"\uD83D\uDFE9 关于角色卡和问候消息的说明","p":["为叙述者准备的消息应放在星号 * 中，而为角色准备的消息应放在双引号 中。然而，AI 系统经常偏离这些规则，导致文本既不在引号中也不在星号中。有时，文本可能只带有一个星号，AI 模型可能在对话中间改变其格式。例如，它们可能最初使用星号，然后切换到未标记的文本。正确格式化的行应如下所示：","嘿！我很高兴终于见到你。我听说过很多关于你的好事，我迫不及待想和你讨论计算机。* 她走过房间，拿起了她的咖啡杯*","大多数叙述者/角色系统在遇到星号或引号时会切换声音，这在一定程度上是有效的。AllTalk 在其句子拆分和识别方法上经过了几次修订。虽然在消息格式中一些不规则性和 AI 偏差是不可避免的，但现在任何以星号开头或结尾的行应该被识别为叙述者对话。用双引号括起来的行被识别为角色对话。对于任何其他文本，您可以选择 AllTalk 如何处理它：无论它应该被解释为角色还是叙述者对话（大多数 AI 系统在生成未用引号或星号括起来的文本时倾向于更多地偏向某种格式）。","您可以在终端/命令提示符中监控 AllTalk 识别的叙述者行，并在需要时调整其行为（文本不在 - 功能）。"]},{"i":"在-sillytavern-中使用-alltalk-及理解设置","l":"\uD83D\uDFE8 在 SillyTavern 中使用 AllTalk 及理解设置","p":["当您加载 AllTalk 后，在 SillyTavern 的 TTS 页面中选择 AllTalk，底部有一个链接 \"AllTalk Config & Docs\"。点击该链接，它将带您到您的 AllTalk 服务器，在那里您可以找到设置的解释。","某些设置不能同时使用，因此 AllTalk 会根据需要启用/禁用某些设置。","如果在 AllTalk 可用之前加载了 SillyTavern，您可能需要在 SillyTavern 的 TTS 扩展页面上点击重新加载按钮。","在 SillyTavern 中使用 AllTalk 的一些快速提示：","每次只更改 DeepSpeed、Low VRAM 或 Model 中的一个。等待它显示“准备就绪”后再更改其他内容。","您可以在 AllTalk 设置页面中永久更改 AllTalk 启动设置或 DeepSpeed、Low VRAM 和 Model。","不同的 AI 模型对引号和星号的使用方式不同，因此在使用 AllTalk 叙述者时，您可能需要根据模型更改“文本不在内部”。","将新的语音样本添加到 voices 文件夹。您可以对模型进行微调，使其听起来更接近原始样本。","DeepSpeed 将使 TTS 的处理时间提高到 2-3 倍更快（在独立安装中默认安装，但需要激活）。","如果在加载 LLM 后剩余内存不多，Low VRAM 会非常有益。"]},{"i":"支持-帮助-协助及其他问题","l":"\uD83D\uDFE8 支持、帮助、协助及其他问题","p":["请访问 这里"]}],[{"l":"Blip","p":["本指南将引导您设置和自定义 Blip 扩展，以提升您的 SillyTavern 体验。此扩展以可变速度为消息文本添加动画，并在动画过程中播放声音。您可以使用音频文件或生成声音。"]},{"l":"前提条件","p":["在开始之前，请确保您已满足以下前提条件：","确保您在SillyTavern的最新 staging 分支上。","从扩展面板中的“下载扩展和资产”菜单（叠加块图标）安装“Blip”扩展。"]},{"l":"Blip 全局设置","p":["Blip 用户消息:","启用复选框以在用户消息上播放动画。","为用户设置一个配置文件，或者如果希望用户有 Blip 动画，则设置默认配置文件。","仅对特定文本使用 Blip:","启用复选框仅对引号内的文本使用 Blip。","启用复选框以忽略星号内的所有内容。","自动向下滚动:","启用复选框使聊天向下滚动以跟随文本动画，如果希望在动画期间自由滚动，则禁用它。","音量","如果只希望文本动画，则静音音频。","您可以调整 Blip 音频的全局音量。"]},{"i":"角色动画声音配置文件","l":"角色动画/声音配置文件","p":["从列表中选择一个文件。","使用最小/最大频率滑块自定义播放的声音。","勾选复选框以强制在播放完整个文件之前等待再次播放（如有需要）。","包括用户和一个可选的默认配置文件，当角色没有配置文件时将使用该配置文件。","可以使用删除按钮删除任何配置文件。","声音来源：文件：","声音来源：生成的声音：","如果最小/最大值不同，则每次播放时都会在此范围内播放随机声音。","如果列表中仅显示当前聊天角色，请勾选复选框以显示所有角色。","如果您的角色未出现在列表中，请使用刷新按钮。","如果还没有配置文件，则当前参数将成为他的配置文件设置。","您可以为每个角色保存一个配置文件：","您可以从资产扩展菜单获取官方ST声音资源。","或者将文件直接放入：\\SillyTavern\\data\\user-handle\\assets\\blip。","文本动画设置：","设置与1.0不同的最小/最大速度乘数，以实现速度动画的随机性。","设置大于0的逗号/短语延迟，以在打印特殊字符时添加暂停，可以为动画增添更多生动性。在这种情况下，音频也会暂停。","设置文本速度：每个字母打印之间的延迟（毫秒）。","设置音量乘数，仅在需要时影响此声音配置文件。","设置音频速度：每个声音之间的延迟，与文本速度无关。","选择一个角色，如果他有配置文件，将加载该配置文件。","选择要分配/更新配置文件的角色：","音频参数："]},{"l":"备注","p":["Blip 动画只能在接收到完整消息后开始，请勿使用流模式。","感谢您遵循本指南！您的 SillyTavern 体验现在已通过文本动画和 blip 语音得到了丰富。"]}],[{"l":"EmulatorJS","p":["此扩展允许您直接从SillyTavern聊天中玩复古游戏主机游戏。"]},{"l":"安装","p":["先决条件：","最新版本的 SillyTavern。","从网上下载的 ROM 文件。您可以在 任何地方 找到它们。","安装方法：","使用 SillyTavern 的扩展下载器进行安装。","或使用此链接： https://github.com/SillyTavern/SillyTavern-EmulatorJS"]},{"l":"使用方法","p":["打开 \"EmulatorJS\" 扩展菜单。","点击 \"添加 ROM 文件\"。ROM 文件保存在您的浏览器存储中，而不是存储在服务器上。","选择要添加的游戏文件。输入名称和核心（如果未自动检测）。如果核心需要 BIOS 文件，请也添加它。","点击列表中的 \"播放\" 按钮或通过魔杖菜单启动。","启动游戏后，您可以在模拟器界面中自定义控制和其他设置。","如果您需要休息，请使用保存/加载状态功能。","查看 EmulatorJS 文档以查看可用核心及其要求的列表： 系统。"]},{"l":"评论模式","p":["借助像 GPT-4 Vision 这样的多模态模型，您的 AI 机器人可以观察您的游戏玩法并提供机智的角色内评论。"]},{"l":"要求","p":["支持 ImageCapture 的浏览器。已在桌面 Chrome 上测试。Firefox 需要通过配置启用。Safari 不支持。","建议使用图像内联模式。需要 OpenAI 或 OpenRouter API 密钥，选择“gpt-4-vision”作为模型；Google MakerSuite 的 Gemini Vision 模型；或 Anthropic Claude 3（推荐使用 Opus 模型）。","如果禁用图像内联，请确保启用“图像字幕”扩展，然后选择“多模态”字幕源：","具有访问“gpt-4-vision”模型的 OpenAI API。","具有兼容多模态模型的 OpenRouter API。","在 Koboldcpp 或 oobabooga TextGen WebUI 中本地托管的 Llava 模型。"]},{"l":"如何启用评论","p":["确保您在 EmulatorJS 扩展设置中设置提供评论的间隔。该设置定义了角色使用您当前游戏玩法的快照查询评论的频率。值为 0 表示不提供评论。","选择一个角色聊天并启动游戏。为了获得最佳性能，请确保 ROM 文件正确命名，以便 AI 能够获得更多背景上下文。","像往常一样开始游戏。视觉模型将定期被查询，以根据它“看到”的最新截图撰写评论。"]},{"l":"设置","p":["标题模板 - 用于描述游戏内截图的提示。支持 {{game}} 和 {{core}} 额外宏。","评论模板 - 用于根据生成的标题撰写评论的提示。支持 {{game}}、{{core}}、{{caption}} 额外宏。在图像内联模式下，{{caption}} 被替换为 see included image。","强制标题 - 将强制使用多模态标题，即使支持并启用了图像内联。"]},{"i":"为什么我看不到任何评论","l":"为什么我看不到任何评论？","p":["如果出现以下情况，评论会暂时暂停（跳过间隔步骤）：","模拟器已暂停（使用暂停按钮，而不是游戏内）。","浏览器窗口失去焦点。","用户输入区域不为空。这是为了让您可以安心输入回复。","另一个回复生成正在进行中。","TTS 语音正在朗读。评论将被延迟（最多 20 秒）直到朗读完成，但不会被跳过。","其他常见问题：","确保在启动游戏之前设置了评论间隔。","确保您已设置多模态 API 密钥，并且 ST 服务器控制台没有错误。","仍然无法工作？请将您的浏览器调试控制台日志发送给我们（按 F12）。"]},{"l":"版权","p":["EmulatorJS 引擎 (GPLv3): https://github.com/EmulatorJS/EmulatorJS"]}],[{"l":"Live2D","p":["本指南将引导您完成为您的SillyTavern体验设置和自定义Live2D扩展的过程。此扩展允许您为角色使用Live2D动画模型，为您的虚拟角色提供动态和互动的元素。"]},{"l":"前置条件","p":["在开始之前，请确保您满足以下前置条件：","分支选择：确保您正在使用最新的 staging 分支的 SillyTavern，以访问最新的功能和更新。","扩展安装：从扩展面板中的“下载扩展和资产”菜单（由堆叠块图标表示）安装“Live2D”扩展。","模型文件夹放置：将您的 Live2D 模型文件夹放置到 /data/user-handle/assets/live2d 目录中。一个正确组织的 live2d 资产文件夹可能如下所示：","资产文件夹示例","Live2D 模型文件夹应包含 Live2D 模型所需的所有组件，例如表情、动作、纹理、声音和设置文件。特别是 ***.model.json 文件必须位于 Live2D 模型文件夹的根目录中，以便扩展能够检测到该模型。在此示例中， shizuku live2d 模型文件夹可能如下所示：","Live2d 模型文件夹示例","注意：模型也可以放置在特定角色的文件夹中，例如 /data/user-handle/characters/Shizuku/live2d/。但是，角色文件夹中的模型仅对该特定角色可访问。"]},{"l":"扩展设置","p":["Live2D 扩展提供了多种设置，以自定义动画模型的行为。以下是主要设置：","UI global settings"]},{"l":"全局设置","p":["启用：","勾选此复选框以激活扩展，使您的 Live2D 模型能够在 SillyTavern 中进行交互。","如果您只想使用普通精灵，可以禁用该扩展。","当您想在群聊中移动普通精灵时，可以禁用该扩展，并在准备使用 Live2D 模型时重新启用。","跟随光标：","勾选此复选框以使 Live2D 模型跟随您的光标，前提是该模型支持此功能。","自动发送互动：","勾选此复选框以在您点击具有映射消息的区域时自动触发角色互动（有关详细信息，请参阅命中区域部分）。"]},{"l":"调试设置","p":["这些设置帮助您控制 Live2D 模型的行为和可见性，以便进行调试。","动画前重置模型：","启用此复选框以在任何动画之前重新加载模型。这会强制动画开始，并允许您在必要时快速点击。一些模型可能需要这样做，以确保动画从兼容状态开始。","显示模型框架：","启用此复选框以显示模型框架，使您更容易识别点击拖动模型的位置。它还会显示命中区域（如果可用）。将鼠标悬停在命中区域上将显示其名称。","重新加载按钮","点击此按钮以重新加载每个 live2d 模型。在出现故障的情况下使用它。"]},{"l":"角色选择","p":["这些设置允许您管理角色并为其分配 Live2D 模型。","刷新按钮：","点击刷新按钮以更新当前聊天中的角色列表。","选择角色：","使用下拉列表选择一个角色以分配 Live2D 模型。","移除按钮：","点击此按钮以删除角色的所有分配模型。将出现确认提示以确认删除。"]},{"l":"模型选择","p":["UI模型列表","刷新按钮：","如果您的Live2D模型未出现在列表中，请点击刷新按钮。","选择模型：","从列表中选择一个模型以将其分配给选定的角色。","模型可以位于资产文件夹或当前角色的文件夹中。","列表显示模型文件夹名称、其来源（资产或角色）以及检测到的模型设置文件的名称。","请注意，一些模型文件夹可能包含同一模型的不同版本。您可以尝试不同的模型文件，以查看哪个效果最佳。","如果选择无，将使用正常的精灵（如果有的话）。","设置是按角色和模型保存的。"]},{"l":"模型设置","p":["UI模型设置","模型缩放:","使用滑块调整模型的大小，使其变大或变小。","模型中心 X 偏移:","使用滑块改变模型相对于窗口中心的水平位置。","模型中心 Y 偏移:","使用滑块调整模型相对于窗口中心的垂直位置。"]},{"l":"备注","p":["设置已保存并会在不同的聊天中延续。","您还可以使用鼠标拖动模型，这些设置将被更新并保存。","使用这些用户界面设置将您的模型重新带回屏幕，如果您不小心将其移出视野。还可以勾选“显示框架”复选框，以清楚地看到可以点击以拖动模型的位置。"]},{"l":"模型对话","p":["UI 模型对话","Param mouth open Y id","从列表中选择与模型嘴巴 Y 值对应的参数 ID。并非所有模型都有该参数，名称可能因模型而异。通常类似于 \"PARAM_MOUTH_OPEN_Y\" 或 \"ParamMouthOpenY\"。在从列表中选择元素时，请检查模型；它会尝试运行说话动画。如果嘴巴移动了，那就对了！","嘴巴运动速度","调整滑块以改变嘴巴动画的运动速度。","每个字符的时间","设置每个字符的时间持续。对话动画的持续时间将是此时间乘以消息的字符数量。"]},{"i":"备注-1","l":"备注","p":["这个嘴部动画并不是在每个模型和每个动画上都能使用。即使您的模型有嘴部移动的动画，也并不意味着这个扩展可以控制嘴部动画。如果参数列表中没有任何内容，您的模型可能是使用过于旧的 Live2D 版本制作的，无法正确访问参数。"]},{"l":"模型动画","p":["UI 模型动画","起始动画","从列表中选择一个表情和动作，当与角色开始聊天时将播放。如果需要在一段时间内隐藏角色以达到完美效果，您还可以添加一个延迟，在此期间模型将不可见。","默认动画","从列表中选择一个表情和动作，当角色发送消息时将播放。在使用分类表情扩展时，使用备用动画。"]},{"i":"备注-2","l":"备注","p":["当您在列表中选择一个动画时，它将播放。","使用重播按钮重新播放所选动画。","一些模型的表情定义为动作。","如果列表中没有显示任何内容，可能是您的模型设置文件没有定义表情/动作。"]},{"l":"点击区域映射","p":["UI模型映射","默认点击动画","从列表中选择一个表情和动作，当你点击模型时将播放。你还可以设置一条将作为用户消息发送的消息。","点击区域","如果模型有点击区域，它们将被列出，你可以为每个区域分配一个动画/消息。"]},{"i":"备注-3","l":"备注","p":["某些模型没有命中区域，但默认点击会对所有区域进行检测。","如果您在没有映射的命中区域上点击或在任何命中区域外点击，默认点击将被触发。","命中区域的优先级在模型中定义；例如，“嘴”在“头”内部。如果它没有正常工作，可能是由于模型文件的问题。","对于某些模型，动画需要完成后才能开始另一个动画。如果您想强制刷新并重复动画，请使用调试复选框。"]},{"l":"分类表情映射","p":["UI model classify","要求","需要使用分类表情扩展；否则，将回退到默认动画。","映射","对于分类扩展检测到的每种情感，您可以分配一个表情/动作动画。"]},{"i":"备注-4","l":"备注","p":["如果在接收到新消息时，之前的动画尚未完成，则新动画可能不会播放。此行为取决于 Live2D 模型。如果您想强制播放动画，请使用调试复选框。","感谢您遵循本指南！您的 SillyTavern 体验现在已通过动画和互动的 Live2D 模型得到了丰富。"]}],[{"l":"talkinghead"},{"i":"它是什么","l":"它是什么？","p":["AITuber的Talking Head Anime 3 Demo的实现。它具有以下功能：","从单个静态图像生成随机的类似Live 2D的运动动作。","与任何TTS输出的声音同步发音。","此扩展包含来自“Talking Head(?) Anime from a Single Image 3: Now the Body Too”项目的原始演示程序。顾名思义，该项目允许您为动漫角色动画，而您只需要该角色的单个图像即可。共有两个演示程序：","manual_poser允许您通过图形用户界面操控角色的面部表情、头部旋转、身体旋转和因呼吸而导致的胸部扩张，因此您可以将其保存为默认表情，例如快乐、悲伤、喜悦等。 ifacialmocap_puppeteer允许您将面部动作转移到动漫角色上。"]},{"l":"硬件要求","p":["您可以使用 CPU 或 GPU 模式（CPU 为默认模式）。但是，在 CPU 模式下，预计约为 1 FPS，而在 GPU 模式下，使用 RTX3060 我获得约 9-10 FPS。","ifacialmocap_puppeteer 需要一台能够从视频源计算混合形状参数的 iOS 设备。这意味着该设备必须能够运行 iOS 11.0 或更高版本，并且必须具备 TrueDepth 前置摄像头。（有关更多信息，请参见此页面。）换句话说，如果您拥有 iPhone X 或更好的设备，您应该没问题。"]},{"l":"如何使用","p":["您必须启动 extras 模块以使 talkinghead 正常工作： classify 和 talkinghead！ classify 是处理 talkinghead.png 文件所必需的。此外，您还可以使用 --talkinghead-gpu 将混合模型加载到 GPU 内存中，使动画速度提高 10 倍。强烈建议使用 GPU 加速！默认情况下，程序启动后将加载默认图像 SillyTavern-extras\\talkinghead\\tha3\\images\\lambda_00.png。您可以通过访问 http://localhost:5100/api/talkinghead/result_feed 或 YOUR EXT URL:PORT/api/talkinghead/result_feed 来验证它是否正常工作。","服务器启动后，转到扩展 API 选项卡并连接。然后只需选择一个角色卡以加载。(--enable-modules=classify,talkinghead --talkinghead-gpu 启动 server.py 时)","现在选择角色表情，如果您勾选图像类型 talkinghead 框，脚本将用 YOUR EXT URL:PORT/api/talkinghead/result_feed 的结果替换当前角色表情，取消勾选该框应该将图像返回到原始表情，但有时您需要发送新消息以“重新加载”图像。","如果角色目录中没有 talkinghead.png 文件，它将简单地显示默认图像或最后一个具有 talkinghead.png 文件的角色卡。当角色卡更改时，动画源图像也会更改。","现在打开角色表情，向下滚动到 talkinghead 图像并上传符合下面“输入图像约束”部分要求的图像文件。","然后勾选和取消勾选 talkinghead 框以重新加载角色。如果图像看起来很滑稽，可能是因为它不透明/没有 alpha 通道。否则，请按照下面的说明和模板操作。"]},{"l":"输入图像的约束","p":["为了使系统正常工作，输入图像必须遵循以下约束：","它的分辨率应为 512 x 512。 （如果程序接收到其他大小的输入图像，它将把图像调整为此分辨率并且也以此分辨率输出。） 它必须具有 alpha 通道。 它必须只包含一个类人角色。 角色应直立并面向前方。 角色的手应位于头部下方且远离头部。 角色的头部应大致包含在图像上半部分中间的 128 x 128 框内。 所有不属于角色的像素的 alpha 通道（即背景像素）必须为 0。","输入约束"]},{"l":"高级部分"},{"l":"Python 环境","p":["除了基础功能 (app.py) 之外，manual_poser 和 ifacialmocap_puppeteer 还可以作为桌面应用程序使用。要运行它们，您需要为运行用 Python 语言编写的程序设置一个环境。该环境需要包含以下软件包：","Python >= 3.8","PyTorch >= 1.11.0，支持 CUDA","SciPY >= 1.7.3","wxPython >= 4.1.1","Matplotlib >= 3.5.1","一种方法是安装 Anaconda 并在您的 shell 中运行以下命令：","conda create -n talking-head-anime-3-demo python=3.8 conda activate talking-head-anime-3-demo conda install pytorch torchvision torchaudio cudatoolkit=11.3 -c pytorch conda install scipy pip install wxpython conda install matplotlib"]},{"l":"额外的混合模型","p":["只包含一个（最轻）模型，如果您想要额外的混合模型，您需要从 https://www.dropbox.com/s/y7b8jl4n2euv8xe/talking-head-anime-3-models.zip?dl=0 下载模型文件，并将其解压到 SillyTavern-extras\\talkinghead\\tha3\\models 文件夹中。最终，数据文件夹应如下所示：","tha3","models","separable_float","editor.pt","eyebrow_decomposer.pt","eyebrow_morphing_combiner.pt","face_morpher.pt","two_algo_face_body_rotator.pt","separable_half","editor.pt:","standard_float","standard_half","模型文件根据创意共享署名 4.0 国际许可证进行分发，这意味着您可以将其用于商业目的。然而，Pramook Khungurn. Talking Head(?) Anime from a Single Image 3: Now the Body Too. https://github.com/pkhungurn/talking-head-anime-3-demo 是创作者。"]},{"l":"运行 manual_poser 桌面应用程序","p":["打开一个终端。将您的工作目录更改为仓库的根目录。然后，运行：","python tha3/app/manual_poser.py 请注意，在运行上述命令之前，您可能需要激活包含所需软件包的 Python 环境。","conda activate extras 如果您尚未激活该环境。"]}],[{"l":"TTS","p":["SillyTavern 提供了多种 TTS 选项。本页面解释了设置和使用方法。"]},{"i":"什么是它","l":"什么是它？","p":["TTS用于让声音朗读您聊天的部分内容。"]},{"l":"配置 TTS"},{"l":"TTS 提供者选择框","p":["用于选择您想要使用的 TTS 服务。","ElevenLabs- 需要付费订阅，目前提供最高质量的声音。","Silero- 免费，在您的 PC 上运行，质量可能差异很大。","System- 使用您的操作系统 TTS 引擎（如果存在）。质量可能因操作系统而异。","Edge- 免费，通过 Azure 运行，通常速度较快，声音听起来自然但干燥且没有情感。就像在听晚间新闻或广播播音员。","Coqui-TTS- 免费，目前没有 API 实现。高性能的 Text2Speech 模型（Tacotron, Tacotron2, Glow-TTS, SpeedySpeech）以及 Bark。","Novel- 需要付费的 NovelAI 订阅，由 NovelAI 的 TTS 引擎生成。","RVC- 免费，声音克隆。"]},{"l":"复选框","p":["\"Good evening, senpai\"","\"Good evening, senpai\", she says.","\"nya\"... \"Good evening, senpai\"","Auto Generation- 当新消息进入聊天时，自动开始播放 TTS。","Cohee approaches you with a faint \"nya\" \"Good evening, senpai\", she says.","Disabled","Enabled","Enabled- 开启/关闭 TTS 播放。","Ignore *text, even \"quotes\", inside asterisks*","Ignore *text, even \"quotes\", inside asterisks*- TTS 将不会播放任何 *星号* 内的文本，甚至 \"引号\"（内部变量名 = narrate_dialogues_only）。","Narrate only the translated text- 这将使 TTS 仅叙述翻译后的文本。","Only narrate \"quotes\"","Only narrate \"quotes\"- 限制 TTS 播放仅包括 引号 内的文本。这将 *包括 引号 在星号行内*（内部变量名 = narrate_quoted_only）。","同时选中 \"仅叙述引号\" 和 \"忽略星号\" 复选框将导致 TTS 仅读取不在星号内的 \"引号\"，并忽略其他所有内容。","给定示例文本：*Cohee approaches you with a faint nya* Good evening, senpai, she says. 以下是根据 Ignore *text, even \"quotes\", inside asterisks* 和 Only narrate \"quotes\" 的布尔状态修改文本的表格：","输出"]},{"l":"滑块","p":["这些将根据您选择的 API 进行更改。","（解释即将到来）"]},{"l":"按钮","p":["Apply- 在设置 TTS API 和编辑语音映射后必须点击此按钮。","Available voices- 加载一个弹出窗口，显示您选择的 API 可用的所有声音，并允许您通过示例对话预览它们。"]},{"l":"使用 TTS","p":["点击“启用”复选框，否则将不会有任何反应。","如果希望每次新消息到达聊天时 TTS 自动启动，请点击“自动生成”复选框。","可选地，点击任何消息右上角的扬声器图标以按需播放。","点击右下角的“停止”按钮（在魔杖菜单中找到）以停止任何播放。"]},{"l":"声音映射","p":["您必须提供一个声音映射供 TTS 使用，否则它将不知道每个角色应该使用什么声音。","这些必须遵循以下确切格式：","CharacterName:TTSVoice,CharacterName2:TTSVoice2","对于 Coqui-TTS，格式需要包括来自 WebGUI 的说话者和语言：","CharacterName:TTSVoice[speakerid][langid] 或 Aqua:tts_models--multilingual--multi-dataset--your_tts\\model_file.pth[2][1]"]},{"l":"Bark ZeroShot 声音克隆说话者","p":["如果使用 Bark，您必须创建一个包含声音文件的声音文件夹以进行克隆。确保将声音添加到 homedir\\tts\\bark_v0\\speakers\\。在 Windows 上，路径可能是 C:\\Users\\USERACCOUNT\\AppData\\Local\\tts\\bark_v0\\speakers\\，在文件资源管理器中输入 %appdata% 然后向上一级目录查找 local，您应该会看到 tts。","目录应如下所示：","homedir","tts","bark_v0","speakers","customvoice1","speaker.wav","speaker.npz","robinwilliams","speaker.mp3","me","首次加载此模型和声音时，Bark 将克隆声音并创建一个 .npz 文件，这对于更快的 TTS 是必需的。"]}],[{"l":"VRM","p":["本指南将引导您完成为您的SillyTavern体验设置和自定义VRM扩展的过程。此扩展允许您为角色使用VRM动画模型，为您的虚拟角色提供动态和互动的元素。"]},{"l":"前提条件","p":["在开始之前，请确保您已满足以下前提条件：","分支选择：确保您使用的是 SillyTavern 的最新 staging 分支，以访问最新的功能和更新。","扩展安装：从扩展面板中的“下载扩展和资产”菜单（由堆叠块图标表示）安装“VRM”扩展。","模型文件夹放置：将您的 VRM 模型文件 (.vrm) 放入 /data/user-handle/assets/vrm/model 目录，将您的动画文件放入 /data/user-handle/assets/vrm/animation 目录。目前支持的动画文件格式为与 VRM 模型兼容的 .fbx 和 .bvh。这包括您可以从 Mixamo ( https://www.mixamo.com/) 获取的任何动画，以及您可以从 XR Animator ( https://github.com/ButzYung/SystemAnimatorOnline) 等工具导出的任何动画。"]},{"l":"扩展设置","p":["VRM 扩展提供了多种设置，以自定义您动画模型的行为。以下是关键设置：","UI global settings"]},{"l":"全局设置","p":["启用:","勾选此复选框以激活扩展，使您的 VRM 模型能够在 SillyTavern 中进行交互。","如果您只想使用普通精灵，可以禁用该扩展。","注视摄像头:","勾选此复选框以使 VRM 模型的眼睛注视摄像头。","眨眼:","勾选此复选框以使 VRM 模型的眼睛在随机间隔内眨眼。模型表情应正确定义眨眼权重属性，否则模型可能会闭眼眨眼，例如，如果发生这种情况：","如果您拥有 .vroid 文件，请修正模型","不要使用该不正确的面部表情","使用此复选框完全禁用眨眼","TTS 同步:","勾选此复选框以使 VRM 的嘴部动作跟随播放的 TTS 声音。仅适用于由 Sillytavern 本身播放的 TTS 声音，如 XTTS（不在流媒体模式下）。如果禁用，嘴部将根据接收到的新角色消息的文本长度进行动画。","自动发送交互:","勾选此复选框以在您点击带有映射消息的区域时自动触发角色交互（有关详细信息，请参见命中区域部分）。"]},{"l":"性能设置","p":["身体碰撞盒","启用此复选框以激活对VRM模型多个部分的点击检测，具体可检测区域包括：头部/胸部/手部/腹股沟/臀部/腿部/脚部。碰撞盒的位置在每一帧中计算，并随身体动画而变化，禁用此选项可以提高性能。","使用模型缓存","启用此复选框以在切换模型时将VRM模型保留在内存中，可以更快地切换回上一个模型。如果您为同一角色使用不同模型以更换服装或形态，这将非常有用。可能会影响性能。","使用动画缓存","启用此复选框以在会话期间将所有播放的动画保留在内存中。分配给模型的所有动画将在模型首次出现时加载。将增加您首次加载模型的时间，但使所有动画切换瞬时。可能会影响性能。"]},{"l":"调试设置","p":["显示网格","启用此复选框以可视化 3d 网格、模型拖拽框和身体碰撞盒。","重新加载按钮","点击此按钮以重新加载 3d 场景，清除缓存和所有 VRM 模型。如果出现某些错误或缓存开始影响性能，请使用它。"]},{"l":"场景设置","p":["UI 场景设置","光线颜色","设置 3D 场景中的光线颜色。点击重置按钮将其恢复为默认的白色。根据您的浏览器，您可以使用颜色选择器，例如，您可以选择背景图像的颜色以增加沉浸感。","光线强度","使用滑块设置光线强度的百分比。点击重置按钮将其恢复为默认值 100%。VRM 模型对光线的反应可能因模型中烘焙的着色器而异，尝试调整该值并观察效果。","UI 模型设置"]},{"l":"角色选择","p":["这些设置允许您管理角色并为其分配 VRM 模型。","刷新按钮：","点击刷新按钮以更新当前聊天中的角色列表。","选择角色：","使用下拉列表选择一个角色以分配 VRM 模型。","移除按钮：","点击此按钮以删除角色的分配模型。"]},{"l":"模型选择","p":["刷新按钮：","如果您的 VRM 模型未出现在列表中，请点击刷新按钮。","选择模型：","从列表中选择一个模型，并将其分配给选定的角色。","模型必须位于 /data/user-handle/assets/vrm/model 目录中。","重置按钮","点击此按钮将模型设置重置为默认值。如果您有与默认值对应的动画文件，它们将自动映射。请参阅本 README 末尾的命名映射。"]},{"l":"模型设置","p":["模型规模:","使用滑块调整模型的大小，使其变大或变小。","模型中心 X/Y 偏移:","使用这些滑块更改模型相对于窗口中心的水平/垂直位置。","模型 X/Y 旋转","使用这些滑块更改模型相对于模型臀部的水平/垂直旋转。"]},{"l":"备注","p":["UI hitboxes settings"]},{"l":"碰撞盒映射","p":["UI classify settings"]},{"l":"分类表达映射","p":["需求","需要使用分类表达扩展；否则，将回退到默认动画。","映射","对于分类扩展检测到的每种情感，您可以分配一个表达/动作/消息。消息可以包含命令。"]},{"l":"命令","p":["/vrmexpression","/vrmlightcolor","/vrmlightintensity","/vrmmodel","/vrmmotion","参数：character, expression","参数：character, model","参数：character, motion, loop, random","参数：color","参数：intensity","将 vrm 模型分配给角色","改变模型的动画","改变模型的表情","示例：\"/vrmlightcolor white\" 或 \"/vrmlightcolor purple\"。","示例：\"/vrmlightintensity 0\" 或 \"/vrmlightintensity 100\"","示例：\"/vrmmotion idle\" 或 \"/vrmmotion character=Seraphina motion=idle loop=true random=false\"","示例：在单人聊天中使用 \"/vrmexpression happy\" 或在群聊中使用 \"/vrmexpression character=Seraphina expression=happy\"","示例：在单人聊天中使用 \"/vrmmodel Seraphina.vrm\" 或在群聊中使用 \"/vrmmodel character=Seraphina model=Seraphina.vrm\"","设置光源强度（百分比）","设置光源颜色"]},{"l":"动画默认映射","p":["如果您的动画文件按以下方式命名，它们将在重置模型设置时自动映射。例如，名为 \"assets/vrm/animation/neutral.bvh\" 和 \"assets/vrm/animation/neutral1.fbx\" 的文件将作为默认和中性分类动画的组自动映射。命中框也是如此。","感谢您遵循本指南！您的 SillyTavern 体验现在已通过动画和互动 3D 模型得到了丰富。"]},{"i":"备注-1","l":"备注"}],[{"l":"XTTS 与声音克隆","p":["你好！所以，你被那些展示了人工智能文本转语音技术进展的 Reddit 帖子震惊了吗？","想给你的机器人老婆/老公一个新的闪亮的声音调制器吗？","不用担心，这项令人惊叹的突破性技术已经在你当地的 SillyTavern 可用，你只需要一个简单的..."]},{"l":"前提条件","p":["最新的 staging 分支的 SillyTavern。","已安装 Miniconda。","(Windows) 已安装 Visual C++ Build Tools。","包含语音剪辑的 WAV 文件（每个文件约 10 秒）。文件要求：PCM，单声道，22050Hz，16 位（通过 Audacity 转换）。","创建一个包含 \"speakers\" 和 \"output\" 子文件夹的文件夹。将 WAV 文件放入 \"speakers\" 中。","示例文件夹结构："]},{"l":"安装","p":["daswer123 制作了一个 API 服务器，可以在您的计算机上运行 XTTSv2 模型，并连接到 SillyTavern 的 TTS 扩展。","它与 Extras API 完全独立，并将使用一个单独的环境。","非常重要： 请不要将以下要求安装到您的 Extras 环境或系统 Python 中。 这会破坏您的其他包，导致不必要的降级等。","以下说明使用 Miniconda 提供，但您也可以使用 venv（此处不予覆盖）。 打开 Anaconda 命令提示符，并逐行按照说明操作。"]},{"l":"启动服务器","p":["导航到您在先决条件的第4步中创建的文件夹。","创建一个新的 conda 环境。从现在开始，我们称之为 xtts。","激活新创建的环境。","在您的环境中安装 Python 3.10。出现提示时确认输入 \"y\"。","安装 XTTS 服务器及其依赖项。","安装 PyTorch。这可能需要一些时间。以下命令安装支持 GPU 加速 (CUDA) 的 PyTorch。 如果您只想使用 CPU 推理，请去掉以 --index-url 开头的最后部分。","在默认主机和端口启动 XTTS 服务器： http://localhost:8020","在您的第一次启动期间，模型将被下载（约 ~ 2 GB）。 不要忘记仔细阅读 Coqui AI 的法律声明。哈哈，我在开玩笑，只需再次输入 \"y\"。"]},{"l":"连接到 SillyTavern","p":["打开扩展面板，展开 TTS 菜单，并在提供者列表中选择 \"XTTSv2\"。","在语言下拉菜单中选择您的文本转语音语言（如果不是波兰语我会很难过）。","验证提供者端点指向 http://localhost:8020，并且“可用声音”显示您的声音样本列表。","选择任何角色，并在声音样本与角色之间设置映射。 如果角色列表为空，请点击“重新加载”几次。","根据您的偏好配置其余的 TTS 设置。"]},{"i":"现在一切准备就绪","l":"现在一切准备就绪！","p":["在任何消息的上下文操作菜单中点击扬声器图标，聆听从扬声器中传出的美妙克隆声音。生成需要一些时间，即使在高端RTX GPU上也不是实时的。"]},{"i":"流媒体","l":"流媒体？","p":["可以使用最新版本的 XTTS 服务器通过 HTTP 流媒体获取生成的音频块，一旦可用就可以获取！"]},{"i":"这在-rvc-中不起作用","l":"这在 RVC 中不起作用！","p":["音频仍然会被生成（假设您使用的是最新版本的 RVC 扩展）并进行转换， 但不会进行流媒体传输，因为 RVC 需要在启动转换之前拥有完整的音频文件。流媒体 RVC 仍在研究中..."]},{"i":"如何获得流媒体支持","l":"如何获得流媒体支持？","p":["更新到 SillyTavern 的最新 staging 分支。","将 XTTS 服务器更新到最新版本。","像往常一样启动并连接 XTTS 到 ST。","在 SillyTavern 中启用 \"Streaming\" XTTS 扩展设置。"]},{"i":"音频卡顿","l":"音频卡顿？","p":["尝试增加“块大小”设置。","作为参考：在块大小为200的情况下，RTX 3090可以以稍微增加的音频延迟产生不间断的音频。"]},{"i":"如何重启-tts-服务器","l":"如何重启 TTS 服务器？","p":["只需执行安装说明中的第 1、3 和 7 步。"]},{"i":"android","l":"Android??","p":["不太可能，它无法运行需要 PyTorch 的应用程序，除非使用某些我们不提供支持的神秘黑魔法。您可以在自己的风险下尝试，但如果遇到任何问题将不提供支持。","您最好的解决方案是在本地网络上通过您的 PC 托管 TTS API，只需记得指定要监听的主机和端口 - 请参见 README."]}],[{"l":"动态音频","p":["本指南将引导您设置和自定义动态音频资源，以提升您的 SillyTavern 体验。"]},{"l":"前提条件","p":["在开始之前，请确保您已满足以下前提条件：","确保您在 SillyTavern 的最新 staging 分支上。","从扩展面板的“下载扩展和资源”菜单（叠加块图标）中安装“动态音频”扩展。"]},{"i":"动态音频设置浏览器","l":"动态音频设置（浏览器）","p":["连接到资产库：","启动 SillyTavern 并导航到 扩展> 资产。","点击“连接”按钮以建立与官方资产库的连接。","下载所需的音频资产，例如背景音乐（BGM）或环境音效，这些应与您打算使用的背景相对应。","启用动态音频扩展：","在 SillyTavern 中，前往 扩展> 动态音频。","启用该扩展，解除静音并根据您的喜好调整 BGM 和环境音效的音量。","当 BGM 结束时，另一个将随机播放，点击循环按钮以保持当前 BGM 播放。","点击滚动按钮以随机选择另一首 BGM。","基于表情的 BGM：","如果希望 BGM 跟随角色表情，请启用表情 BGM 开关（需要角色文件夹中的 BGM，见下文）。","调整 BGM 更新之间的冷却时间（以秒为单位）。如果您发现 BGM 在群聊中或使用带有情感检测的角色特定 BGM 时变化太频繁，请增加该时间。"]},{"l":"为角色导入音乐","p":["要为角色的情感设置自定义音乐，请按照以下步骤操作：","导航到角色文件夹：","转到角色文件夹，例如 \\SillyTavern\\data\\user-handle\\characters\\Seraphina。","创建 BGM 文件夹：","在角色文件夹内，创建一个名为 bgm 的子文件夹。","导入情感音乐：","在 bgm 文件夹内，导入每种情感的音乐文件。支持的音频扩展名包括 .mp3、.ogg 和 .wav。","命名约定：[emotion]_[number].mp3，例如 anger_0.mp3、 joy_0.mp3。","为情感导入多个曲目：","您可以通过递增数字来导入同一情感的多个曲目，例如 neutral_1.mp3、 neutral_2.mp3。","默认音乐选择：","当未检测到情感时，将播放随机中性曲目作为默认音乐。情感的检测类似于更新精灵；有关详细信息，请参阅 表情图像文档。"]},{"l":"更改默认背景音乐","p":["如果角色的文件夹中没有自定义背景音乐，将播放默认曲目。以下是更改方法：","导航到背景音乐文件夹：","转到以下文件夹：\\SillyTavern\\data\\user-handle\\assets\\bgm。","替换/添加音乐：","将音乐文件（.mp3，.ogg，.wav）替换或添加到此文件夹中。","这些是使用资源扩展下载的官方音频资产。","当找不到特定角色的背景音乐时（单人或群聊），将随机播放这些曲目中的一首。"]},{"l":"更改环境音效","p":["环境音效为您的场景增添了深度。以下是自定义它们的方法：","导航到环境文件夹：","前往以下文件夹：\\SillyTavern\\data\\user-handle\\assets\\ambient。","文件命名约定：","环境音频文件名与背景图像文件名相对应，将空格替换为短横线。","示例： bedroom-clean.mp3 对应于背景 \"bedroom clean.jpg\"。","如果解锁按钮被解锁，背景对应的音频文件将播放。激活锁定将保持当前环境音效播放。","自定义环境音效：","您可以通过遵循相同的命名模式为自定义或现有背景添加自己的环境音效。","感谢您遵循本指南！您的 SillyTavern 体验现在因动态音频而更加丰富。"]}],[{"i":"实时语音克隆-rvc","l":"实时语音克隆 (RVC)","p":["本指南将引导您使用 RVC，这是一种允许将语音特征从一个音频片段转移到另一个音频片段的技术，使声音能够以不同的语调和风格进行讲话。","您是否曾享受过那些著名的“总统玩 X”视频？它们是使用 RVC 创建的。借助 RVC Extra 模块，您可以让您的 SillyTavern 角色以您希望的任何声音进行对话，无论是动漫、电影，还是您自己独特的声音。","RVC 不是 TTS：它更像是语音到语音。它将音频片段作为输入。在后台，RVC 与 SillyTavern-extras 的 TTS 模块协同工作：它等待 TTS 生成音频文件（无论您是否使用 RVC，TTS 都会执行此操作），然后 RVC 将执行第二次处理，将 TTS 音频文件转换为您 RVC 配置中的克隆声音。"]},{"l":"RVC 设置"},{"l":"先决条件","p":["在开始之前，请确保您满足以下先决条件：","从扩展面板（堆叠块图标）中的“下载扩展和资产”菜单安装“RVC”扩展。","确保您的 PATH 环境变量中包含 ffmpeg 可执行文件。此工具用于转换传入的音频。","使用 Launcher.bat 脚本中的工具箱自动安装 ffmpeg: https://github.com/SillyTavern/SillyTavern-Launcher/blob/main/Launcher.bat","或在此处下载构建版本: https://www.gyan.dev/ffmpeg/builds/","如何修改 PATH 变量: https://www.architectryan.com/2018/03/17/add-to-the-path-on-windows-10/","要测试您是否正确操作，请打开命令提示符并运行 ffmpeg。它应该打印 ffmpeg 版本和信息。"]},{"l":"步骤设置","p":["（可选）配置 RVC 将您的生成保存到文件:","RVC 依赖 TTS，您需要启用 TTS 模块。请参阅我们的 TTS 指南以了解如何操作。在尝试将 RVC 添加到混合中之前，您的 TTS 必须已经正常工作并能够朗读您的聊天内容！","为 RVC 创建一个语音映射。将您的角色设置为您希望的 SillyTavern 角色名称，并将语音设置为您在第 1 步中创建的 RVC 文件夹，然后点击应用。如果您操作正确，语音映射将显示类似 'Betty:MyVoice(rvpme)' 的内容。","使用命令安装必要的依赖: pip install -r requirements-rvc.txt。","准备 RVC 模型文件:","创建一个名为 'Betty' 的子文件夹，并将 .pth 和 .index 文件放入其中。（提示：您可以从 https://voice-models.com 下载语音文件，请确保语音名称显示为 RVPME。）","可选地，如果您有一个强大的 GPU，您可以通过在启动命令中添加 --cuda 来运行 RVC。根据快速测试，朗读 50 个标记（约 36 个单词）时 VRAM 使用量为 3.4GB，朗读 200 个标记（约 150 个单词）时为 7.6GB。","启动启用 RVC 模块的 SillyTavern-extras。这个示例调用假设您使用的是 Silero TTS，它随 SillyTavern-extras 一起预装：","在 SillyTavern 中，导航到 扩展> RVC 并启用它。","在 SillyTavern 中配置 RVC:","在文件浏览器中，导航到: \\SillyTavern-extras\\data\\models\\rvc","如果出于测试或故障排除的目的，您希望保存生成的 RVC 音频，请在启动命令中添加 --rvc-save-file。这将把最后生成的文件保存到 SillyTavern-extras\\data\\tmp\\rvc_output.wav：","如果您在使用 \"rmvpe\" 时遇到问题，请尝试其他方法。","安装依赖:","确保 TTS 已启用并正常工作","设置语音映射:","运行启用 RVC 的 SillyTavern-extras:","选择 \"rmvpe\" 作为音高提取方法。","选择音高提取:"]},{"l":"基于表达的动态语音","p":["配置 RVC 模型:","在您的 RVC 模型文件夹中，为每个分类的表达（例如，愤怒、恐惧、快乐、爱、悲伤、惊讶）准备单独的 .pth 和 .index 文件。","启用模块:","启用 RVC 和分类模块：","使用 RVC 模块:","剩余的设置与单独使用 RVC 模块类似（如上所述）。"]},{"l":"训练您自己的 RVC 模型"},{"i":"使用-deffcolony-的-rvc-简易菜单仅限-windows","l":"使用 Deffcolony 的 RVC 简易菜单（仅限 Windows）","p":["自动安装并启动 Mangio-RVC: https://github.com/deffcolony/rvc-easy-menu","克隆仓库:","将仓库克隆到您希望的位置:","启动 RVC-Launcher.bat:","打开 RVC-Launcher.bat 文件。","选择选项 1 安装 RVC。","完成安装:","当提示时，安装所需的包和依赖项。","打开用于语音训练的 WebUI:","安装完成后，选择选项 2 打开用于语音训练的 WebUI。"]},{"i":"mangio-rvc-训练语音模型","l":"Mangio-RVC: 训练语音模型","p":["WebUI 训练：","准备音频：","处理数据并提取特征：","将“保存频率”设置为 50。","将“总训练轮数”设置为 300。","将版本设置为 v2。","将要训练的音频放入 datasets 文件夹。","数据集准备：","点击 WebUI 中的训练标签。","点击“处理数据”和“特征提取”。","点击“训练特征索引”和“训练模型”。","确保音频没有背景噪音 – 只需要纯粹的语音。","训练参数：","访问训练标签：","较长的音频能够提供更好的输出质量。","输入实验名称（例如， my-epic-voice-model）。","配置实验："]}],[{"l":"总结"},{"i":"它是什么","l":"它是什么？","p":["此扩展允许您根据聊天中发生的事件创建、存储和利用自动生成的摘要。摘要可以帮助概述故事中发生的总体细节，这 可能 被解读为长期记忆，但对此说法需谨慎。由于摘要是由语言模型生成的，输出可能会丢失一些重要细节或包含幻觉，因此建议您始终跟踪摘要状态，并在必要时手动进行更正。"]},{"l":"常见配置","p":["总结扩展默认安装在SillyTavern中，因此它会在ST的扩展面板（堆叠立方体图标）列表中显示如下：","Summarize Config Panel","当前摘要- 显示并提供修改当前摘要的功能。摘要会被更新并嵌入到聊天文件的元数据中，针对生成摘要时上下文中的最后一条消息。从聊天中删除或编辑有摘要附加的消息，将恢复到最后有效的摘要状态。","恢复之前的摘要- 移除当前摘要，回滚到之前的状态。如果摘要生成器在某个时刻表现不佳，这个功能非常有用。","暂停- 勾选此项可防止摘要被自动更新。如果您想提供自定义摘要或通过清除框并停止更新有效地禁用摘要，这个功能非常有用。","弹出窗口- 允许将摘要分离到侧边栏的可移动UI面板中。对于桌面布局来说，这样可以轻松访问摘要设置，而无需通过扩展菜单进行导航。","注入模板- 定义摘要在插入常规聊天提示时的包装方式。应使用特殊的 {{summary}} 宏来标记提示注入文本中当前摘要状态的确切位置。","注入位置- 设置提示注入的位置。选项与作者笔记相同：在主提示之前或之后，或在指定深度的聊天中。"]},{"l":"支持的摘要来源"},{"l":"主要 API","p":["摘要将由您当前选择的 AI 后端、模型和设置提供支持。此方法无需额外设置，只需一个有效的 API 连接即可。","此选项具有以下子模式，具体取决于摘要提示的构建方式：","原始，阻塞。摘要将仅使用摘要提示和聊天历史生成。后续提示还将包括生成摘要后发送的消息和之前的摘要（见示例）。这种模式可以（并且会）生成具有很大变异性的提示，因此不建议在处理提示速度较慢的后端中使用，例如 llama.cpp 及其衍生版本。","原始，非阻塞。与上述相同，但在生成摘要时聊天生成不会被阻塞。并非所有后端都支持同时请求，因此如果摘要生成失败，请切换到阻塞模式。","经典，阻塞。摘要提示将在您通常的生成提示结束时发送，作为中立的系统指令，不省略角色卡、主要提示、示例对话和聊天提示的其他部分。这通常会导致与重新使用已处理提示良好配合的提示，因此建议与 llama.cpp 及其兄弟版本一起使用。"]},{"l":"摘要设置说明","p":["摘要提示- 定义用于创建摘要的提示。可以包含任何已知宏，以及一个特殊的 {{words}} 宏（见下文）。","目标摘要长度（字数）- 定义可以插入到摘要提示中的 {{words}} 宏的值。此设置完全是可选的，如果不使用该宏，则没有任何效果。","API 响应长度（令牌）- 允许设置用于生成与全局设置值不同的摘要的覆盖 API 响应长度。","每个请求的最大消息数 (仅原始模式)- 设置以限制将包含在一个摘要提示中的最大消息数。 0 表示没有明确限制，但要摘要的消息数仍将取决于最大上下文大小，计算公式为： max summary buffer = context size - summarization prompt - previous summary - response length。当您希望在具有大上下文大小的模型上获得更集中的摘要时，请使用此项。","无 WI/AN- 从要摘要的文本中省略世界信息和作者说明。仅在使用经典提示构建器时有效。原始提示构建器始终省略 WI/AN。","每 X 条消息更新- 设置生成摘要的间隔。 0 表示自动摘要已禁用，但您仍然可以通过单击“立即摘要”按钮手动触发它。根据提示缓冲区完全填满聊天消息的速度进行调整。理想情况下，当消息开始被丢弃时，您希望生成第一个摘要。","每 X 个字更新- 与上述相同，但使用字（而不是令牌！）而不是消息，理论上可以更准确地衡量，因为聊天消息的内容通常是不可预测的，但实际效果可能会有所不同。","如果两个“每个更新”滑块都设置为非零值，则两个滑块将根据先发生的情况在各自的间隔触发摘要更新。强烈建议在切换到具有不同上下文大小的其他模型时相应地更新这些值，否则摘要生成可能会触发得太频繁，或根本不触发。","如果您不确定间隔设置，可以单击“魔法棒”按钮，以尝试根据一些简单的启发式规则猜测最佳值。算法的简要描述如下：","计算所有聊天消息的令牌和字数","根据所需的提示字数确定目标摘要长度","根据平均消息长度计算可以适应提示的最大消息数","如果设置了“最大消息数”，则调整平均值以考虑不符合摘要限制的消息","将调整后的每个提示的平均消息数向下舍入到 5 的倍数"]},{"l":"示例提示","p":["原始提示","经典提示"]},{"l":"Extras API","p":["Extras 服务器与 summarize 模块可以运行辅助摘要模型 (BART)。","它的上下文大小非常小 (~ 1024 tokens)，因此处理大型摘要的能力相当有限。","要配置 Extras 摘要源，请执行以下操作：","安装或更新 Extras 到最新版本。","运行启用 summarize 模块的 Extras： python server.py --enable-modules=summarize"]},{"l":"更改摘要模型","p":["默认情况下，Summarize 使用 Qiliang/bart-large-cnn-samsum-ChatGPT_v3 模型进行摘要目的。","可以通过使用命令行参数 --summarization-model=(###Hugging-Face-Model-URL-Here###) 来更改此设置。","一个已知的替代 Summarize 模型是 Qiliang/bart-large-cnn-samsum-ElectrifAi_v10。"]}],[{"l":"目标"},{"i":"什么是它","l":"什么是它？","p":["Objective 扩展允许用户指定一个目标，让 AI 在聊天过程中努力实现。这个目标被分解为逐步任务。任务可以是分支的，子任务可以自动或手动创建。这使得能够创建复杂的任务树。列表中每个任务的完成状态将在特定时间间隔内进行检查。","这与通过提示添加静态指令不同，因为它为 AI 提供了顺序和节奏的指令，无需用户干预。它提供了一个更真实的体验，让 AI 自主努力实现目标。"]},{"l":"先决条件","p":["在开始之前，请确保您已满足以下先决条件：","确保您在 SillyTavern 的最新 staging 分支上。","从扩展面板中的“下载扩展和资产”菜单（堆叠块图标）安装“Objective”扩展。"]},{"l":"常见用例","p":["你的想象力是唯一的限制，你可以给AI任何目标，它会规划如何实现它。你可以让它计划如何杀死一个恶魔，抢劫一个寺庙，举办一场奢华的派对，甚至征服世界。","目标设置面板"]},{"l":"配置","p":["扩展功能可以在目标菜单下找到。","在顶部文本框中输入一个目标，然后点击 自动生成任务。这会向连接的 API 发送请求，请求提供与您输入的目标匹配的任务列表。","注意：点击自动生成任务将删除当前选定目标的所有现有任务，然后再添加新任务。","在收到 AI 的响应后，任务列表将自动在目标输入框下方创建。任务创建后可以进行编辑。","面板底部有两个框： 聊天中的位置 和 任务检查频率","聊天中的位置- 这是您希望当前任务在提示的聊天部分中插入的“深度”。数字越低，AI 对任务的关注度越高。设置为 0 将使任务成为 AI 思维中的主要内容。设置高值将使任务处于后台，允许 AI 专注于当前的对话，但设置得过高可能会导致 AI 完全“忽略”该任务。","任务检查频率- 这是您希望 AI 多长时间检查一次任务是否已完成。如果设置为 3，则 AI 将在每第三条消息中询问当前任务是否已完成。","目标、任务及其描述会实时保存到当前聊天会话中。自定义提示会全局保存。"]},{"l":"自定义提示","p":["您可以自定义发送给LLM的提示，以生成任务、检查任务完成情况以及进行提示注入。编辑提示将为当前会话保存它们。自定义提示可以保存并加载以保持持久性。","点击编辑提示以打开提示编辑窗口。您可以根据需要编辑您的提示。","要保存提示，请输入名称并点击保存提示。","要加载提示，请从下拉列表中选择提示。","要删除已保存的提示，请从下拉列表中选择它并点击删除提示。","警告：任务检查在单独的API请求中进行。将任务检查频率设置为1将使您的API调用次数翻倍。如果您使用的是付费服务，请小心。"]},{"l":"使用方法","p":["默认情况下，Objective 扩展会自动跟踪所有任务及其各自的完成状态。","用户也可以在任何时候手动创建、更新、删除和完成任务。"]},{"l":"当前任务选择","p":["当前任务将始终是第一个未完成的任务。对任务的任何手动更新将触发对当前任务应为哪个的检查。因此，如果您在一堆已完成任务上方添加任务，它将被设置为当前任务。一旦它完成，之前已完成的任务将被跳过，下一个未完成的任务将被选为“当前”。","在任务树中使用父/子任务时，任务将按深度优先选择，这意味着所有子任务将首先按顺序选择，然后继续遍历当前 Objective/Task 的任务列表。"]},{"l":"分支任务","p":["单击分支任务按钮将当前任务设置为一个 Objective，您可以在其中自动生成或手动创建子任务。您可以继续将任何子任务转换为 Objective，并不断生成，尽情享受。","将父任务标记为完成将导致扩展跳过所有子任务。当所有子任务完成时，父任务将被标记为完成。"]},{"l":"手动完成任务","p":["您可以通过 点击复选框 手动切换任务的完成状态。这将使下一个未完成的任务被选中。"]},{"l":"手动任务检查","p":["如果您想手动触发 AI 检查任务完成情况，请单击附加扩展按钮（聊天输入栏右侧的 魔法棒）并选择 手动任务检查。"]},{"l":"手动添加任务","p":["当没有任务时，将显示一个 添加任务 按钮，允许您手动创建第一个任务。","如果其他任务已经存在，请单击任何任务右侧的 + 按钮，在其后插入新任务。"]},{"l":"删除任务","p":["单击红色的 x 删除现有任务。下一个未完成的任务将自动被选为当前任务。","删除带有子任务的任务将删除所有子任务及其后代。"]},{"l":"隐藏任务","p":["如果您希望对 AI 正在尝试完成的任务保持不知情，请勾选 隐藏任务 复选框，以隐藏任务列表并使 AI 的意图成为谜。如果想要 100% 的神秘感，请在点击 自动生成任务 之前执行此操作！"]}],[{"l":"稳定扩散"},{"l":"图像生成扩展","p":["使用本地或基于云的 Stable Diffusion API 生成图像。 通过聊天输入框中的 /sd (anything_here) 命令也支持免费模式。 最常见的 Stable Diffusion 生成设置可以在 SillyTavern UI 中进行自定义。"]},{"l":"生成模式","p":["-","\"你的脸\"","\"你自己\"","\"最后一条消息\"","\"原始最后一条消息\"","\"我\"","\"整个故事\"","\"背景\"","background","face","last","me","raw_last","scene","you","最后一条消息按原样用作提示。","最后一条聊天消息的视觉回顾。","基于故事背景的聊天背景。","备注","强制宽幅风景纵横比。","强制肖像纵横比。","当前角色的全身肖像。","当前角色的特写肖像。","描述","斜杠命令参数","用户角色的肖像。","聊天事件的视觉回顾。","魔杖菜单项"]},{"l":"如何生成图像","p":["在扩展上下文菜单（魔杖）中使用“图像生成”项。","输入一个带有生成模式表中参数的 /sd (argument) 斜杠命令。其他任何内容都会触发“自由模式”，使 SD 生成您提示的任何内容。例如：/sd apple tree 将生成一幅苹果树的图片。","在聊天消息的上下文操作中寻找画笔图标。这将强制所选消息进入“原始消息”模式。","除了原始消息和自由模式之外的每种生成模式都将触发提示生成，使用您当前选择的主要生成 API 将聊天上下文转换为 SD 提示。您可以使用扩展面板中的“SD 提示模板”设置抽屉配置每种生成模式的提示生成指令模板。"]},{"l":"支持的来源","p":["Stable Horde","NovelAI Diffusion。需要有效的订阅。","Stable Diffusion WebUI / AUTOMATIC1111","SD.Next / vladmandic","OpenAI DALL-E 2/3","TogetherAI","Draw Things","Pollinations","ComfyUI。需要一个工作流 JSON 文件。","Stability AI","SillyTavern Extras（已弃用，不推荐）"]},{"l":"选项"},{"l":"在生成之前编辑提示","p":["允许在将自动生成的提示发送到 Stable Diffusion API 之前手动编辑它们。"]},{"l":"交互模式","p":["允许在用户消息后触发图像生成，而不是文本回复，该消息遵循特定模式：","包含以下动词之一：send, mail, imagine, generate, make, create, draw, paint, render","紧接着包含以下名词之一（不超过10个字符）：pic, picture, image, drawing, painting, photo, photograph","随后是图像生成的目标主题，可以选择性地以“of a”或“of this”等短语开头。","有效请求及捕获主题的示例：","Can you please send me a picture of a cat=> cat","Generate a picture of the Eiffel tower=> Eiffel tower","Let's draw a painting of Mona Lisa=> Mona Lisa","某些特殊主题会触发预定义的生成模式：","'you', 'yourself' => \"Yourself\"","'your face', 'your portrait', 'your selfie' => \"Your Face\"","'me', 'myself' => \"Me\"","'story', 'scenario', 'whole story' => \"The Whole Story\"","'last message' => \"The Last Message\"","'background', 'scene background', 'scene', 'scenery', 'surroundings', 'environment' => \"Background\""]},{"l":"自动增强提示","p":["此选项使用额外的 GPT-2 文本生成模型为主 API 生成的提示添加更多细节。 对于 SDXL 图像模型效果最佳。 对于其他模型可能效果不佳，建议在这种情况下手动编辑提示。","默认 GPT-2 模型: Cohee/fooocus_expansion-onnx"]},{"l":"Snap 自动调整分辨率","p":["Snap 图像生成请求将强制纵横比（肖像、背景）调整到最接近的已知分辨率，同时尽量保持绝对像素数量。有关可能选项的列表，请参阅“分辨率”下拉菜单。","推荐用于 SDXL 模型。"]},{"l":"常见提示前缀","p":["添加在每个生成的或自由模式的提示之前。通常用于设置图像的整体风格。","示例： best quality, anime lineart。","专业提示： 使用 {prompt} 宏来指定生成的提示将插入的位置。"]},{"l":"负面提示","p":["您希望输出中不出现的图像特征。","示例： bad quality, watermark."]},{"l":"特定角色提示前缀","p":["描述当前选定角色的任何特征。将添加在通用前缀之后。","示例： 女性，绿色眼睛，棕色头发，粉色衬衫。","限制：","仅在一对一聊天中有效。将不用于群组。","不会用于背景和自由模式生成。","专业提示： 如果生成源支持，您还可以在这里使用 LoRAs/嵌入，例如： lora:DonaldDuck:1。"]},{"l":"风格","p":["使用此功能快速保存和恢复您喜欢的风格/质量预设，以便稍后使用或在切换模型时使用。风格预设包括以下内容：","常用提示前缀","负面提示"]}],[{"l":"网络搜索","p":["将网络搜索结果添加到 LLM 提示中。"]},{"l":"可用资源"},{"l":"Selenium 插件","p":["需要安装并启用官方服务器插件。","有关更多详细信息，请参见 SillyTavern-WebSearch-Selenium。","支持 Google 和 DuckDuckGo 引擎。"]},{"l":"Extras API","p":["需要在主机上安装 websearch 模块和 Chrome/Firefox 网页浏览器。","支持 Google 和 DuckDuckGo 搜索引擎。"]},{"l":"SerpApi","p":["需要 SerpApi 密钥，并提供对 Google 搜索的访问。","在此获取密钥： https://serpapi.com/dashboard"]},{"l":"如何使用","p":["确保您使用的是最新版本的 SillyTavern。","通过 SillyTavern 中的“下载扩展和资源”菜单安装扩展。","打开“网络搜索”扩展设置，设置您的 API 密钥或连接到 Extras，并启用扩展。","网络搜索结果将在您聊天时自然地添加到提示中。 仅用户消息会触发搜索。","要更自然地包含搜索结果，请用单个反引号包裹搜索查询： Tell me about the `latest Ryan Gosling movie`. 将生成搜索查询 latest Ryan Gosling movie。","可选地，根据您的喜好配置设置。"]},{"l":"设置"},{"l":"一般","p":["启用 - 切换扩展的开启和关闭。","来源 = 设置搜索结果的来源。","缓存生命周期 - 搜索结果为您的提示缓存的时间（以秒为单位）。默认 = 一周。"]},{"l":"提示设置","p":["提示预算 - 设置插入文本的最大容量（以字符为单位，而不是标记）。经验法则：1 个标记约为 3-4 个字符，根据模型的上下文限制进行调整。默认值 = 1500 个字符。","插入模板 - 结果如何插入到提示中。支持常规宏 + 特殊宏：{{query}} 用于搜索查询，{{text}} 用于搜索结果。","注入位置 - 结果在提示中的位置。与作者注释相同的选项：在聊天中注入或在系统提示之前/之后。"]},{"l":"搜索激活","p":["使用反引号 - 通过用单个反引号括起来的词启用搜索激活。","使用触发短语 - 通过触发短语启用搜索激活。","触发短语 - 添加将触发搜索的短语，逐个添加。它可以出现在消息的任何位置，查询从触发词开始，延伸到“最大词数”的总数。要排除特定消息不被处理，必须以句点开头，例如 .What do you think?。触发器的优先级：首先按文本框中的顺序，其次是用户消息中的第一个。","最大词数 - 包含在搜索查询中的单词数量（包括触发短语）。Google 每个提示的限制约为 32 个单词。默认 = 10 个单词。"]},{"l":"页面抓取","p":["访问链接 - 将从访问的搜索结果页面提取文本并保存到文件附件中。","访问计数 - 将访问和解析多少个链接以提取文本。","访问域名黑名单 - 要排除访问的网站域名。每行一个。","文件头 - 文件头模板，插入在文本文件的开头，包含额外的 {{query}} 宏。","块头 - 链接块模板，插入每个链接解析的内容。使用 {{link}} 宏表示页面 URL，使用 {{text}} 表示页面内容。"]},{"l":"更多信息","p":["最新查询的搜索结果将保留在提示中，直到找到下一个有效查询。 如果您想提出额外的问题而不小心触发搜索，请以句点开头您的消息。","如果同时使用反引号和触发短语搜索激活，则反引号具有更高的优先级。","要丢弃所有先前的查询处理，请以感叹号开头用户消息，例如，用户消息 !现在让我们谈谈... 将丢弃此消息及其以上的所有消息。","此扩展还提供了一个 /websearch 斜杠命令可在 STscript 中使用。更多信息请查看： STscript 语言参考"]},{"i":"搜索结果中可以包含什么","l":"搜索结果中可以包含什么？"},{"i":"serpapi-1","l":"SerpApi","p":["答案框。对问题的直接回答。","知识图谱。关于主题的百科知识。","页面摘要（最多 10 个）。来自网页的相关摘录。","相关问题（最多 10 个）。类似主题的问题和答案。"]},{"l":"Selenium 插件和扩展 API","p":["Google - 答案框、知识图谱、页面摘要。","DuckDuckGo - 页面摘要。"]}],[{"l":"表达图像"},{"i":"什么是表达图像","l":"什么是表达图像？","p":["表达图像是您的 AI 角色的图像（也称为“精灵”），显示在聊天窗口的旁边（或后面）。","表达图像可以使用与 SillyTavern 主应用程序并行运行的分类模型。这允许根据 AI 最近聊天回复中表达的情感自动更改表达图像。"]},{"i":"设置说明离线模式无额外功能","l":"设置说明（离线模式，无额外功能）","p":["打开扩展面板并展开“表情图片”部分。如果您打开了角色聊天，您将看到一组图像占位符。 Expression Drawer","点击网格中每个图像左上角的“导入”按钮，并选择您想要应用于该情感的图像。这将把图像保存到 /data/user-handle/characters/(character_name_here)/ 文件夹中，文件名正确。","要在您的 SillyTavern 窗口中显示图像，请在上传后点击网格中的图像。"]},{"i":"classify模块是如何工作的","l":"classify模块是如何工作的？","p":["classify 模块使用一个小型的“情感解析”模型，该模型在SillyTavern主机上运行（例如，在您的PC上或colab机器上）。该模型接收来自AI的新输出，并检测文本表达的情感或情绪类型。虽然单条消息中可能表达多种情感，但该模型仅选择最可能的一种，并将其返回给SillyTavern。前端插件随后显示与该情感相关的图像。"]},{"l":"手动更改表情","p":["点击任何上传的表情图像（精灵），以在聊天界面附近（使用默认UI模式）或在屏幕中央（在视觉小说模式下）显示它们。","使用 /emote (name) 斜杠命令或匹配的快速回复来设置精灵，而无需打开扩展菜单。"]},{"i":"设置说明本地分类","l":"设置说明（本地分类）","p":["确保您使用的是最新的发布或预发布版本的 SillyTavern。","打开扩展面板并展开“角色表情”插件菜单。","在分类源下拉菜单中选择“本地”。","这将启动从 HuggingFace Hub 下载分类模型的单次操作（约 ~ 100 Mb）。","生成任何消息以验证分类是否正常工作，并且精灵是否出现。您也可以检查服务器控制台以获取调试日志。"]},{"i":"设置说明附加内容","l":"设置说明（附加内容）","p":["确保已安装并运行 Extras，并启用 classify 模块： python server.py --enable-modules=classify","以与上述相同的方式导入表情图像。","在分类源下拉菜单中选择“Extras”。","每当 AI 向您发送响应时，适当的表情图像将自动显示。"]},{"i":"设置说明带-llm","l":"设置说明（带 LLM）","p":["连接到任何支持且已正确配置的文本生成 API。","以与上述相同的方式导入表达图像。","在分类源下拉菜单中选择“LLM”。","可选地，配置分类指令提示。","生成任何消息以验证分类是否正常工作以及精灵是否出现。您还可以检查服务器控制台以获取调试日志。"]},{"i":"如何获得更多的表达选项","l":"如何获得更多的表达选项？"},{"l":"本地","p":["本地分类默认提供 28 种可能的图像标签： Cohee/distilbert-base-uncased-go-emotions-onnx","要使用 6 选项分类模型，请用文本编辑器打开 config.yaml 文件，并将 classificationModel 变量的值更改为 Cohee/bert-base-uncased-emotion-onnx","之后，重启 ST 服务器以重新下载模型。要恢复，请再次更改 config.yaml 中的值。"]},{"l":"Extras API","p":["Extras API 默认使用 6 选项的分类模型： nateraw/bert-base-uncased-emotion","还有一个 28 选项的模型： joeddav/distilbert-base-uncased-go-emotions-student","要使用此模型，您需要将 Extras 命令行更改为包含以下参数（前后有空格）：","--classification-model=joeddav/distilbert-base-uncased-go-emotions-student"]},{"i":"支持哪些图像格式用于表达","l":"支持哪些图像格式用于表达？","p":["允许任何图像格式，包括 webp 和动画 gif。","最常见的格式是带有透明背景的 PNG 文件。"]},{"i":"使用默认表情","l":"使用“默认表情”","p":["(此功能仅在启用本地分类或连接Extras API时激活。无法手动显示默认表情图像。)","使用默认表情","如果您没有角色的自定义表情图像，可以使用随基础SillyTavern安装包含的内置默认表情。这些是简单的表情符号风格图像。只需点击扩展面板中表情图像部分顶部的复选框。默认表情将与任何可用的自定义表情一起工作，并将在您的自定义图像集中缺少特定情感的图像时显示。"]},{"l":"导入表情图像压缩文件","p":["使用“导入 ZIP”按钮，您可以导入一个包含表情图像集合的压缩文件，这些图像将自动添加到您 当前选择的角色 的正确文件夹中。压缩文件必须具有扁平的内部结构（无子文件夹），并且单个图像应正确命名。导入压缩文件不会自动重命名任何图像以使其与情感匹配。"]},{"l":"限制"},{"i":"显示名称不是角色卡片文件名决定使用哪个图像集","l":"显示名称（不是角色卡片文件名）决定使用哪个图像集","p":["如果您有多个角色使用相同的显示名称，它们将使用相同的表情图像集。","如果您希望同名角色的每个版本使用不同的图像集，可以使用精灵文件夹覆盖。"]},{"l":"如何设置覆盖","p":["在/data/user-handle/characters 中创建一个任意名称的文件夹并将图像放入其中，例如/data/user-handle/characters/Boris。","打开与您想要覆盖精灵的角色的聊天。","在“精灵文件夹覆盖”输入框中输入覆盖文件夹的名称，然后点击“提交”。","精灵列表将重新加载，“精灵集”指示器应显示覆盖文件夹。","或者，您可以使用/costume 斜杠命令来实现相同的结果：/costume Boris。","通过在覆盖文件夹名称前添加反斜杠，它将解析为当前角色精灵文件夹中的子文件夹，例如/costume \\tracksuit 对于名为Boris的角色将解析为/data/user-handle/characters/Boris/tracksuit 文件夹。"]},{"l":"自定义表情","p":["您可以将自定义表情标签添加到列表中并上传精灵。","但是，它们不会被分类模型自动标记。您 需要 手动设置它们（可以通过点击或使用/emote 命令）。"]}],[{"l":"语音识别","p":["本指南将引导您在 SillyTavern 中设置语音识别，以将您的声音转录为文本。"]},{"l":"前提条件","p":["在开始之前，请确保您已满足以下前提条件：","确保您在 SillyTavern 的最新 staging 分支上。","从扩展面板中的“下载扩展和资产”菜单（叠块图标）安装“语音识别”扩展。","已安装 ffmpeg 二进制文件。请参见 https://docs.sillytavern.app/extras/extensions/rvc/#rvc-setup"]},{"i":"语音识别设置浏览器","l":"语音识别设置（浏览器）","p":["从下拉选项中选择“浏览器”。","例如，通过添加“命令删除 = /del2”，当检测到“命令删除”时，\"/del2\" 命令将替换您的语音消息。","启动 SillyTavern 并转到 扩展> 语音识别。","启用消息映射(可选)：","如果您的浏览器不支持语音识别，将出现错误弹窗。","当与自动发送模式结合使用时，这非常有用，以实现完全的语音控制。通过勾选“启用消息映射”来启用此功能。","录音：","替换：您的消息将替换文本区域中的当前用户消息。","自动发送：一旦检测到语音结束，您的消息将自动发送。","要开始录音，请点击消息区域右侧发送按钮旁边的麦克风按钮。再次点击以停止录音。如果未检测到语音，录音可能会自动停止。","设置短语映射以实现语音快捷方式。","选择您想要使用的语言（注意：并非所有浏览器都支持所有语言）。","选择您想要的“消息模式”：","选择消息模式：","选择语言：","配置 SillyTavern：","附加：您的消息将附加到当前用户消息文本区域。"]},{"i":"语音识别设置-whispervosk","l":"语音识别设置 (Whisper/Vosk)","p":["启用提供者:","使用以下命令在额外服务器上启用所需的语音识别提供者：","或","你也可以通过添加选项 --stt-vosk-model-path 或 --stt-whisper-model-path 来使用自定义模型，并指定模型的路径。","配置 SillyTavern:","启动 SillyTavern 并转到 扩展> 语音识别。","从下拉选项中选择 \"Vosk\" 或 \"Whisper\"（whisper 更准确）。","设置与 \"浏览器\" 提供者的设置类似（语言除外），请参见上文。"]},{"i":"语音识别设置流式","l":"语音识别设置（流式）","p":["启用提供者：","使用以下命令在 Sillytavern-extras 上启用流式语音识别模块：","配置 SillyTavern：","（可选）如上面的 Whisper 设置中所示，指定自定义 Whisper 模型。","（可选但推荐）在 SillyTavern 中设置触发词。只有以这些触发词开头的消息才会作为实际消息发送到 SillyTavern。这可以防止随机语音或噪音被转录。通过复选框启用此功能。触发词可以通过复选框包含/排除在实际消息中。","其他设置与其他提供者类似。","您现在可以使用 SillyTavern 中的语音识别将语音转录为文本。"]}],[{"i":"obsolete-智能上下文","l":"(OBSOLETE) 智能上下文"},{"i":"此扩展程序不再维护不建议使用请寻找替代方案","l":"此扩展程序不再维护，不建议使用。请寻找替代方案","p":["使用此插件并不能保证更好的聊天体验或任何形式的记忆改进。仅在您理解向量数据库使用的所有影响时使用。"]},{"i":"什么是它","l":"什么是它？","p":["Smart Context 是一个 SillyTavern 扩展，使用 ChromaDB library 来为您的 AI 角色提供访问超出正常聊天历史上下文限制的信息。"]},{"i":"这有什么用","l":"这有什么用？","p":["如果你有一个非常长的聊天记录，绝大部分内容都超出了通常的上下文窗口，因此在AI撰写回复时无法获取。","Smart Context会自动将整个聊天记录的历史存入一个向量数据库。每次你在聊天中输入新内容时，这个数据库都会被搜索，如果找到包含匹配关键词的消息，这些聊天消息就会被放入上下文中，以便AI在撰写下一个回复时能够看到它们。"]},{"l":"设置说明","p":["更新 SillyTavern 至至少版本 1.10.6。","从扩展面板（堆叠块图标）中的“下载扩展和资产”菜单安装“智能上下文”扩展。","安装或更新 Extras 至最新版本。或者，使用 Colab notebook。","仅限本地安装： 安装 Extras 的 requirements-complete.txt（即使您之前在先前的安装中做过）。","启用 chromadb 模块运行 Extras： python server.py --enable-modules=chromadb"]},{"i":"安装-chromadb-时出现错误","l":"安装 ChromaDB 时出现错误？","p":["安装 chromadb 包需要以下之一：","安装 Visual C++ 构建工具： https://visualstudio.microsoft.com/visual-cpp-build-tools/","从 conda 安装 hnswlib： conda install -c conda-forge hnswlib"]},{"l":"配置","p":["启用 Smart Context 后，您应该在 SillyTavern UI 中进行配置。 Smart Context 配置可以通过扩展菜单完成 STExtensionMenuIcon","Smart Context 配置面板","需要注意的四个主要概念：","聊天历史保留","记忆注入数量","单个记忆长度","注入策略"]},{"l":"SmartContext 仅在聊天历史中有 10 条消息后开始","p":["在新聊天开始时，ChromaDB 处于非活动状态。","一旦聊天积累了 10 条消息，它将开始将所有消息记录到数据库中，并根据需要回忆消息。"]},{"i":"聊天历史保留保留的消息","l":"聊天历史保留（'保留的消息'）","p":["默认情况下，ChromaDB 将保留滑块指定的尽可能多的最近自然聊天历史消息。 超出此数量的消息将从您的发送提示中删除，如果数据库中存在 '记忆'，它们将替代较旧的聊天历史消息（见下面的策略）。"]},{"l":"记忆注入数量","p":["Smart Context 将插入到上下文中的 '记忆' 的最大数量。 不是每次注入尝试都会达到这个最大数量。 如果您发送与 '狗' 相关的输入，而数据库中仅有一条与狗相关的消息，则仅插入 1 项。"]},{"l":"单个记忆长度","p":["这是每个注入的 '记忆' 允许的最大长度。 这是以 字符 为单位（而不是标记）。 如果设置得太小，记忆可能会在中途被截断。","示例：","Ross: I like dogs with long fur and fluffy tails. I dislike dogs with short fur and short tails.","这个数据库 '记忆' 的长度为 103 个字符，因此您需要将滑块设置为至少 103 才能将其完全拉入上下文。","如果滑块小于 103，消息将被截断并像那样注入。"]},{"l":"注入策略"},{"l":"替换最旧的历史记录","p":["该策略保留最近的 X 条消息，删除所有之前的消息，并用“记忆”替换它们。","优势","不太可能超出上下文限制","存在于上下文顶部的记忆对响应的直接影响较小，同时仍提供“背景信息”。","劣势","旧消息直接插入聊天历史中，没有特殊标记，通常与保留的自然聊天历史消息没有直接的自然相关性。这可能会让较低智能的 AI 模型感到困惑。"]},{"l":"添加到底部","p":["该策略保持聊天历史的自然状态，并在其后面添加“记忆”， 在 格式化的 [bracket header] 内。这意味着“保留消息”滑块实际上被禁用。","优势","不会缩短或改变当前自然聊天历史","“记忆”存在于聊天之后，对下一个 AI 响应有更强的影响","劣势","由于没有聊天项目被移除/替换，因此更有可能超出上下文限制。","因为记忆存在于提示的末尾，它们可能对 AI 的响应产生过大的影响。"]},{"l":"自定义深度","p":["该策略保持聊天历史的自然状态，并在您指定的模板内以您确定的深度添加“记忆”。这意味着“保留消息”滑块实际上被禁用。自定义注入消息应包括 `` 模板词，所有查询的记忆将放置在此处。","优势","灵活性以实验记忆位置","可定制的记忆引入上下文","劣势","由于没有聊天项目被移除/替换，因此更有可能超出上下文限制。"]},{"i":"使用--策略","l":"使用 % 策略","p":["注意：此策略与“添加到底部”策略不兼容，该策略根本不移除任何消息。","在使用“替换最旧的历史记录”策略时，选中此框将启用选择要用 SmartContext 记忆替换的上下文聊天历史百分比的滑块。它也将禁用手动选择消息数量的两个滑块。","该策略自动计算要用 SmartContext 记忆替换的聊天历史百分比，而不是固定数量的消息。","优势","比手动计算消息数量更简单","根据可用上下文大小进行调整，将相同的百分比应用于小和大提示空间","劣势","计算移除多少历史记录可能会略有不准确，因为它们基于每条消息的估算令牌","它将要移除的消息数量四舍五入到最接近的 5 的倍数（0, 5, 10, 15, 20 等），因此不如手动数字选择细致。"]},{"l":"记忆回忆策略"},{"l":"仅从此聊天中回忆","p":["这是 smart-context 的默认行为，仅从该特定聊天的 ChromaDB 集合中提取“记忆”。"]},{"l":"从所有角色聊天中回忆","p":["这是 smart-context 的一种实验性行为，它从所选角色的所有 ChromaDB 集合中提取“记忆”。假设这将允许开发一个跨越多个交互的更强大的记忆集。建议与“添加到底部”或“自定义深度”策略一起使用，并将“保留消息”设置为较低的数字，以便 ChromaDB 更早地从记忆中提取。"]},{"l":"使用智能上下文","p":["一旦启用并配置好，智能上下文会自动发生。","ChromaDB 为每个在 SillyTavern 中打开的聊天创建一个新的数据库。 该数据库会自动填充整个聊天历史记录。","您还可以手动将文本文件插入数据库。","这些文本文件不必是聊天记录。它们可以是任何内容（维基百科条目、同人小说等）。"]},{"l":"清除数据库","p":["您可以使用“清除数据库”按钮来清空当前聊天的数据库。","如果您发现存储了不准确的记忆（例如您已删除或编辑的聊天消息），这可能会很有帮助。"]},{"l":"常见问题解答"},{"i":"当我完成聊天后数据库会发生什么我可以保存它们吗","l":"当我完成聊天后，数据库会发生什么？我可以保存它们吗？","p":["对于本地安装的Extras服务器，Smart Context会保存数据库。在通常的使用情况下，无需手动保存它们。","对于colab用户，当extras服务器关闭时，数据库会被清除。请使用导出按钮将数据库保存为JSON文件，下次想使用时再导入。","通常情况下，无需保存Smart Context数据库。","目前我们有一个导入/导出功能，允许您保存聊天的数据库并在稍后再次使用。"]},{"i":"我可以为我所有的聊天创建一个大型数据库供参考吗","l":"我可以为我所有的聊天创建一个大型数据库供参考吗？","p":["这不是Smart Context功能的好用法。我们建议使用World Info来实现这个目的。"]}],[{"l":"通过 Colab 运行额外功能"},{"i":"extras项目自2024年4月起已停止维护将不再接收任何新的更新或模块绝大多数模块已在主sillytavern应用程序中本地提供您仍然可以使用colab笔记本但如果遇到任何问题请不要指望能立即获得支持","l":"Extras项目自2024年4月起已停止维护，将不再接收任何新的更新或模块。绝大多数模块已在主SillyTavern应用程序中本地提供。您仍然可以使用Colab笔记本，但如果遇到任何问题，请不要指望能立即获得支持。","p":["API密钥将出现在colab的控制台输出中，例如： Your API key is fee2f3f559","不强制要求，但推荐：选择 secure 选项以生成API密钥以保护您的共享实例。","启动支持扩展的SillyTavern：（如有必要，将 enableExtensions 设置为 true 在您的 config.yaml 中）","在输出底部查找 trycloudflare.com 链接。忽略localhost链接，它将无法工作（我们试过了！）。","复制该行下方列出的API URL链接。（ 请勿复制“localhost” URL，使用其他链接）","如果您启用了 secure 选项，请将生成的API密钥粘贴到API密钥框中。","如果您没有启用 secure 选项，请确保在使用官方colab时API密钥框完全为空。","它将以文本 Running on 开头","导航到SillyTavern的扩展菜单（点击页面顶部的“叠块”图标）。","将API URL粘贴到顶部的框中。（ 不是API密钥框）","打开 官方Extras Colab","点击“连接”","点击左侧的开始按钮（看起来像一个三角形的“播放”按钮）","等待加载完成","运行SillyTavern Extras Colab的说明。","这会使Stable Diffusion变慢，但其他一切将正常运行","选择 use_cpu 以在不需要GPU额度的情况下运行Extras","选择所需的“额外”选项"]}],[{"l":"附加组件安装","p":["本页面包含在您的本地设备上安装 SillyTavern 附加组件的说明。"]},{"i":"extras项目自2024年4月起已停止维护不会再接收任何新的更新或模块绝大多数模块在主sillytavern应用中已原生提供您仍然可以安装并使用它但如果遇到任何问题请不要指望能得到即时支持","l":"Extras项目自2024年4月起已停止维护，不会再接收任何新的更新或模块。绝大多数模块在主SillyTavern应用中已原生提供。您仍然可以安装并使用它，但如果遇到任何问题，请不要指望能得到即时支持。","p":["在您的操作系统上（尤其是Termux），本地安装Extras可能会很困难或不可能。"]},{"l":"使用官方Extras Colab","p":["简单设置","免费使用","无需Colab GPU积分（使用 use_cpu 选项）","有关详细信息，请参见 Colab指南页面。"]},{"l":"安装方法"},{"i":"miniconda推荐","l":"MiniConda（推荐）","p":["(最初通过git安装SillyTavern的Chads可以跳过此步骤！)","(重要！) 阅读 如何使用Conda","cd SillyTavern-extras","conda activate extras（您应该在命令提示符的左侧看到 (extras)）","conda create -n extras","conda install python=3.11 git","git clone https://github.com/SillyTavern/SillyTavern-extras","pip install -r requirements-coqui.txt- 用于Coqui TTS（不推荐）","pip install -r requirements-rvc.txt- 用于实时语音克隆","pip install -r requirements.txt- 用于基本功能","使用以下命令之一安装Extras的依赖项（这也需要一些时间）：","克隆Extras GitHub仓库","创建一个新的Conda环境（我们称之为 extras）：","在 CONDA COMMAND PROMPT WINDOW 中逐个输入/粘贴以下命令，并在每个命令后按 Enter。","如果在此步骤中遇到错误，请参阅 常见问题 页面！","安装 git","安装 Miniconda","安装完这两个之后...","安装所需的系统包（这将花费一些时间）","导航到您克隆的Extras仓库","此方法推荐使用，因为Conda为Extras所需的包创建了一个“虚拟环境”，这样它们就不会影响您系统范围内的Python设置。","激活新环境","请参阅下方“安装后运行Extras”"]},{"l":"系统范围安装","p":["这更简单，但会影响您的系统范围的 Python 安装。","如果您使用许多具有不同要求的 Python 程序，这可能会导致冲突。","如果这是您第一次接触与 Python 相关的内容，那应该不会成为问题。","安装 Python 3.11: https://www.python.org/downloads/release/python-3115/","安装 git: https://git-scm.com/downloads","打开命令提示符窗口，并进入您具有完全访问权限的文件夹。","克隆仓库: git clone https://github.com/SillyTavern/SillyTavern-extras，按 Enter。","克隆完成后，输入 cd SillyTavern-extras，按 Enter。","输入 python -m pip install -r requirements.txt","请参见下面的“安装后运行附加功能”"]},{"l":"安装后运行附加程序"},{"l":"确认扩展已启用","p":["在文本编辑器中打开名为 config.yaml 的文件。该文件位于 ST 的基本安装文件夹中。","查找包含 enableExtensions 的行。","确保该行的值为 true，而不是 false。"]},{"l":"决定使用哪个模块","p":["（这只需要做一次）","caption","chromadb","classify","Coqui TTS","coqui-tts","edge-tts","Extras 始终通过 Python 命令行启动。","Microsoft Edge TTS 客户端","python server.py 是最低限度，但不会启用任何有用的模块。","rvc","sd","Silero TTS 服务器","silero-tts","summarize","下面是描述每个模块的表格。","决定要添加到 Python 命令行中的模块。","名称","向量存储服务器","图像字幕","它们将在下一步中使用。","实时语音克隆","描述","文本情感分类","文本摘要","注意：您的 Python 命令模块列表中绝对不能有空格！","示例： python server.py --enable-modules=caption,summarize,classify","稳定扩散图像生成","要启用模块，必须使用 --enable-modules= 修饰符，并提供以逗号分隔的模块名称列表。","这将启用图像字幕、聊天摘要和实时更新的角色表情。"]},{"l":"启动 Extras 服务器","p":["在 Extras 安装文件夹内的命令提示符窗口中...","确保您的 conda 环境处于活动状态（如果您使用了 Conda 安装方法）","如果环境未激活，请输入 activate extras。","输入 python server.py --enable-modules=YOUR,SELECTED,MODULE,LIST,HERE","extras 服务器将加载。","过一会儿，它会在最后显示一个 URL。对于本地安装，默认为 http://localhost:5100。","复制 API URL。"]},{"l":"将 ST 连接到 Extras 服务器","p":["启动您的 SillyTavern 服务器，并在浏览器中查看 SillyTavern 界面。","打开扩展面板（通过页面顶部的“叠块”图标）","将 API URL 粘贴到输入框中。","点击 Connect。","要再次运行 Extras，只需激活环境并在命令提示符中运行以下命令。","conda activate extras，按 Enter。 python server.py，按 Enter。","确保您设置所需的 server.py 的其他选项（见下文）。"]},{"l":"创建一个 .bat 文件以便于启动","p":["这一步是可选的，仅适用于 Windows，但在 MacOS 上应该也可以做到类似的操作。","查看您的 Windows 桌面","右键单击，选择 新建，然后点击 文本文件","桌面上会出现一个新文件，要求输入名称。","将文件命名为 STExtras.txt","在文本编辑器中打开新创建的文件。","将以下代码粘贴到其中：","用您实际的 Extras 安装文件夹路径替换占位符文件夹路径。","用您实际的命令行替换 python 命令行","将文件另存为新名称 STExtras.bat（在大多数文本编辑器中使用 文件>> 另存为）","现在您可以简单地双击这个 .bat 文件以便于启动 Extras。","如果您想更改模块列表（或任何其他 extras 服务器的命令行修饰符），只需编辑 .bat 文件中的 python 命令即可。"]}],[{"l":"附加组件安装常见问题","p":["本页面列出了在安装 SillyTavern 附加组件时遇到的常见问题和疑问。","在您的操作系统上（尤其是 Termux）本地安装附加组件可能会很困难或不可能。"]},{"l":"使用 官方附加组件 Colab","p":["设置简单","免费使用","无需 Colab GPU 额度（使用 use_cpu 选项）","有关详细信息，请参阅 Colab 指南页面。"]},{"i":"错误无法在-linux-上导入-talkinghead-模块","l":"错误：无法在 Linux 上导入 'talkinghead' 模块","p":["由于与 Colab 不兼容，它需要安装一个额外的软件包，因为它不会自动安装。在安装其他依赖项后运行以下命令：","pip install wxpython"]},{"l":"附加服务器无法连接到 AUTOMATIC1111 的 Stable Diffusion Web UI","p":["无法连接到远程 SD 后端 http://127.0.0.1:7860！正在禁用 SD 模块...","确保启动 Stable Diffusion 的 webui-user.bat 文件包含 --api 命令行选项在 COMMANDLINE_ARGS 变量中。","在你的 \"webui-user.bat\" 中找到并替换该行： set COMMANDLINE_ARGS=--api","它应该是这样的","如果 SD Web UI 的 API 模式被禁用，附加服务器将无法建立连接，你将无法生成图像！"]},{"i":"仍然无法工作","l":"仍然无法工作？","p":["确保你按照正确的顺序启动所有程序，等待每个程序加载完成后再进行下一步：","Stable Diffusion Web UI","SillyTavern 附加功能","SillyTavern","如果附加服务器在 Stable Diffusion API 之后加载，则无法重新连接。"]},{"l":"hnswlib 构建轮子时安装 ChromaDB 的错误","p":["错误：无法为 hnswlib 构建轮子，这对于安装基于 pyproject.toml 的项目是必需的","在安装 ChromaDB 模块之前，您必须首先执行 以下操作之一：","安装 Visual C++ 构建工具： https://visualstudio.microsoft.com/visual-cpp-build-tools/","使用 conda 安装 hnswlib 包： conda install -c conda-forge hnswlib"]},{"l":"在Mac上安装Python依赖时出错","p":["ERROR: No matching distribution found for torch== 2.0.0+cu117","Mac不支持CUDA，因此torch包应在没有CUDA支持的情况下安装。","请使用 requirements-silicon.txt 文件安装依赖。"]},{"i":"缺少模块","l":"缺少模块？","p":["您必须在 Python 命令行中指定模块名称列表，并使用 --enable-modules 修饰符。","请参阅 Modules 部分。"]},{"i":"api-key框的用途是什么","l":"API Key框的用途是什么？","p":["SillyTavern的扩展面板中的API Key框仅在您：","在您的Extras安装文件夹中创建了一个名为 api_key.txt 的文本文件，该文件包含您选择的Extras '密码'。","使用--secure 命令行参数启动了扩展。","这使得Extras API '密码锁定'，因此只有在其API Key框中拥有该密钥的用户才能访问它。","这主要对想要自己公开部署Extras（colab等）的人有用。","在个人电脑上运行Extras以供个人使用的用户不应在API Key框中输入任何内容。"]},{"i":"移动设备-android-termux-怎么样","l":"移动设备/Android/Termux 怎么样？\uD83E\uDD14","p":["社区中有一些人成功地通过 Termux 在手机上运行 Extras。","然而，Extras 并不是为了移动设备支持而设计的。","不会为在 Android 设备上运行 Extras 的用户提供支持。","请将所有问题直接指向下面链接的指南创建者。"]},{"i":"这是不受支持的","l":"❗ 这是不受支持的","p":["https://rentry.org/STAI-Termux#downloading-and-running-tai-extras"]}],[{"l":"许可证和致谢","p":["AlpinDale的Linux启动脚本","city_unit的扩展和各种生活质量功能（ https://github.com/city-unit）","CncAnon的TavernAITurbo mod的部分：未知许可证","Cohee的修改和衍生代码：AGPL v3","Font Awesome的图标主题 https://fontawesome.com（图标：CC BY 4.0，字体：SIL OFL 1.1，代码：MIT许可证）","Google的Noto Sans字体（OFL许可证）","Humi的TAI Base：MIT","KAI Lite的KoboldAI预设： https://lite.koboldai.net/","kingbri的各种提交和建议（ https://github.com/bdashore3）","Ouoertheo的TTS和Objective扩展","RossAscends的添加：AGPL v3","Waifu模式灵感来自PepperTaco的作品（ https://github.com/peppertaco/Tavern/）","ZeldaFan0225的AI Horde客户端库： https://github.com/ZeldaFan0225/ai_horde","感谢oobabooga为TextGen编译预设","感谢paniphons提供FAQ文档","感谢Pygmalion大学的优秀测试者和建议的酷功能！","有关更多详细信息，请参阅GNU Affero通用公共许可证。","本程序的发布是希望它能有所帮助，但不提供任何保证；甚至不包括适销性或特定用途适用性的隐含保证。"]},{"i":"觉得你的名字缺失了吗","l":"觉得你的名字缺失了吗？","p":["通过使用“编辑此页面”链接打开一个 Pull Request，这样我们就可以正确地给你和你的贡献致以感谢！"]}]]